if(function(){"use strict";var t=this,e=t.Chart,s=function(t){this.canvas=t.canvas,this.ctx=t;var e=function(t,e){return t["offset"+e]?t["offset"+e]:document.defaultView.getComputedStyle(t).getPropertyValue(e)},i=this.width=e(t.canvas,"Width"),o=this.height=e(t.canvas,"Height");t.canvas.width=i,t.canvas.height=o;i=this.width=t.canvas.width,o=this.height=t.canvas.height;return this.aspectRatio=this.width/this.height,d.retinaScale(this),this};s.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},s.types={};var i,o,d=s.helpers={},p=d.each=function(t,e,i){var o,n=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length)for(o=0;o<t.length;o++)e.apply(i,[t[o],o].concat(n));else for(var s in t)e.apply(i,[t[s],s].concat(n))},a=d.clone=function(i){var o={};return p(i,function(t,e){i.hasOwnProperty(e)&&(o[e]=t)}),o},r=d.extend=function(o){return p(Array.prototype.slice.call(arguments,1),function(i){p(i,function(t,e){i.hasOwnProperty(e)&&(o[e]=t)})}),o},l=d.merge=function(t,e){var i=Array.prototype.slice.call(arguments,0);return i.unshift({}),r.apply(null,i)},f=d.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},n=(d.where=function(t,e){var i=[];return d.each(t,function(t){e(t)&&i.push(t)}),i},d.findNextWhere=function(t,e,i){i||(i=-1);for(var o=i+1;o<t.length;o++){var n=t[o];if(e(n))return n}},d.findPreviousWhere=function(t,e,i){i||(i=t.length);for(var o=i-1;0<=o;o--){var n=t[o];if(e(n))return n}},d.inherits=function(t){var e=this,i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},o=function(){this.constructor=i};return o.prototype=e.prototype,i.prototype=new o,i.extend=n,t&&r(i.prototype,t),i.__super__=e.prototype,i}),h=d.noop=function(){},c=d.uid=(i=0,function(){return"chart-"+i++}),u=d.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},m=d.amd="function"==typeof define&&define.amd,g=d.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},v=d.max=function(t){return Math.max.apply(Math,t)},y=d.min=function(t){return Math.min.apply(Math,t)},b=(d.cap=function(t,e,i){if(g(e)){if(e<t)return e}else if(g(i)&&t<i)return i;return t},d.getDecimalPlaces=function(t){return t%1!=0&&g(t)?t.toString().split(".")[1].length:0}),w=d.radians=function(t){return t*(Math.PI/180)},C=(d.getAngleFromPoint=function(t,e){var i=e.x-t.x,o=e.y-t.y,n=Math.sqrt(i*i+o*o),s=2*Math.PI+Math.atan2(o,i);return i<0&&o<0&&(s+=2*Math.PI),{angle:s,distance:n}},d.aliasPixel=function(t){return t%2==0?0:.5}),E=(d.splineCurve=function(t,e,i,o){var n=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),s=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)),a=o*n/(n+s),r=o*s/(n+s);return{inner:{x:e.x-a*(i.x-t.x),y:e.y-a*(i.y-t.y)},outer:{x:e.x+r*(i.x-t.x),y:e.y+r*(i.y-t.y)}}},d.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),_=(d.calculateScaleRange=function(t,e,i,o,n){var s=Math.floor(e/(1.5*i)),a=s<=2,r=v(t),l=y(t);r===l&&(r+=.5,.5<=l&&!o?l-=.5:r+=.5);for(var h=Math.abs(r-l),c=E(h),u=Math.ceil(r/(1*Math.pow(10,c)))*Math.pow(10,c),d=o?0:Math.floor(l/(1*Math.pow(10,c)))*Math.pow(10,c),p=u-d,f=Math.pow(10,c),m=Math.round(p/f);(s<m||2*m<s)&&!a;)if(s<m)f*=2,(m=Math.round(p/f))%1!=0&&(a=!0);else if(n&&0<=c){if(f/2%1!=0)break;f/=2,m=Math.round(p/f)}else f/=2,m=Math.round(p/f);return a&&(f=p/(m=2)),{steps:m,stepValue:f,min:d,max:d+m*f}},d.template=function(t,e){if(t instanceof Function)return t(e);var i,o,n,s={};return o=e,n=/\W/.test(i=t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+i.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):s[i]=s[i],o?n(o):n}),x=(d.generateLabels=function(i,t,o,n){var s=new Array(t);return labelTemplateString&&p(s,function(t,e){s[e]=_(i,{value:o+n*(e+1)})}),s},d.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(1-Math.pow(2,-10*t/1))},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return 1<=t?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,i=0,o=1;return 0===t?0:1==(t/=1)?1:(i||(i=.3),e=o<Math.abs(1)?(o=1,i/4):i/(2*Math.PI)*Math.asin(1/o),-o*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/i))},easeOutElastic:function(t){var e=1.70158,i=0,o=1;return 0===t?0:1==(t/=1)?1:(i||(i=.3),e=o<Math.abs(1)?(o=1,i/4):i/(2*Math.PI)*Math.asin(1/o),o*Math.pow(2,-10*t)*Math.sin((1*t-e)*(2*Math.PI)/i)+1)},easeInOutElastic:function(t){var e=1.70158,i=0,o=1;return 0===t?0:2==(t/=.5)?1:(i||(i=.3*1.5*1),e=o<Math.abs(1)?(o=1,i/4):i/(2*Math.PI)*Math.asin(1/o),t<1?o*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/i)*-.5:o*Math.pow(2,-10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/i)*.5+1)},easeInBack:function(t){return 1*(t/=1)*t*(2.70158*t-1.70158)},easeOutBack:function(t){return 1*((t=t/1-1)*t*(2.70158*t+1.70158)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-x.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t*1:t<2/2.75?1*(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return t<.5?.5*x.easeInBounce(2*t):.5*x.easeOutBounce(2*t-1)+.5}}),S=d.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},T=d.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)},R=(d.animationLoop=function(i,o,t,n,s,a){var r=0,l=x[t]||x.linear,h=function(){var t=++r/o,e=l(t);i.call(a,e,t,r),n.call(a,e,t),r<o?a.animationFrame=S(h):s.apply(a)};S(h)},d.getRelativePosition=function(t){var e,i,o=t.originalEvent||t,n=(t.currentTarget||t.srcElement).getBoundingClientRect();return i=o.touches?(e=o.touches[0].clientX-n.left,o.touches[0].clientY-n.top):(e=o.clientX-n.left,o.clientY-n.top),{x:e,y:i}},d.addEvent=function(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}),k=d.removeEvent=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=h},D=(d.bindEvents=function(e,t,i){e.events||(e.events={}),p(t,function(t){e.events[t]=function(){i.apply(e,arguments)},R(e.chart.canvas,t,e.events[t])})},d.unbindEvents=function(i,t){p(t,function(t,e){k(i.chart.canvas,e,t)})}),M=d.getMaximumWidth=function(t){return t.parentNode.clientWidth},L=d.getMaximumHeight=function(t){return t.parentNode.clientHeight},P=(d.getMaximumSize=d.getMaximumWidth,d.retinaScale=function(t){var e=t.ctx,i=t.canvas.width,o=t.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=i+"px",e.canvas.style.height=o+"px",e.canvas.height=o*window.devicePixelRatio,e.canvas.width=i*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio))}),A=d.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},I=d.fontString=function(t,e,i){return e+" "+t+"px "+i},O=d.longestText=function(i,t,e){i.font=t;var o=0;return p(e,function(t){var e=i.measureText(t).width;o=o<e?e:o}),o},F=d.drawRoundedRectangle=function(t,e,i,o,n,s){t.beginPath(),t.moveTo(e+s,i),t.lineTo(e+o-s,i),t.quadraticCurveTo(e+o,i,e+o,i+s),t.lineTo(e+o,i+n-s),t.quadraticCurveTo(e+o,i+n,e+o-s,i+n),t.lineTo(e+s,i+n),t.quadraticCurveTo(e,i+n,e,i+n-s),t.lineTo(e,i+s),t.quadraticCurveTo(e,i,e+s,i),t.closePath()};s.instances={},r((s.Type=function(t,e,i){this.options=e,this.chart=i,this.id=c(),s.instances[this.id]=this,e.responsive&&this.resize(),this.initialize.call(this,t)}).prototype,{initialize:function(){return this},clear:function(){return A(this.chart),this},stop:function(){return T(this.animationFrame),this},resize:function(t){this.stop();var e=this.chart.canvas,i=M(this.chart.canvas),o=this.options.maintainAspectRatio?i/this.chart.aspectRatio:L(this.chart.canvas);return e.width=this.chart.width=i,e.height=this.chart.height=o,P(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:h,render:function(t){return t&&this.reflow(),this.options.animation&&!t?d.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return _(this.options.legendTemplate,this)},destroy:function(){this.clear(),D(this,this.events);var t=this.chart.canvas;t.width=this.chart.width,t.height=this.chart.height,t.style.removeProperty?(t.style.removeProperty("width"),t.style.removeProperty("height")):(t.style.removeAttribute("width"),t.style.removeAttribute("height")),delete s.instances[this.id]},showTooltip:function(t,e){if(void 0===this.activeElements&&(this.activeElements=[]),function(t){var i=!1;return t.length!==this.activeElements.length?i=!0:(p(t,function(t,e){t!==this.activeElements[e]&&(i=!0)},this),i)}.call(this,t)||e){if(this.activeElements=t,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),0<t.length)if(this.datasets&&1<this.datasets.length){for(var i,h,o=this.datasets.length-1;0<=o&&(i=this.datasets[o].points||this.datasets[o].bars||this.datasets[o].segments,-1===(h=f(i,t[0])));o--);var c=[],u=[],n=function(t){var e,i,o,n,s,a=[],r=[],l=[];return d.each(this.datasets,function(t){(e=t.points||t.bars||t.segments)[h]&&e[h].hasValue()&&a.push(e[h])}),d.each(a,function(t){r.push(t.x),l.push(t.y),c.push(d.template(this.options.multiTooltipTemplate,t)),u.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),s=y(l),o=v(l),n=y(r),i=v(r),{x:n>this.chart.width/2?n:i,y:(s+o)/2}}.call(this,h);new s.MultiTooltip({x:n.x,y:n.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:c,legendColors:u,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else p(t,function(t){var e=t.tooltipPosition();new s.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:_(this.options.tooltipTemplate,t),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),s.Type.extend=function(t){var e=this,o=function(){return e.apply(this,arguments)};if(o.prototype=a(e.prototype),r(o.prototype,t),o.extend=s.Type.extend,t.name||e.prototype.name){var n=t.name||e.prototype.name,i=s.defaults[e.prototype.name]?a(s.defaults[e.prototype.name]):{};s.defaults[n]=r(i,t.defaults),s.types[n]=o,s.prototype[n]=function(t,e){var i=l(s.defaults.global,s.defaults[n],e||{});return new o(t,i,this)}}else u("Name not provided for this chart, so it hasn't been registered");return e},r((s.Element=function(t){r(this,t),this.initialize.apply(this,arguments),this.save()}).prototype,{initialize:function(){},restore:function(t){return t?p(t,function(t){this[t]=this._saved[t]},this):r(this,this._saved),this},save:function(){return this._saved=a(this),delete this._saved._saved,this},update:function(t){return p(t,function(t,e){this._saved[e]=this[e],this[e]=t},this),this},transition:function(t,i){return p(t,function(t,e){this[e]=(t-this._saved[e])*i+this._saved[e]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return g(this.value)}}),s.Element.extend=n,s.Point=s.Element.extend({display:!0,inRange:function(t,e){var i=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(i,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),s.Arc=s.Element.extend({inRange:function(t,e){var i=d.getAngleFromPoint(this,{x:t,y:e}),o=i.angle>=this.startAngle&&i.angle<=this.endAngle,n=i.distance>=this.innerRadius&&i.distance<=this.outerRadius;return o&&n},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(t){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),e.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.lineJoin="bevel",this.showStroke&&e.stroke()}}),s.Rectangle=s.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,i=this.x-e,o=this.x+e,n=this.base-(this.base-this.y),s=this.strokeWidth/2;this.showStroke&&(i+=s,o-=s,n+=s),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(i,this.base),t.lineTo(i,n),t.lineTo(o,n),t.lineTo(o,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base}}),s.Tooltip=s.Element.extend({draw:function(){var t=this.chart.ctx;t.font=I(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var e=this.caretPadding=2,i=t.measureText(this.text).width+2*this.xPadding,o=this.fontSize+2*this.yPadding,n=o+this.caretHeight+e;this.x+i/2>this.chart.width?this.xAlign="left":this.x-i/2<0&&(this.xAlign="right"),this.y-n<0&&(this.yAlign="below");var s=this.x-i/2,a=this.y-n;if(t.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-e),t.lineTo(this.x+this.caretHeight,this.y-(e+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(e+this.caretHeight)),t.closePath(),t.fill();break;case"below":a=this.y+e+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+e),t.lineTo(this.x+this.caretHeight,this.y+e+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+e+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":s=this.x-i+(this.cornerRadius+this.caretHeight);break;case"right":s=this.x-(this.cornerRadius+this.caretHeight)}F(t,s,a,i,o,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,s+i/2,a+o/2)}}}),s.MultiTooltip=s.Element.extend({initialize:function(){this.font=I(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=I(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=O(this.ctx,this.font,this.labels)+this.fontSize+3,i=v([e,t]);this.width=i+2*this.xPadding;var o=this.height/2;this.y-o<0?this.y=o:this.y+o>this.chart.height&&(this.y=this.chart.height-o),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,i=t-1;return 0===t?e+this.titleFontSize/2:e+(1.5*this.fontSize*i+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{F(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var i=this.ctx;i.fillStyle=this.fillColor,i.fill(),i.closePath(),i.textAlign="left",i.textBaseline="middle",i.fillStyle=this.titleTextColor,i.font=this.titleFont,i.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),i.font=this.font,d.each(this.labels,function(t,e){i.fillStyle=this.textColor,i.fillText(t,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(e+1)),i.fillStyle=this.legendColorBackground,i.fillRect(this.x+this.xPadding,this.getLineHeight(e+1)-this.fontSize/2,this.fontSize,this.fontSize),i.fillStyle=this.legendColors[e].fill,i.fillRect(this.x+this.xPadding,this.getLineHeight(e+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),s.Scale=s.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=b(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(_(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?O(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,e=this.endPoint-this.startPoint;for(this.calculateYRange(e),this.buildYLabels(),this.calculateXLabelRotation();e>this.endPoint-this.startPoint;)e=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(e),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,e=this.ctx.measureText(this.xLabels[0]).width,i=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=i/2+3,this.xScalePaddingLeft=e/2>this.yLabelWidth+10?e/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var o,n=O(this.ctx,this.font,this.xLabels);this.xLabelWidth=n;for(var s=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>s&&0===this.xLabelRotation||this.xLabelWidth>s&&this.xLabelRotation<=90&&0<this.xLabelRotation;)(o=Math.cos(w(this.xLabelRotation)))*i,(t=o*e)+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=o*n;0<this.xLabelRotation&&(this.endPoint-=Math.sin(w(this.xLabelRotation))*n+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:h,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){this.xLabelRotation;var e=(this.width-(this.xScalePaddingLeft+this.xScalePaddingRight))/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),i=e*t+this.xScalePaddingLeft;return this.offsetGridLines&&(i+=e/2),Math.round(i)},update:function(t){d.extend(this,t),this.fit()},draw:function(){var a=this.ctx,s=(this.endPoint-this.startPoint)/this.steps,r=Math.round(this.xScalePaddingLeft);this.display&&(a.fillStyle=this.textColor,a.font=this.font,p(this.yLabels,function(t,e){var i=this.endPoint-s*e,o=Math.round(i),n=this.showHorizontalLines;a.textAlign="right",a.textBaseline="middle",this.showLabels&&a.fillText(t,r-10,i),0!==e||n||(n=!0),n&&a.beginPath(),0<e?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor),o+=d.aliasPixel(a.lineWidth),n&&(a.moveTo(r,o),a.lineTo(this.width,o),a.stroke(),a.closePath()),a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor,a.beginPath(),a.moveTo(r-5,o),a.lineTo(r,o),a.stroke(),a.closePath()},this),p(this.xLabels,function(t,e){var i=this.calculateX(e)+C(this.lineWidth),o=this.calculateX(e-(this.offsetGridLines?.5:0))+C(this.lineWidth),n=0<this.xLabelRotation,s=this.showVerticalLines;0!==e||s||(s=!0),s&&a.beginPath(),0<e?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor),s&&(a.moveTo(o,this.endPoint),a.lineTo(o,this.startPoint-3),a.stroke(),a.closePath()),a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor,a.beginPath(),a.moveTo(o,this.endPoint),a.lineTo(o,this.endPoint+5),a.stroke(),a.closePath(),a.save(),a.translate(i,n?this.endPoint+12:this.endPoint+8),a.rotate(-1*w(this.xLabelRotation)),a.font=this.font,a.textAlign=n?"right":"center",a.textBaseline=n?"middle":"top",a.fillText(t,0,0),a.restore()},this))}}),s.RadialScale=s.Element.extend({initialize:function(){this.size=y([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=b(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(_(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,e,i,o,n,s,a,r,l,h,c,u,d=y([this.height/2-this.pointLabelFontSize-5,this.width/2]),p=this.width,f=0;for(this.ctx.font=I(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e=0;e<this.valuesCount;e++)t=this.getPointPosition(e,d),i=this.ctx.measureText(_(this.templateString,{value:this.labels[e]})).width+5,0===e||e===this.valuesCount/2?(o=i/2,t.x+o>p&&(p=t.x+o,n=e),t.x-o<f&&(f=t.x-o,a=e)):e<this.valuesCount/2?t.x+i>p&&(p=t.x+i,n=e):e>this.valuesCount/2&&t.x-i<f&&(f=t.x-i,a=e);l=f,h=Math.ceil(p-this.width),s=this.getIndexAngle(n),r=this.getIndexAngle(a),c=h/Math.sin(s+Math.PI/2),u=l/Math.sin(r+Math.PI/2),c=g(c)?c:0,u=g(u)?u:0,this.drawingArea=d-(u+c)/2,this.setCenterPoint(u,c)},setCenterPoint:function(t,e){var i=this.width-e-this.drawingArea,o=t+this.drawingArea;this.xCenter=(o+i)/2,this.yCenter=this.height/2},getIndexAngle:function(t){return t*(2*Math.PI/this.valuesCount)-Math.PI/2},getPointPosition:function(t,e){var i=this.getIndexAngle(t);return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter}},draw:function(){if(this.display){var r=this.ctx;if(p(this.yLabels,function(t,e){if(0<e){var i,o=e*(this.drawingArea/this.steps),n=this.yCenter-o;if(0<this.lineWidth)if(r.strokeStyle=this.lineColor,r.lineWidth=this.lineWidth,this.lineArc)r.beginPath(),r.arc(this.xCenter,this.yCenter,o,0,2*Math.PI),r.closePath(),r.stroke();else{r.beginPath();for(var s=0;s<this.valuesCount;s++)i=this.getPointPosition(s,this.calculateCenterOffset(this.min+e*this.stepValue)),0===s?r.moveTo(i.x,i.y):r.lineTo(i.x,i.y);r.closePath(),r.stroke()}if(this.showLabels){if(r.font=I(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var a=r.measureText(t).width;r.fillStyle=this.backdropColor,r.fillRect(this.xCenter-a/2-this.backdropPaddingX,n-this.fontSize/2-this.backdropPaddingY,a+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}r.textAlign="center",r.textBaseline="middle",r.fillStyle=this.fontColor,r.fillText(t,this.xCenter,n)}}},this),!this.lineArc){r.lineWidth=this.angleLineWidth,r.strokeStyle=this.angleLineColor;for(var t=this.valuesCount-1;0<=t;t--){if(0<this.angleLineWidth){var e=this.getPointPosition(t,this.calculateCenterOffset(this.max));r.beginPath(),r.moveTo(this.xCenter,this.yCenter),r.lineTo(e.x,e.y),r.stroke(),r.closePath()}var i=this.getPointPosition(t,this.calculateCenterOffset(this.max)+5);r.font=I(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),r.fillStyle=this.pointLabelFontColor;var o=this.labels.length,n=this.labels.length/2,s=n/2,a=t<s||o-s<t,l=t===s||t===o-s;r.textAlign=0===t?"center":t===n?"center":t<n?"left":"right",r.textBaseline=l?"middle":a?"bottom":"top",r.fillText(this.labels[t],i.x,i.y)}}}}}),d.addEvent(window,"resize",function(){clearTimeout(o),o=setTimeout(function(){p(s.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}),m?define(function(){return s}):"object"==typeof module&&module.exports&&(module.exports=s),(t.Chart=s).noConflict=function(){return t.Chart=e,s}}.call(this),function(){"use strict";var t=this.Chart,r=t.helpers;t.Type.extend({name:"Bar",defaults:{scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(n){var a=this.options;this.ScaleClass=t.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,e,i){var o=this.calculateBaseWidth(),n=this.calculateX(i)-o/2,s=this.calculateBarWidth(t);return n+s*e+e*a.barDatasetSpacing+s/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*a.barValueSpacing},calculateBarWidth:function(t){return(this.calculateBaseWidth()-(t-1)*a.barDatasetSpacing)/t}}),this.datasets=[],this.options.showTooltips&&r.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),r.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),this.BarClass=t.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),r.each(n.datasets,function(i,t){var o={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,bars:[]};this.datasets.push(o),r.each(i.data,function(t,e){o.bars.push(new this.BarClass({value:t,label:n.labels[e],datasetLabel:i.label,strokeColor:i.strokeColor,fillColor:i.fillColor,highlightFill:i.highlightFill||i.fillColor,highlightStroke:i.highlightStroke||i.strokeColor}))},this)},this),this.buildScale(n.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,e,i){r.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,i,e),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),r.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(i){r.each(this.datasets,function(t,e){r.each(t.bars,i,this,e)},this)},getBarsAtEvent:function(t){for(var e,i=[],o=r.getRelativePosition(t),n=function(t){i.push(t.bars[e])},s=0;s<this.datasets.length;s++)for(e=0;e<this.datasets[s].bars.length;e++)if(this.datasets[s].bars[e].inRange(o.x,o.y))return r.each(this.datasets,n),i;return i},buildScale:function(t){var o=this,e={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e,i=r.calculateScaleRange((e=[],o.eachBars(function(t){e.push(t.value)}),e),t,this.fontSize,this.beginAtZero,this.integersOnly);r.extend(this,i)},xLabels:t,font:r.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&r.extend(e,{calculateYRange:r.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(e)},addData:function(t,i){r.each(t,function(t,e){this.datasets[e].bars.push(new this.BarClass({value:t,label:i,x:this.scale.calculateBarX(this.datasets.length,e,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[e].strokeColor,fillColor:this.datasets[e].fillColor}))},this),this.scale.addXLabel(i),this.update()},removeData:function(){this.scale.removeXLabel(),r.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){r.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=r.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var o=t||1;this.clear();this.chart.ctx;this.scale.draw(o),r.each(this.datasets,function(t,i){r.each(t.bars,function(t,e){t.hasValue()&&(t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,i,e),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},o).draw())},this)},this)}})}.call(this),function(){"use strict";var e=this.Chart,o=e.helpers,t={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Doughnut",defaults:t,initialize:function(t){this.segments=[],this.outerRadius=(o.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=e.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&o.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];o.each(this.segments,function(t){t.restore(["fillColor"])}),o.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.calculateTotal(t),o.each(t,function(t,e){this.addData(t,e,!0)},this),this.render()},getSegmentsAtEvent:function(t){var e=[],i=o.getRelativePosition(t);return o.each(this.segments,function(t){t.inRange(i.x,i.y)&&e.push(t)},this),e},addData:function(t,e,i){var o=e||this.segments.length;this.segments.splice(o,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),i||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(Math.abs(t)/this.total)},calculateTotal:function(t){this.total=0,o.each(t,function(t){this.total+=Math.abs(t.value)},this)},update:function(){this.calculateTotal(this.segments),o.each(this.activeElements,function(t){t.restore(["fillColor"])}),o.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var e=o.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},reflow:function(){o.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(o.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,o.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var i=t||1;this.clear(),o.each(this.segments,function(t,e){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},i),t.endAngle=t.startAngle+t.circumference,t.draw(),0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle)},this)}}),e.types.Doughnut.extend({name:"Pie",defaults:o.merge(t,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var i=this.Chart,h=i.helpers;i.Type.extend({name:"Line",defaults:{scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(n){this.PointClass=i.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&h.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),h.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),h.each(n.datasets,function(i){var o={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,pointColor:i.pointColor,pointStrokeColor:i.pointStrokeColor,points:[]};this.datasets.push(o),h.each(i.data,function(t,e){o.points.push(new this.PointClass({value:t,label:n.labels[e],datasetLabel:i.label,strokeColor:i.pointStrokeColor,fillColor:i.pointColor,highlightFill:i.pointHighlightFill||i.pointColor,highlightStroke:i.pointHighlightStroke||i.pointStrokeColor}))},this),this.buildScale(n.labels),this.eachPoints(function(t,e){h.extend(t,{x:this.scale.calculateX(e),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),h.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(e){h.each(this.datasets,function(t){h.each(t.points,e,this)},this)},getPointsAtEvent:function(t){var e=[],i=h.getRelativePosition(t);return h.each(this.datasets,function(t){h.each(t.points,function(t){t.inRange(i.x,i.y)&&e.push(t)})},this),e},buildScale:function(t){var o=this,e={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e,i=h.calculateScaleRange((e=[],o.eachPoints(function(t){e.push(t.value)}),e),t,this.fontSize,this.beginAtZero,this.integersOnly);h.extend(this,i)},xLabels:t,font:h.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&h.extend(e,{calculateYRange:h.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new i.Scale(e)},addData:function(t,i){h.each(t,function(t,e){this.datasets[e].points.push(new this.PointClass({value:t,label:i,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this),this.scale.addXLabel(i),this.update()},removeData:function(){this.scale.removeXLabel(),h.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=h.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1;this.clear();var o=this.chart.ctx,r=function(t){return null!==t.value},l=function(t,e,i){return h.findPreviousWhere(e,r,i)||t};this.scale.draw(i),h.each(this.datasets,function(t){var a=h.where(t.points,r);h.each(t.points,function(t,e){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(e)},i)},this),this.options.bezierCurve&&h.each(a,function(t,e){var i,o,n,s=0<e&&e<a.length-1?this.options.bezierCurveTension:0;t.controlPoints=h.splineCurve(l(t,a,e),t,(i=t,o=a,n=e,h.findNextWhere(o,r,n)||i),s),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),o.lineWidth=this.options.datasetStrokeWidth,o.strokeStyle=t.strokeColor,o.beginPath(),h.each(a,function(t,e){if(0===e)o.moveTo(t.x,t.y);else if(this.options.bezierCurve){var i=l(t,a,e);o.bezierCurveTo(i.controlPoints.outer.x,i.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else o.lineTo(t.x,t.y)},this),o.stroke(),this.options.datasetFill&&0<a.length&&(o.lineTo(a[a.length-1].x,this.scale.endPoint),o.lineTo(a[0].x,this.scale.endPoint),o.fillStyle=t.fillColor,o.closePath(),o.fill()),h.each(a,function(t){t.draw()})},this)}})}.call(this),function(){"use strict";var e=this.Chart,o=e.helpers;e.Type.extend({name:"PolarArea",defaults:{scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'},initialize:function(t){this.segments=[],this.SegmentArc=e.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:t.length}),this.updateScaleRange(t),this.scale.update(),o.each(t,function(t,e){this.addData(t,e,!0)},this),this.options.showTooltips&&o.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];o.each(this.segments,function(t){t.restore(["fillColor"])}),o.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.render()},getSegmentsAtEvent:function(t){var e=[],i=o.getRelativePosition(t);return o.each(this.segments,function(t){t.inRange(i.x,i.y)&&e.push(t)},this),e},addData:function(t,e,i){var o=e||this.segments.length;this.segments.splice(o,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),i||(this.reflow(),this.update())},removeData:function(t){var e=o.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,o.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var e=[];o.each(t,function(t){e.push(t.value)});var i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:o.calculateScaleRange(e,o.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);o.extend(this.scale,i,{size:o.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),o.each(this.segments,function(t){t.save()}),this.reflow(),this.render()},reflow:function(){o.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),o.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),o.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var i=t||1;this.clear(),o.each(this.segments,function(t,e){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},i),t.endAngle=t.startAngle+t.circumference,0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var e=this.Chart,a=e.helpers;e.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(s){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(s),this.options.showTooltips&&a.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),a.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),a.each(s.datasets,function(o){var n={label:o.label||null,fillColor:o.fillColor,strokeColor:o.strokeColor,pointColor:o.pointColor,pointStrokeColor:o.pointStrokeColor,points:[]};this.datasets.push(n),a.each(o.data,function(t,e){var i;this.scale.animation||(i=this.scale.getPointPosition(e,this.scale.calculateCenterOffset(t))),n.points.push(new this.PointClass({value:t,label:s.labels[e],datasetLabel:o.label,x:this.options.animation?this.scale.xCenter:i.x,y:this.options.animation?this.scale.yCenter:i.y,strokeColor:o.pointStrokeColor,fillColor:o.pointColor,highlightFill:o.pointHighlightFill||o.pointColor,highlightStroke:o.pointHighlightStroke||o.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(e){a.each(this.datasets,function(t){a.each(t.points,e,this)},this)},getPointsAtEvent:function(t){var e=a.getRelativePosition(t),i=a.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},e),o=2*Math.PI/this.scale.valuesCount,n=Math.round((i.angle-1.5*Math.PI)/o),s=[];return(n>=this.scale.valuesCount||n<0)&&(n=0),i.distance<=this.scale.drawingArea&&a.each(this.datasets,function(t){s.push(t.points[n])}),s},buildScale:function(t){this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:t.labels,valuesCount:t.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(t.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var e,i=(e=[],a.each(t,function(t){t.data?e=e.concat(t.data):a.each(t.points,function(t){e.push(t.value)})}),e),o=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:a.calculateScaleRange(i,a.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);a.extend(this.scale,o)},addData:function(t,o){this.scale.valuesCount++,a.each(t,function(t,e){var i=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[e].points.push(new this.PointClass({value:t,label:o,x:i.x,y:i.y,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this),this.scale.labels.push(o),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),a.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){a.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:a.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var i=t||1,o=this.chart.ctx;this.clear(),this.scale.draw(),a.each(this.datasets,function(t){a.each(t.points,function(t,e){t.hasValue()&&t.transition(this.scale.getPointPosition(e,this.scale.calculateCenterOffset(t.value)),i)},this),o.lineWidth=this.options.datasetStrokeWidth,o.strokeStyle=t.strokeColor,o.beginPath(),a.each(t.points,function(t,e){0===e?o.moveTo(t.x,t.y):o.lineTo(t.x,t.y)},this),o.closePath(),o.stroke(),o.fillStyle=t.fillColor,o.fill(),a.each(t.points,function(t){t.hasValue()&&t.draw()})},this)}})}.call(this),function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.Tether=e()}(this,function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){var e=t.getBoundingClientRect(),i={};for(var o in e)i[o]=e[o];if(t.ownerDocument!==document){var n=t.ownerDocument.defaultView.frameElement;if(n){var s=a(n);i.top+=s.top,i.bottom+=s.top,i.left+=s.left,i.right+=s.left}}return i}function r(t){var e=(getComputedStyle(t)||{}).position,i=[];if("fixed"===e)return[t];for(var o=t;(o=o.parentNode)&&o&&1===o.nodeType;){var n=void 0;try{n=getComputedStyle(o)}catch(t){}if(null==n)return i.push(o),i;var s=n,a=s.overflow,r=s.overflowX,l=s.overflowY;/(auto|scroll)/.test(a+l+r)&&("absolute"!==e||0<=["relative","absolute","fixed"].indexOf(n.position))&&i.push(o)}return i.push(t.ownerDocument.body),t.ownerDocument!==document&&i.push(t.ownerDocument.defaultView),i}function n(){v&&document.body.removeChild(v),v=null}function T(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var i=e.documentElement,o=a(t),n=w();return o.top-=n.top,o.left-=n.left,void 0===o.width&&(o.width=document.body.scrollWidth-o.left-o.right),void 0===o.height&&(o.height=document.body.scrollHeight-o.top-o.bottom),o.top=o.top-i.clientTop,o.left=o.left-i.clientLeft,o.right=e.body.clientWidth-o.width-o.left,o.bottom=e.body.clientHeight-o.height-o.top,o}function S(t){return t.offsetParent||document.documentElement}function R(){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");k(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var o=t.offsetWidth;i===o&&(o=e.clientWidth),document.body.removeChild(e);var n=i-o;return{width:n,height:n}}function k(){var i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=[];return Array.prototype.push.apply(t,arguments),t.slice(1).forEach(function(t){if(t)for(var e in t)({}).hasOwnProperty.call(t,e)&&(i[e]=t[e])}),i}function s(e,t){if(void 0!==e.classList)t.split(" ").forEach(function(t){t.trim()&&e.classList.remove(t)});else{var i=new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi"),o=c(e).replace(i," ");u(e,o)}}function l(e,t){if(void 0!==e.classList)t.split(" ").forEach(function(t){t.trim()&&e.classList.add(t)});else{s(e,t);var i=c(e)+" "+t;u(e,i)}}function h(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=c(t);return new RegExp("(^| )"+e+"( |$)","gi").test(i)}function c(t){return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString?t.className.baseVal:t.className}function u(t,e){t.setAttribute("class",e)}function p(e,i,t){t.forEach(function(t){-1===i.indexOf(t)&&h(e,t)&&s(e,t)}),i.forEach(function(t){h(e,t)||l(e,t)})}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){var i=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return e<=t+i&&t-i<=e}function d(){return"undefined"!=typeof performance&&void 0!==performance.now?performance.now():+new Date}function D(){for(var o={top:0,left:0},t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.forEach(function(t){var e=t.top,i=t.left;"string"==typeof e&&(e=parseFloat(e,10)),"string"==typeof i&&(i=parseFloat(i,10)),o.top+=e,o.left+=i}),o}function M(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}var f=function(){function o(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}}(),L=void 0;void 0===L&&(L={modules:[]});var m,v=null,y=(m=0,function(){return++m}),b={},w=function(){var t=v;t||((t=document.createElement("div")).setAttribute("data-tether-id",y()),k(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),v=t);var e=t.getAttribute("data-tether-id");return void 0===b[e]&&(b[e]=a(t),P(function(){delete b[e]})),b[e]},C=[],P=function(t){C.push(t)},A=function(){for(var t=void 0;t=C.pop();)t()},E=function(){function t(){o(this,t)}return f(t,[{key:"on",value:function(t,e,i){var o=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];void 0===this.bindings&&(this.bindings={}),void 0===this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:i,once:o})}},{key:"once",value:function(t,e,i){this.on(t,e,i,!0)}},{key:"off",value:function(t,e){if(void 0!==this.bindings&&void 0!==this.bindings[t])if(void 0===e)delete this.bindings[t];else for(var i=0;i<this.bindings[t].length;)this.bindings[t][i].handler===e?this.bindings[t].splice(i,1):++i}},{key:"trigger",value:function(t){if(void 0!==this.bindings&&this.bindings[t]){for(var e=0,i=arguments.length,o=Array(1<i?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];for(;e<this.bindings[t].length;){var s=this.bindings[t][e],a=s.handler,r=s.ctx,l=s.once,h=r;void 0===h&&(h=this),a.apply(h,o),l?this.bindings[t].splice(e,1):++e}}}}]),t}();L.Utils={getActualBoundingClientRect:a,getScrollParents:r,getBounds:T,getOffsetParent:S,extend:k,addClass:l,removeClass:s,hasClass:h,updateClasses:p,defer:P,flush:A,uniqueId:y,Evented:E,getScrollBarSize:R,removeUtilElements:n};var I=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],o=!0,n=!1,s=void 0;try{for(var a,r=t[Symbol.iterator]();!(o=(a=r.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){n=!0,s=t}finally{try{!o&&r.return&&r.return()}finally{if(n)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};f=function(){function o(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}}();if(void 0===L)throw new Error("You must include the utils.js file before tether.js");var _,x,O,F,r=(X=L.Utils).getScrollParents,S=(T=X.getBounds,X.getOffsetParent),l=(k=X.extend,X.addClass),s=X.removeClass,R=(p=X.updateClasses,P=X.defer,A=X.flush,X.getScrollBarSize),n=X.removeUtilElements,H=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],i=0;i<e.length;++i){var o=e[i];if(void 0!==t.style[o])return o}}(),z=[],N=function(){z.forEach(function(t){t.position(!1)}),A()};O=x=_=null,F=function t(){return void 0!==x&&16<x?(x=Math.min(x-16,250),void(O=setTimeout(t,250))):void(void 0!==_&&d()-_<10||(null!=O&&(clearTimeout(O),O=null),_=d(),N(),x=d()-_))},"undefined"!=typeof window&&void 0!==window.addEventListener&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,F)});var B={center:"center",left:"right",right:"left"},W={middle:"middle",top:"bottom",bottom:"top"},j={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},Y=function(t){var e=t.left,i=t.top;return void 0!==j[t.left]&&(e=j[t.left]),void 0!==j[t.top]&&(i=j[t.top]),{left:e,top:i}},V=function(t){var e=t.split(" "),i=I(e,2);return{top:i[0],left:i[1]}},G=V,$=function(t){function i(t){var e=this;o(this,i),function(t,e,i){for(var o=!0;o;){var n=t,s=e,a=i;o=!1,null===n&&(n=Function.prototype);var r=Object.getOwnPropertyDescriptor(n,s);if(void 0!==r){if("value"in r)return r.value;var l=r.get;if(void 0===l)return;return l.call(a)}var h=Object.getPrototypeOf(n);if(null===h)return;t=h,e=s,i=a,o=!0,r=h=void 0}}(Object.getPrototypeOf(i.prototype),"constructor",this).call(this),this.position=this.position.bind(this),z.push(this),this.history=[],this.setOptions(t,!1),L.modules.forEach(function(t){void 0!==t.initialize&&t.initialize.call(e)}),this.position()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,E),f(i,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return void 0!==e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,i=arguments.length<=1||void 0===arguments[1]||arguments[1];this.options=k({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},t);var o=this.options,n=o.element,s=o.target,a=o.targetModifier;if(this.element=n,this.target=s,this.targetModifier=a,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if(void 0===e[t])throw new Error("Tether Error: Both element and target must be defined");void 0!==e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),l(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&l(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=G(this.options.targetAttachment),this.attachment=G(this.options.attachment),this.offset=V(this.options.offset),this.targetOffset=V(this.options.targetOffset),void 0!==this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=r(this.target),!1!==this.options.enabled&&this.enable(i)}},{key:"getTargetBounds",value:function(){if(void 0===this.targetModifier)return T(this.target);if("visible"===this.targetModifier)return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:((s={height:(t=T(this.target)).height,width:t.width,top:t.top,left:t.left}).height=Math.min(s.height,t.height-(pageYOffset-t.top)),s.height=Math.min(s.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),s.height=Math.min(innerHeight,s.height),s.height-=2,s.width=Math.min(s.width,t.width-(pageXOffset-t.left)),s.width=Math.min(s.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),s.width=Math.min(innerWidth,s.width),s.width-=2,s.top<pageYOffset&&(s.top=pageYOffset),s.left<pageXOffset&&(s.left=pageXOffset),s);if("scroll-handle"===this.targetModifier){var t=void 0,e=this.target;t=e===document.body?(e=document.documentElement,{left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):T(e);var i=getComputedStyle(e),o=0;(e.scrollWidth>e.clientWidth||0<=[i.overflow,i.overflowX].indexOf("scroll")||this.target!==document.body)&&(o=15);var n=t.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-o,s={width:15,height:.975*n*(n/e.scrollHeight),left:t.left+t.width-parseFloat(i.borderLeftWidth)-15},a=0;n<408&&this.target===document.body&&(a=-11e-5*Math.pow(n,2)-.00727*n+22.58),this.target!==document.body&&(s.height=Math.max(s.height,24));var r=this.target.scrollTop/(e.scrollHeight-n);return s.top=r*(n-s.height-a)+t.top+parseFloat(i.borderTopWidth),this.target===document.body&&(s.height=Math.max(s.height,24)),s}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return void 0===this._cache&&(this._cache={}),void 0===this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]||arguments[0];!1!==this.options.addTargetClasses&&l(this.target,this.getClass("enabled")),l(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(t){t!==e.target.ownerDocument&&t.addEventListener("scroll",e.position)}),t&&this.position()}},{key:"disable",value:function(){var e=this;s(this.target,this.getClass("enabled")),s(this.element,this.getClass("enabled")),this.enabled=!1,void 0!==this.scrollParents&&this.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.position)})}},{key:"destroy",value:function(){var i=this;this.disable(),z.forEach(function(t,e){t===i&&z.splice(e,1)}),0===z.length&&n()}},{key:"updateAttachClasses",value:function(t,e){var i=this;t=t||this.attachment,e=e||this.targetAttachment;void 0!==this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),void 0===this._addAttachClasses&&(this._addAttachClasses=[]);var o=this._addAttachClasses;t.top&&o.push(this.getClass("element-attached")+"-"+t.top),t.left&&o.push(this.getClass("element-attached")+"-"+t.left),e.top&&o.push(this.getClass("target-attached")+"-"+e.top),e.left&&o.push(this.getClass("target-attached")+"-"+e.left);var n=[];["left","top","bottom","right","middle","center"].forEach(function(t){n.push(i.getClass("element-attached")+"-"+t),n.push(i.getClass("target-attached")+"-"+t)}),P(function(){void 0!==i._addAttachClasses&&(p(i.element,i._addAttachClasses,n),!1!==i.options.addTargetClasses&&p(i.target,i._addAttachClasses,n),delete i._addAttachClasses)})}},{key:"position",value:function(){var t,e,i,o,r=this,n=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var s=(t=this.targetAttachment,e=this.attachment,i=t.left,o=t.top,"auto"===i&&(i=B[e.left]),"auto"===o&&(o=W[e.top]),{left:i,top:o});this.updateAttachClasses(this.attachment,s);var a=this.cache("element-bounds",function(){return T(r.element)}),l=a.width,h=a.height;if(0===l&&0===h&&void 0!==this.lastSize){var c=this.lastSize;l=c.width,h=c.height}else this.lastSize={width:l,height:h};var u=this.cache("target-bounds",function(){return r.getTargetBounds()}),d=u,p=M(Y(this.attachment),{width:l,height:h}),f=M(Y(s),d),m=M(this.offset,{width:l,height:h}),g=M(this.targetOffset,d);p=D(p,m),f=D(f,g);for(var v=u.left+f.left-p.left,y=u.top+f.top-p.top,b=0;b<L.modules.length;++b){var w=L.modules[b].position.call(this,{left:v,top:y,targetAttachment:s,targetPos:u,elementPos:a,offset:p,targetOffset:f,manualOffset:m,manualTargetOffset:g,scrollbarSize:x,attachment:this.attachment});if(!1===w)return!1;void 0!==w&&"object"==typeof w&&(y=w.top,v=w.left)}var C={page:{top:y,left:v},viewport:{top:y-pageYOffset,bottom:pageYOffset-y-h+innerHeight,left:v-pageXOffset,right:pageXOffset-v-l+innerWidth}},E=this.target.ownerDocument,_=E.defaultView,x=void 0;return E.body.scrollWidth>_.innerWidth&&(x=this.cache("scrollbar-size",R),C.viewport.bottom-=x.height),E.body.scrollHeight>_.innerHeight&&(x=this.cache("scrollbar-size",R),C.viewport.right-=x.width),(-1===["","static"].indexOf(E.body.style.position)||-1===["","static"].indexOf(E.body.parentElement.style.position))&&(C.page.bottom=E.body.scrollHeight-y-h,C.page.right=E.body.scrollWidth-v-l),void 0!==this.options.optimizations&&!1!==this.options.optimizations.moveElement&&void 0===this.targetModifier&&function(){var t=r.cache("target-offsetparent",function(){return S(r.target)}),e=r.cache("target-offsetparent-bounds",function(){return T(t)}),i=getComputedStyle(t),o=e,n={};if(["Top","Left","Bottom","Right"].forEach(function(t){n[t.toLowerCase()]=parseFloat(i["border"+t+"Width"])}),e.right=E.body.scrollWidth-e.left-o.width+n.right,e.bottom=E.body.scrollHeight-e.top-o.height+n.bottom,C.page.top>=e.top+n.top&&C.page.bottom>=e.bottom&&C.page.left>=e.left+n.left&&C.page.right>=e.right){var s=t.scrollTop,a=t.scrollLeft;C.offset={top:C.page.top-e.top+s-n.top,left:C.page.left-e.left+a-n.left}}}(),this.move(C),this.history.unshift(C),3<this.history.length&&this.history.pop(),n&&A(),!0}}},{key:"move",value:function(e){var n=this;if(void 0!==this.element.parentNode){var i={};for(var t in e)for(var o in i[t]={},e[t]){for(var s=!1,a=0;a<this.history.length;++a){var r=this.history[a];if(void 0!==r[t]&&!g(r[t][o],e[t][o])){s=!0;break}}s||(i[t][o]=!0)}var l={top:"",left:"",right:"",bottom:""},h=function(t,e){if(!1!==(void 0!==n.options.optimizations?n.options.optimizations.gpu:null)){var i=void 0,o=void 0;i=t.top?(l.top=0,e.top):(l.bottom=0,-e.bottom),o=t.left?(l.left=0,e.left):(l.right=0,-e.right),l[H]="translateX("+Math.round(o)+"px) translateY("+Math.round(i)+"px)","msTransform"!==H&&(l[H]+=" translateZ(0)")}else t.top?l.top=e.top+"px":l.bottom=e.bottom+"px",t.left?l.left=e.left+"px":l.right=e.right+"px"},c=!1;if((i.page.top||i.page.bottom)&&(i.page.left||i.page.right)?(l.position="absolute",h(i.page,e.page)):(i.viewport.top||i.viewport.bottom)&&(i.viewport.left||i.viewport.right)?(l.position="fixed",h(i.viewport,e.viewport)):void 0!==i.offset&&i.offset.top&&i.offset.left?function(){l.position="absolute";var t=n.cache("target-offsetparent",function(){return S(n.target)});S(n.element)!==t&&P(function(){n.element.parentNode.removeChild(n.element),t.appendChild(n.element)}),h(i.offset,e.offset),c=!0}():(l.position="absolute",h({top:!0,left:!0},e.page)),!c){for(var u=!0,d=this.element.parentNode;d&&1===d.nodeType&&"BODY"!==d.tagName;){if("static"!==getComputedStyle(d).position){u=!1;break}d=d.parentNode}u||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var p={},f=!1;for(var o in l){var m=l[o];this.element.style[o]!==m&&(f=!0,p[o]=m)}f&&P(function(){k(n.element.style,p)})}}}]),i}();$.modules=[],L.position=N;var U=k($,L),k=(I=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],o=!0,n=!1,s=void 0;try{for(var a,r=t[Symbol.iterator]();!(o=(a=r.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){n=!0,s=t}finally{try{!o&&r.return&&r.return()}finally{if(n)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},T=(X=L.Utils).getBounds,X.extend),q=(p=X.updateClasses,P=X.defer,["left","top","right","bottom"]);L.modules.push({position:function(t){var m=this,g=t.top,v=t.left,y=t.targetAttachment;if(!this.options.constraints)return!0;var e=this.cache("element-bounds",function(){return T(m.element)}),b=e.height,w=e.width;if(0===w&&0===b&&void 0!==this.lastSize){var i=this.lastSize;w=i.width,b=i.height}var o=this.cache("target-bounds",function(){return m.getTargetBounds()}),C=o.height,E=o.width,n=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,i=t.pinnedClass;e&&n.push(e),i&&n.push(i)}),n.forEach(function(e){["left","top","right","bottom"].forEach(function(t){n.push(e+"-"+t)})});var _=[],x=k({},y),S=k({},this.attachment);return this.options.constraints.forEach(function(t){var e=t.to,i=t.attachment,o=t.pin;void 0===i&&(i="");var n=void 0,s=void 0;if(0<=i.indexOf(" ")){var a=i.split(" "),r=I(a,2);s=r[0],n=r[1]}else n=s=i;var l,h,c=(l=m,"scrollParent"===(h=e)?h=l.scrollParents[0]:"window"===h&&(h=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),h===document&&(h=h.documentElement),void 0!==h.nodeType&&function(){var t=h,e=T(h),i=e,o=getComputedStyle(h);if(h=[i.left,i.top,e.width+i.left,e.height+i.top],t.ownerDocument!==document){var n=t.ownerDocument.defaultView;h[0]+=n.pageXOffset,h[1]+=n.pageYOffset,h[2]+=n.pageXOffset,h[3]+=n.pageYOffset}q.forEach(function(t,e){"Top"===(t=t[0].toUpperCase()+t.substr(1))||"Left"===t?h[e]+=parseFloat(o["border"+t+"Width"]):h[e]-=parseFloat(o["border"+t+"Width"])})}(),h);("target"===s||"both"===s)&&(g<c[1]&&"top"===x.top&&(g+=C,x.top="bottom"),g+b>c[3]&&"bottom"===x.top&&(g-=C,x.top="top")),"together"===s&&("top"===x.top&&("bottom"===S.top&&g<c[1]?(g+=C,x.top="bottom",g+=b,S.top="top"):"top"===S.top&&g+b>c[3]&&g-(b-C)>=c[1]&&(g-=b-C,x.top="bottom",S.top="bottom")),"bottom"===x.top&&("top"===S.top&&g+b>c[3]?(g-=C,x.top="top",g-=b,S.top="bottom"):"bottom"===S.top&&g<c[1]&&g+(2*b-C)<=c[3]&&(g+=b-C,x.top="top",S.top="top")),"middle"===x.top&&(g+b>c[3]&&"top"===S.top?(g-=b,S.top="bottom"):g<c[1]&&"bottom"===S.top&&(g+=b,S.top="top"))),("target"===n||"both"===n)&&(v<c[0]&&"left"===x.left&&(v+=E,x.left="right"),v+w>c[2]&&"right"===x.left&&(v-=E,x.left="left")),"together"===n&&(v<c[0]&&"left"===x.left?"right"===S.left?(v+=E,x.left="right",v+=w,S.left="left"):"left"===S.left&&(v+=E,x.left="right",v-=w,S.left="right"):v+w>c[2]&&"right"===x.left?"left"===S.left?(v-=E,x.left="left",v-=w,S.left="right"):"right"===S.left&&(v-=E,x.left="left",v+=w,S.left="left"):"center"===x.left&&(v+w>c[2]&&"left"===S.left?(v-=w,S.left="right"):v<c[0]&&"right"===S.left&&(v+=w,S.left="left"))),("element"===s||"both"===s)&&(g<c[1]&&"bottom"===S.top&&(g+=b,S.top="top"),g+b>c[3]&&"top"===S.top&&(g-=b,S.top="bottom")),("element"===n||"both"===n)&&(v<c[0]&&("right"===S.left?(v+=w,S.left="left"):"center"===S.left&&(v+=w/2,S.left="left")),v+w>c[2]&&("left"===S.left?(v-=w,S.left="right"):"center"===S.left&&(v-=w/2,S.left="right"))),"string"==typeof o?o=o.split(",").map(function(t){return t.trim()}):!0===o&&(o=["top","left","right","bottom"]),o=o||[];var u,d,p=[],f=[];g<c[1]&&(0<=o.indexOf("top")?(g=c[1],p.push("top")):f.push("top")),g+b>c[3]&&(0<=o.indexOf("bottom")?(g=c[3]-b,p.push("bottom")):f.push("bottom")),v<c[0]&&(0<=o.indexOf("left")?(v=c[0],p.push("left")):f.push("left")),v+w>c[2]&&(0<=o.indexOf("right")?(v=c[2]-w,p.push("right")):f.push("right")),p.length&&(d=void 0!==m.options.pinnedClass?m.options.pinnedClass:m.getClass("pinned"),_.push(d),p.forEach(function(t){_.push(d+"-"+t)})),f.length&&(u=void 0!==m.options.outOfBoundsClass?m.options.outOfBoundsClass:m.getClass("out-of-bounds"),_.push(u),f.forEach(function(t){_.push(u+"-"+t)})),(0<=p.indexOf("left")||0<=p.indexOf("right"))&&(S.left=x.left=!1),(0<=p.indexOf("top")||0<=p.indexOf("bottom"))&&(S.top=x.top=!1),(x.top!==y.top||x.left!==y.left||S.top!==m.attachment.top||S.left!==m.attachment.left)&&(m.updateAttachClasses(S,x),m.trigger("update",{attachment:S,targetAttachment:x}))}),P(function(){!1!==m.options.addTargetClasses&&p(m.target,_,n),p(m.element,_,n)}),{top:g,left:v}}});var X,T=(X=L.Utils).getBounds,p=X.updateClasses;P=X.defer;L.modules.push({position:function(t){var e=this,i=t.top,o=t.left,n=this.cache("element-bounds",function(){return T(e.element)}),s=n.height,a=n.width,r=this.getTargetBounds(),l=i+s,h=o+a,c=[];i<=r.bottom&&l>=r.top&&["left","right"].forEach(function(t){var e=r[t];(e===o||e===h)&&c.push(t)}),o<=r.right&&h>=r.left&&["top","bottom"].forEach(function(t){var e=r[t];(e===i||e===l)&&c.push(t)});var u=[],d=[];return u.push(this.getClass("abutted")),["left","top","right","bottom"].forEach(function(t){u.push(e.getClass("abutted")+"-"+t)}),c.length&&d.push(this.getClass("abutted")),c.forEach(function(t){d.push(e.getClass("abutted")+"-"+t)}),P(function(){!1!==e.options.addTargetClasses&&p(e.target,d,u),p(e.element,d,u)}),!0}});I=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],o=!0,n=!1,s=void 0;try{for(var a,r=t[Symbol.iterator]();!(o=(a=r.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){n=!0,s=t}finally{try{!o&&r.return&&r.return()}finally{if(n)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};return L.modules.push({position:function(t){var e=t.top,i=t.left;if(this.options.shift){var o=this.options.shift;"function"==typeof this.options.shift&&(o=this.options.shift.call(this,{top:e,left:i}));var n=void 0,s=void 0;if("string"==typeof o){(o=o.split(" "))[1]=o[1]||o[0];var a=I(o,2);n=a[0],s=a[1],n=parseFloat(n,10),s=parseFloat(s,10)}else n=o.top,s=o.left;return{top:e+=n,left:i+=s}}}}),U}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");!function(t){var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||4<=e[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),function(){var w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C=function(){function o(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}}();function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n,t,s,e,i,a,r,l,h,o,c,u,d,p,f,m,g,v,y,b,_,x,S,T,R,k,D,M,L,P,A,I,O,F,H,z,N,B,W,j,Y,V,G,$,U,q,X,K,Q,Z,J,tt,et,it,ot,nt,st,at,rt,lt,ht,ct,ut,dt,pt,ft,mt,gt,vt,yt,bt,wt,Ct,Et,_t,xt,St,Tt,Rt,kt,Dt,Mt,Lt,Pt,At,It,Ot,Ft,Ht,zt,Nt,Bt,Wt,jt,Yt,Vt,Gt,$t,Ut,qt,Xt,Kt,Qt,Zt,Jt,te,ee,ie,oe,ne,se,ae,re,le,he,ce,ue,de,pe,fe,me,ge,ve,ye,be,we,Ce,Ee,_e,xe,Se,Te,Re,ke,De,Me,Le,Pe,Ae,Ie,Oe,Fe,He,ze,Ne,Be,We,je,Ye,Ve,Ge,$e,Ue,qe,Xe,Ke,Qe,Ze,Je,ti,ei,ii,oi,ni,si,ai,ri,li,hi,ci,ui,di,pi,fi,mi,gi,vi=function(o){var e=!1,i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};function t(t){var e=this,i=!1;return o(this).one(n.TRANSITION_END,function(){i=!0}),setTimeout(function(){i||n.triggerTransitionEnd(e)},t),this}var n={TRANSITION_END:"bsTransitionEnd",getUID:function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");return e||(e=t.getAttribute("href")||"",e=/^#[a-z]/i.test(e)?e:null),e},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){o(t).trigger(e.end)},supportsTransitionEnd:function(){return Boolean(e)},typeCheckConfig:function(t,e,i){for(var o in i)if(i.hasOwnProperty(o)){var n=i[o],s=e[o],a=s&&((l=s)[0]||l).nodeType?"element":(r=s,{}.toString.call(r).match(/\s([a-zA-Z]+)/)[1].toLowerCase());if(!new RegExp(n).test(a))throw new Error(t.toUpperCase()+': Option "'+o+'" provided type "'+a+'" but expected type "'+n+'".')}var r,l}};return e=function(){if(window.QUnit)return!1;var t=document.createElement("bootstrap");for(var e in i)if(void 0!==t.style[e])return{end:i[e]};return!1}(),o.fn.emulateTransitionEnd=t,n.supportsTransitionEnd()&&(o.event.special[n.TRANSITION_END]={bindType:e.end,delegateType:e.end,handle:function(t){if(o(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}}),n}(jQuery),yi=(n=jQuery,t="alert",e="."+(s="bs.alert"),i=n.fn[t],a={CLOSE:"close"+e,CLOSED:"closed"+e,CLICK_DATA_API:"click"+e+".data-api"},r="alert",l="fade",h="show",o=function(){function o(t){E(this,o),this._element=t}return o.prototype.close=function(t){t=t||this._element;var e=this._getRootElement(t);this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},o.prototype.dispose=function(){n.removeData(this._element,s),this._element=null},o.prototype._getRootElement=function(t){var e=vi.getSelectorFromElement(t),i=!1;return e&&(i=n(e)[0]),i||(i=n(t).closest("."+r)[0]),i},o.prototype._triggerCloseEvent=function(t){var e=n.Event(a.CLOSE);return n(t).trigger(e),e},o.prototype._removeElement=function(e){var i=this;n(e).removeClass(h),vi.supportsTransitionEnd()&&n(e).hasClass(l)?n(e).one(vi.TRANSITION_END,function(t){return i._destroyElement(e,t)}).emulateTransitionEnd(150):this._destroyElement(e)},o.prototype._destroyElement=function(t){n(t).detach().trigger(a.CLOSED).remove()},o._jQueryInterface=function(i){return this.each(function(){var t=n(this),e=t.data(s);e||(e=new o(this),t.data(s,e)),"close"===i&&e[i](this)})},o._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},C(o,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}}]),o}(),n(document).on(a.CLICK_DATA_API,'[data-dismiss="alert"]',o._handleDismiss(new o)),n.fn[t]=o._jQueryInterface,n.fn[t].Constructor=o,n.fn[t].noConflict=function(){return n.fn[t]=i,o._jQueryInterface},c=jQuery,u="button",p="."+(d="bs.button"),f=".data-api",m=c.fn[u],g="active",v="btn",b='[data-toggle^="button"]',_='[data-toggle="buttons"]',x="input",S=".active",T=".btn",R={CLICK_DATA_API:"click"+p+f,FOCUS_BLUR_DATA_API:(y="focus")+p+f+" blur"+p+f},k=function(){function i(t){E(this,i),this._element=t}return i.prototype.toggle=function(){var t=!0,e=c(this._element).closest(_)[0];if(e){var i=c(this._element).find(x)[0];if(i){if("radio"===i.type)if(i.checked&&c(this._element).hasClass(g))t=!1;else{var o=c(e).find(S)[0];o&&c(o).removeClass(g)}t&&(i.checked=!c(this._element).hasClass(g),c(i).trigger("change")),i.focus()}}this._element.setAttribute("aria-pressed",!c(this._element).hasClass(g)),t&&c(this._element).toggleClass(g)},i.prototype.dispose=function(){c.removeData(this._element,d),this._element=null},i._jQueryInterface=function(e){return this.each(function(){var t=c(this).data(d);t||(t=new i(this),c(this).data(d,t)),"toggle"===e&&t[e]()})},C(i,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}}]),i}(),c(document).on(R.CLICK_DATA_API,b,function(t){t.preventDefault();var e=t.target;c(e).hasClass(v)||(e=c(e).closest(T)),k._jQueryInterface.call(c(e),"toggle")}).on(R.FOCUS_BLUR_DATA_API,b,function(t){var e=c(t.target).closest(T)[0];c(e).toggleClass(y,/^focus(in)?$/.test(t.type))}),c.fn[u]=k._jQueryInterface,c.fn[u].Constructor=k,c.fn[u].noConflict=function(){return c.fn[u]=m,k._jQueryInterface},D=jQuery,M="carousel",P="."+(L="bs.carousel"),A=".data-api",I=D.fn[M],O={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},F={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},H={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},z={SLIDE:"slide"+P,SLID:"slid"+P,KEYDOWN:"keydown"+P,MOUSEENTER:"mouseenter"+P,MOUSELEAVE:"mouseleave"+P,LOAD_DATA_API:"load"+P+A,CLICK_DATA_API:"click"+P+A},N="carousel",B="active",W="slide",j="carousel-item-right",Y="carousel-item-left",V="carousel-item-next",G="carousel-item-prev",$=".active",U=".active.carousel-item",q=".carousel-item",X=".carousel-item-next, .carousel-item-prev",K=".carousel-indicators",Q="[data-slide], [data-slide-to]",Z='[data-ride="carousel"]',J=function(){function s(t,e){E(this,s),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this._config=this._getConfig(e),this._element=D(t)[0],this._indicatorsElement=D(this._element).find(K)[0],this._addEventListeners()}return s.prototype.next=function(){if(this._isSliding)throw new Error("Carousel is sliding");this._slide(H.NEXT)},s.prototype.nextWhenVisible=function(){document.hidden||this.next()},s.prototype.prev=function(){if(this._isSliding)throw new Error("Carousel is sliding");this._slide(H.PREVIOUS)},s.prototype.pause=function(t){t||(this._isPaused=!0),D(this._element).find(X)[0]&&vi.supportsTransitionEnd()&&(vi.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},s.prototype.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},s.prototype.to=function(t){var e=this;this._activeElement=D(this._element).find(U)[0];var i=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)D(this._element).one(z.SLID,function(){return e.to(t)});else{if(i===t)return this.pause(),void this.cycle();var o=i<t?H.NEXT:H.PREVIOUS;this._slide(o,this._items[t])}},s.prototype.dispose=function(){D(this._element).off(P),D.removeData(this._element,L),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},s.prototype._getConfig=function(t){return t=D.extend({},O,t),vi.typeCheckConfig(M,t,F),t},s.prototype._addEventListeners=function(){var e=this;this._config.keyboard&&D(this._element).on(z.KEYDOWN,function(t){return e._keydown(t)}),"hover"!==this._config.pause||"ontouchstart"in document.documentElement||D(this._element).on(z.MOUSEENTER,function(t){return e.pause(t)}).on(z.MOUSELEAVE,function(t){return e.cycle(t)})},s.prototype._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next();break;default:return}},s.prototype._getItemIndex=function(t){return this._items=D.makeArray(D(t).parent().find(q)),this._items.indexOf(t)},s.prototype._getItemByDirection=function(t,e){var i=t===H.NEXT,o=t===H.PREVIOUS,n=this._getItemIndex(e),s=this._items.length-1;if((o&&0===n||i&&n===s)&&!this._config.wrap)return e;var a=(n+(t===H.PREVIOUS?-1:1))%this._items.length;return-1===a?this._items[this._items.length-1]:this._items[a]},s.prototype._triggerSlideEvent=function(t,e){var i=D.Event(z.SLIDE,{relatedTarget:t,direction:e});return D(this._element).trigger(i),i},s.prototype._setActiveIndicatorElement=function(t){if(this._indicatorsElement){D(this._indicatorsElement).find($).removeClass(B);var e=this._indicatorsElement.children[this._getItemIndex(t)];e&&D(e).addClass(B)}},s.prototype._slide=function(t,e){var i=this,o=D(this._element).find(U)[0],n=e||o&&this._getItemByDirection(t,o),s=Boolean(this._interval),a=void 0,r=void 0,l=void 0;if(l=t===H.NEXT?(a=Y,r=V,H.LEFT):(a=j,r=G,H.RIGHT),n&&D(n).hasClass(B))this._isSliding=!1;else if(!this._triggerSlideEvent(n,l).isDefaultPrevented()&&o&&n){this._isSliding=!0,s&&this.pause(),this._setActiveIndicatorElement(n);var h=D.Event(z.SLID,{relatedTarget:n,direction:l});vi.supportsTransitionEnd()&&D(this._element).hasClass(W)?(D(n).addClass(r),vi.reflow(n),D(o).addClass(a),D(n).addClass(a),D(o).one(vi.TRANSITION_END,function(){D(n).removeClass(a+" "+r).addClass(B),D(o).removeClass(B+" "+r+" "+a),i._isSliding=!1,setTimeout(function(){return D(i._element).trigger(h)},0)}).emulateTransitionEnd(600)):(D(o).removeClass(B),D(n).addClass(B),this._isSliding=!1,D(this._element).trigger(h)),s&&this.cycle()}},s._jQueryInterface=function(o){return this.each(function(){var t=D(this).data(L),e=D.extend({},O,D(this).data());"object"===(void 0===o?"undefined":w(o))&&D.extend(e,o);var i="string"==typeof o?o:e.slide;if(t||(t=new s(this,e),D(this).data(L,t)),"number"==typeof o)t.to(o);else if("string"==typeof i){if(void 0===t[i])throw new Error('No method named "'+i+'"');t[i]()}else e.interval&&(t.pause(),t.cycle())})},s._dataApiClickHandler=function(t){var e=vi.getSelectorFromElement(this);if(e){var i=D(e)[0];if(i&&D(i).hasClass(N)){var o=D.extend({},D(i).data(),D(this).data()),n=this.getAttribute("data-slide-to");n&&(o.interval=!1),s._jQueryInterface.call(D(i),o),n&&D(i).data(L).to(n),t.preventDefault()}}},C(s,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return O}}]),s}(),D(document).on(z.CLICK_DATA_API,Q,J._dataApiClickHandler),D(window).on(z.LOAD_DATA_API,function(){D(Z).each(function(){var t=D(this);J._jQueryInterface.call(t,t.data())})}),D.fn[M]=J._jQueryInterface,D.fn[M].Constructor=J,D.fn[M].noConflict=function(){return D.fn[M]=I,J._jQueryInterface},tt=jQuery,et="collapse",ot="."+(it="bs.collapse"),nt=tt.fn[et],st={toggle:!0,parent:""},at={toggle:"boolean",parent:"string"},rt={SHOW:"show"+ot,SHOWN:"shown"+ot,HIDE:"hide"+ot,HIDDEN:"hidden"+ot,CLICK_DATA_API:"click"+ot+".data-api"},lt="show",ht="collapse",ct="collapsing",ut="collapsed",dt="width",pt="height",ft=".card > .show, .card > .collapsing",mt='[data-toggle="collapse"]',gt=function(){function r(t,e){E(this,r),this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=tt.makeArray(tt('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]')),this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}return r.prototype.toggle=function(){tt(this._element).hasClass(lt)?this.hide():this.show()},r.prototype.show=function(){var t=this;if(this._isTransitioning)throw new Error("Collapse is transitioning");if(!tt(this._element).hasClass(lt)){var e=void 0,i=void 0;if(this._parent&&((e=tt.makeArray(tt(this._parent).find(ft))).length||(e=null)),!(e&&(i=tt(e).data(it))&&i._isTransitioning)){var o=tt.Event(rt.SHOW);if(tt(this._element).trigger(o),!o.isDefaultPrevented()){e&&(r._jQueryInterface.call(tt(e),"hide"),i||tt(e).data(it,null));var n=this._getDimension();tt(this._element).removeClass(ht).addClass(ct),this._element.style[n]=0,this._element.setAttribute("aria-expanded",!0),this._triggerArray.length&&tt(this._triggerArray).removeClass(ut).attr("aria-expanded",!0),this.setTransitioning(!0);var s=function(){tt(t._element).removeClass(ct).addClass(ht).addClass(lt),t._element.style[n]="",t.setTransitioning(!1),tt(t._element).trigger(rt.SHOWN)};if(vi.supportsTransitionEnd()){var a="scroll"+(n[0].toUpperCase()+n.slice(1));tt(this._element).one(vi.TRANSITION_END,s).emulateTransitionEnd(600),this._element.style[n]=this._element[a]+"px"}else s()}}}},r.prototype.hide=function(){var t=this;if(this._isTransitioning)throw new Error("Collapse is transitioning");if(tt(this._element).hasClass(lt)){var e=tt.Event(rt.HIDE);if(tt(this._element).trigger(e),!e.isDefaultPrevented()){var i=this._getDimension(),o=i===dt?"offsetWidth":"offsetHeight";this._element.style[i]=this._element[o]+"px",vi.reflow(this._element),tt(this._element).addClass(ct).removeClass(ht).removeClass(lt),this._element.setAttribute("aria-expanded",!1),this._triggerArray.length&&tt(this._triggerArray).addClass(ut).attr("aria-expanded",!1),this.setTransitioning(!0);var n=function(){t.setTransitioning(!1),tt(t._element).removeClass(ct).addClass(ht).trigger(rt.HIDDEN)};this._element.style[i]="",vi.supportsTransitionEnd()?tt(this._element).one(vi.TRANSITION_END,n).emulateTransitionEnd(600):n()}}},r.prototype.setTransitioning=function(t){this._isTransitioning=t},r.prototype.dispose=function(){tt.removeData(this._element,it),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},r.prototype._getConfig=function(t){return(t=tt.extend({},st,t)).toggle=Boolean(t.toggle),vi.typeCheckConfig(et,t,at),t},r.prototype._getDimension=function(){return tt(this._element).hasClass(dt)?dt:pt},r.prototype._getParent=function(){var i=this,t=tt(this._config.parent)[0],e='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return tt(t).find(e).each(function(t,e){i._addAriaAndCollapsedClass(r._getTargetFromElement(e),[e])}),t},r.prototype._addAriaAndCollapsedClass=function(t,e){if(t){var i=tt(t).hasClass(lt);t.setAttribute("aria-expanded",i),e.length&&tt(e).toggleClass(ut,!i).attr("aria-expanded",i)}},r._getTargetFromElement=function(t){var e=vi.getSelectorFromElement(t);return e?tt(e)[0]:null},r._jQueryInterface=function(o){return this.each(function(){var t=tt(this),e=t.data(it),i=tt.extend({},st,t.data(),"object"===(void 0===o?"undefined":w(o))&&o);if(!e&&i.toggle&&/show|hide/.test(o)&&(i.toggle=!1),e||(e=new r(this,i),t.data(it,e)),"string"==typeof o){if(void 0===e[o])throw new Error('No method named "'+o+'"');e[o]()}})},C(r,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return st}}]),r}(),tt(document).on(rt.CLICK_DATA_API,mt,function(t){t.preventDefault();var e=gt._getTargetFromElement(this),i=tt(e).data(it)?"toggle":tt(this).data();gt._jQueryInterface.call(tt(e),i)}),tt.fn[et]=gt._jQueryInterface,tt.fn[et].Constructor=gt,tt.fn[et].noConflict=function(){return tt.fn[et]=nt,gt._jQueryInterface},vt=jQuery,yt="dropdown",wt="."+(bt="bs.dropdown"),Ct=".data-api",Et=vt.fn[yt],_t={HIDE:"hide"+wt,HIDDEN:"hidden"+wt,SHOW:"show"+wt,SHOWN:"shown"+wt,CLICK:"click"+wt,CLICK_DATA_API:"click"+wt+Ct,FOCUSIN_DATA_API:"focusin"+wt+Ct,KEYDOWN_DATA_API:"keydown"+wt+Ct},xt="dropdown-backdrop",St="disabled",Tt="show",Rt=".dropdown-backdrop",kt='[data-toggle="dropdown"]',Dt=".dropdown form",Mt='[role="menu"]',Lt='[role="listbox"]',Pt=".navbar-nav",At='[role="menu"] li:not(.disabled) a, [role="listbox"] li:not(.disabled) a',It=function(){function r(t){E(this,r),this._element=t,this._addEventListeners()}return r.prototype.toggle=function(){if(this.disabled||vt(this).hasClass(St))return!1;var t=r._getParentFromElement(this),e=vt(t).hasClass(Tt);if(r._clearMenus(),e)return!1;if("ontouchstart"in document.documentElement&&!vt(t).closest(Pt).length){var i=document.createElement("div");i.className=xt,vt(i).insertBefore(this),vt(i).on("click",r._clearMenus)}var o={relatedTarget:this},n=vt.Event(_t.SHOW,o);return vt(t).trigger(n),n.isDefaultPrevented()||(this.focus(),this.setAttribute("aria-expanded",!0),vt(t).toggleClass(Tt),vt(t).trigger(vt.Event(_t.SHOWN,o))),!1},r.prototype.dispose=function(){vt.removeData(this._element,bt),vt(this._element).off(wt),this._element=null},r.prototype._addEventListeners=function(){vt(this._element).on(_t.CLICK,this.toggle)},r._jQueryInterface=function(e){return this.each(function(){var t=vt(this).data(bt);if(t||(t=new r(this),vt(this).data(bt,t)),"string"==typeof e){if(void 0===t[e])throw new Error('No method named "'+e+'"');t[e].call(this)}})},r._clearMenus=function(t){if(!t||3!==t.which){var e=vt(Rt)[0];e&&e.parentNode.removeChild(e);for(var i=vt.makeArray(vt(kt)),o=0;o<i.length;o++){var n=r._getParentFromElement(i[o]),s={relatedTarget:i[o]};if(vt(n).hasClass(Tt)&&!(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"focusin"===t.type)&&vt.contains(n,t.target))){var a=vt.Event(_t.HIDE,s);vt(n).trigger(a),a.isDefaultPrevented()||(i[o].setAttribute("aria-expanded","false"),vt(n).removeClass(Tt).trigger(vt.Event(_t.HIDDEN,s)))}}}},r._getParentFromElement=function(t){var e=void 0,i=vi.getSelectorFromElement(t);return i&&(e=vt(i)[0]),e||t.parentNode},r._dataApiKeydownHandler=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)&&(t.preventDefault(),t.stopPropagation(),!this.disabled&&!vt(this).hasClass(St))){var e=r._getParentFromElement(this),i=vt(e).hasClass(Tt);if(!i&&27!==t.which||i&&27===t.which){if(27===t.which){var o=vt(e).find(kt)[0];vt(o).trigger("focus")}vt(this).trigger("click")}else{var n=vt(e).find(At).get();if(n.length){var s=n.indexOf(t.target);38===t.which&&0<s&&s--,40===t.which&&s<n.length-1&&s++,s<0&&(s=0),n[s].focus()}}}},C(r,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}}]),r}(),vt(document).on(_t.KEYDOWN_DATA_API,kt,It._dataApiKeydownHandler).on(_t.KEYDOWN_DATA_API,Mt,It._dataApiKeydownHandler).on(_t.KEYDOWN_DATA_API,Lt,It._dataApiKeydownHandler).on(_t.CLICK_DATA_API+" "+_t.FOCUSIN_DATA_API,It._clearMenus).on(_t.CLICK_DATA_API,kt,It.prototype.toggle).on(_t.CLICK_DATA_API,Dt,function(t){t.stopPropagation()}),vt.fn[yt]=It._jQueryInterface,vt.fn[yt].Constructor=It,vt.fn[yt].noConflict=function(){return vt.fn[yt]=Et,It._jQueryInterface},Ot=jQuery,Ft="modal",zt="."+(Ht="bs.modal"),Nt=Ot.fn[Ft],Bt={backdrop:!0,keyboard:!0,focus:!0,show:!0},Wt={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},jt={HIDE:"hide"+zt,HIDDEN:"hidden"+zt,SHOW:"show"+zt,SHOWN:"shown"+zt,FOCUSIN:"focusin"+zt,RESIZE:"resize"+zt,CLICK_DISMISS:"click.dismiss"+zt,KEYDOWN_DISMISS:"keydown.dismiss"+zt,MOUSEUP_DISMISS:"mouseup.dismiss"+zt,MOUSEDOWN_DISMISS:"mousedown.dismiss"+zt,CLICK_DATA_API:"click"+zt+".data-api"},Yt="modal-scrollbar-measure",Vt="modal-backdrop",Gt="modal-open",$t="fade",Ut="show",qt=".modal-dialog",Xt='[data-toggle="modal"]',Kt='[data-dismiss="modal"]',Qt=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Zt=function(){function n(t,e){E(this,n),this._config=this._getConfig(e),this._element=t,this._dialog=Ot(t).find(qt)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}return n.prototype.toggle=function(t){return this._isShown?this.hide():this.show(t)},n.prototype.show=function(t){var e=this;if(this._isTransitioning)throw new Error("Modal is transitioning");vi.supportsTransitionEnd()&&Ot(this._element).hasClass($t)&&(this._isTransitioning=!0);var i=Ot.Event(jt.SHOW,{relatedTarget:t});Ot(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),Ot(document.body).addClass(Gt),this._setEscapeEvent(),this._setResizeEvent(),Ot(this._element).on(jt.CLICK_DISMISS,Kt,function(t){return e.hide(t)}),Ot(this._dialog).on(jt.MOUSEDOWN_DISMISS,function(){Ot(e._element).one(jt.MOUSEUP_DISMISS,function(t){Ot(t.target).is(e._element)&&(e._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return e._showElement(t)}))},n.prototype.hide=function(t){var e=this;if(t&&t.preventDefault(),this._isTransitioning)throw new Error("Modal is transitioning");var i=vi.supportsTransitionEnd()&&Ot(this._element).hasClass($t);i&&(this._isTransitioning=!0);var o=Ot.Event(jt.HIDE);Ot(this._element).trigger(o),this._isShown&&!o.isDefaultPrevented()&&(this._isShown=!1,this._setEscapeEvent(),this._setResizeEvent(),Ot(document).off(jt.FOCUSIN),Ot(this._element).removeClass(Ut),Ot(this._element).off(jt.CLICK_DISMISS),Ot(this._dialog).off(jt.MOUSEDOWN_DISMISS),i?Ot(this._element).one(vi.TRANSITION_END,function(t){return e._hideModal(t)}).emulateTransitionEnd(300):this._hideModal())},n.prototype.dispose=function(){Ot.removeData(this._element,Ht),Ot(window,document,this._element,this._backdrop).off(zt),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._originalBodyPadding=null,this._scrollbarWidth=null},n.prototype._getConfig=function(t){return t=Ot.extend({},Bt,t),vi.typeCheckConfig(Ft,t,Wt),t},n.prototype._showElement=function(t){var e=this,i=vi.supportsTransitionEnd()&&Ot(this._element).hasClass($t);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,i&&vi.reflow(this._element),Ot(this._element).addClass(Ut),this._config.focus&&this._enforceFocus();var o=Ot.Event(jt.SHOWN,{relatedTarget:t}),n=function(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,Ot(e._element).trigger(o)};i?Ot(this._dialog).one(vi.TRANSITION_END,n).emulateTransitionEnd(300):n()},n.prototype._enforceFocus=function(){var e=this;Ot(document).off(jt.FOCUSIN).on(jt.FOCUSIN,function(t){document===t.target||e._element===t.target||Ot(e._element).has(t.target).length||e._element.focus()})},n.prototype._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?Ot(this._element).on(jt.KEYDOWN_DISMISS,function(t){27===t.which&&e.hide()}):this._isShown||Ot(this._element).off(jt.KEYDOWN_DISMISS)},n.prototype._setResizeEvent=function(){var e=this;this._isShown?Ot(window).on(jt.RESIZE,function(t){return e._handleUpdate(t)}):Ot(window).off(jt.RESIZE)},n.prototype._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden","true"),this._isTransitioning=!1,this._showBackdrop(function(){Ot(document.body).removeClass(Gt),t._resetAdjustments(),t._resetScrollbar(),Ot(t._element).trigger(jt.HIDDEN)})},n.prototype._removeBackdrop=function(){this._backdrop&&(Ot(this._backdrop).remove(),this._backdrop=null)},n.prototype._showBackdrop=function(t){var e=this,i=Ot(this._element).hasClass($t)?$t:"";if(this._isShown&&this._config.backdrop){var o=vi.supportsTransitionEnd()&&i;if(this._backdrop=document.createElement("div"),this._backdrop.className=Vt,i&&Ot(this._backdrop).addClass(i),Ot(this._backdrop).appendTo(document.body),Ot(this._element).on(jt.CLICK_DISMISS,function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===e._config.backdrop?e._element.focus():e.hide())}),o&&vi.reflow(this._backdrop),Ot(this._backdrop).addClass(Ut),!t)return;if(!o)return void t();Ot(this._backdrop).one(vi.TRANSITION_END,t).emulateTransitionEnd(150)}else if(!this._isShown&&this._backdrop){Ot(this._backdrop).removeClass(Ut);var n=function(){e._removeBackdrop(),t&&t()};vi.supportsTransitionEnd()&&Ot(this._element).hasClass($t)?Ot(this._backdrop).one(vi.TRANSITION_END,n).emulateTransitionEnd(150):n()}else t&&t()},n.prototype._handleUpdate=function(){this._adjustDialog()},n.prototype._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},n.prototype._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},n.prototype._checkScrollbar=function(){this._isBodyOverflowing=document.body.clientWidth<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},n.prototype._setScrollbar=function(){var t=parseInt(Ot(Qt).css("padding-right")||0,10);this._originalBodyPadding=document.body.style.paddingRight||"",this._isBodyOverflowing&&(document.body.style.paddingRight=t+this._scrollbarWidth+"px")},n.prototype._resetScrollbar=function(){document.body.style.paddingRight=this._originalBodyPadding},n.prototype._getScrollbarWidth=function(){var t=document.createElement("div");t.className=Yt,document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},n._jQueryInterface=function(i,o){return this.each(function(){var t=Ot(this).data(Ht),e=Ot.extend({},n.Default,Ot(this).data(),"object"===(void 0===i?"undefined":w(i))&&i);if(t||(t=new n(this,e),Ot(this).data(Ht,t)),"string"==typeof i){if(void 0===t[i])throw new Error('No method named "'+i+'"');t[i](o)}else e.show&&t.show(o)})},C(n,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return Bt}}]),n}(),Ot(document).on(jt.CLICK_DATA_API,Xt,function(t){var e=this,i=void 0,o=vi.getSelectorFromElement(this);o&&(i=Ot(o)[0]);var n=Ot(i).data(Ht)?"toggle":Ot.extend({},Ot(i).data(),Ot(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var s=Ot(i).one(jt.SHOW,function(t){t.isDefaultPrevented()||s.one(jt.HIDDEN,function(){Ot(e).is(":visible")&&e.focus()})});Zt._jQueryInterface.call(Ot(i),n,this)}),Ot.fn[Ft]=Zt._jQueryInterface,Ot.fn[Ft].Constructor=Zt,Ot.fn[Ft].noConflict=function(){return Ot.fn[Ft]=Nt,Zt._jQueryInterface},function(c){if("undefined"==typeof Tether)throw new Error("Bootstrap tooltips require Tether (http://tether.io/)");var e="tooltip",o="bs.tooltip",t="."+o,i=c.fn[e],n={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:"0 0",constraints:[],container:!1},s={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"string",constraints:"array",container:"(string|element|boolean)"},a={TOP:"bottom center",RIGHT:"middle left",BOTTOM:"top center",LEFT:"middle right"},r="show",u="out",l={HIDE:"hide"+t,HIDDEN:"hidden"+t,SHOW:"show"+t,SHOWN:"shown"+t,INSERTED:"inserted"+t,CLICK:"click"+t,FOCUSIN:"focusin"+t,FOCUSOUT:"focusout"+t,MOUSEENTER:"mouseenter"+t,MOUSELEAVE:"mouseleave"+t},d="fade",p="show",f=".tooltip-inner",m={element:!1,enabled:!1},g="hover",v="focus",y="click",b="manual",h=function(){function h(t,e){E(this,h),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._isTransitioning=!1,this._tether=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}return h.prototype.enable=function(){this._isEnabled=!0},h.prototype.disable=function(){this._isEnabled=!1},h.prototype.toggleEnabled=function(){this._isEnabled=!this._isEnabled},h.prototype.toggle=function(t){if(t){var e=this.constructor.DATA_KEY,i=c(t.currentTarget).data(e);i||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),c(t.currentTarget).data(e,i)),i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)}else{if(c(this.getTipElement()).hasClass(p))return void this._leave(null,this);this._enter(null,this)}},h.prototype.dispose=function(){clearTimeout(this._timeout),this.cleanupTether(),c.removeData(this.element,this.constructor.DATA_KEY),c(this.element).off(this.constructor.EVENT_KEY),c(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&c(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._tether=null,this.element=null,this.config=null,this.tip=null},h.prototype.show=function(){var e=this;if("none"===c(this.element).css("display"))throw new Error("Please use show on visible elements");var t=c.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){if(this._isTransitioning)throw new Error("Tooltip is transitioning");c(this.element).trigger(t);var i=c.contains(this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!i)return;var o=this.getTipElement(),n=vi.getUID(this.constructor.NAME);o.setAttribute("id",n),this.element.setAttribute("aria-describedby",n),this.setContent(),this.config.animation&&c(o).addClass(d);var s="function"==typeof this.config.placement?this.config.placement.call(this,o,this.element):this.config.placement,a=this._getAttachment(s),r=!1===this.config.container?document.body:c(this.config.container);c(o).data(this.constructor.DATA_KEY,this).appendTo(r),c(this.element).trigger(this.constructor.Event.INSERTED),this._tether=new Tether({attachment:a,element:o,target:this.element,classes:m,classPrefix:"bs-tether",offset:this.config.offset,constraints:this.config.constraints,addTargetClasses:!1}),vi.reflow(o),this._tether.position(),c(o).addClass(p);var l=function(){var t=e._hoverState;e._hoverState=null,e._isTransitioning=!1,c(e.element).trigger(e.constructor.Event.SHOWN),t===u&&e._leave(null,e)};if(vi.supportsTransitionEnd()&&c(this.tip).hasClass(d))return this._isTransitioning=!0,void c(this.tip).one(vi.TRANSITION_END,l).emulateTransitionEnd(h._TRANSITION_DURATION);l()}},h.prototype.hide=function(t){var e=this,i=this.getTipElement(),o=c.Event(this.constructor.Event.HIDE);if(this._isTransitioning)throw new Error("Tooltip is transitioning");var n=function(){e._hoverState!==r&&i.parentNode&&i.parentNode.removeChild(i),e.element.removeAttribute("aria-describedby"),c(e.element).trigger(e.constructor.Event.HIDDEN),e._isTransitioning=!1,e.cleanupTether(),t&&t()};c(this.element).trigger(o),o.isDefaultPrevented()||(c(i).removeClass(p),this._activeTrigger[y]=!1,this._activeTrigger[v]=!1,this._activeTrigger[g]=!1,vi.supportsTransitionEnd()&&c(this.tip).hasClass(d)?(this._isTransitioning=!0,c(i).one(vi.TRANSITION_END,n).emulateTransitionEnd(150)):n(),this._hoverState="")},h.prototype.isWithContent=function(){return Boolean(this.getTitle())},h.prototype.getTipElement=function(){return this.tip=this.tip||c(this.config.template)[0]},h.prototype.setContent=function(){var t=c(this.getTipElement());this.setElementContent(t.find(f),this.getTitle()),t.removeClass(d+" "+p),this.cleanupTether()},h.prototype.setElementContent=function(t,e){var i=this.config.html;"object"===(void 0===e?"undefined":w(e))&&(e.nodeType||e.jquery)?i?c(e).parent().is(t)||t.empty().append(e):t.text(c(e).text()):t[i?"html":"text"](e)},h.prototype.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},h.prototype.cleanupTether=function(){this._tether&&this._tether.destroy()},h.prototype._getAttachment=function(t){return a[t.toUpperCase()]},h.prototype._setListeners=function(){var o=this;this.config.trigger.split(" ").forEach(function(t){if("click"===t)c(o.element).on(o.constructor.Event.CLICK,o.config.selector,function(t){return o.toggle(t)});else if(t!==b){var e=t===g?o.constructor.Event.MOUSEENTER:o.constructor.Event.FOCUSIN,i=t===g?o.constructor.Event.MOUSELEAVE:o.constructor.Event.FOCUSOUT;c(o.element).on(e,o.config.selector,function(t){return o._enter(t)}).on(i,o.config.selector,function(t){return o._leave(t)})}c(o.element).closest(".modal").on("hide.bs.modal",function(){return o.hide()})}),this.config.selector?this.config=c.extend({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},h.prototype._fixTitle=function(){var t=w(this.element.getAttribute("data-original-title"));(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},h.prototype._enter=function(t,e){var i=this.constructor.DATA_KEY;(e=e||c(t.currentTarget).data(i))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),c(t.currentTarget).data(i,e)),t&&(e._activeTrigger["focusin"===t.type?v:g]=!0),c(e.getTipElement()).hasClass(p)||e._hoverState===r?e._hoverState=r:(clearTimeout(e._timeout),e._hoverState=r,e.config.delay&&e.config.delay.show?e._timeout=setTimeout(function(){e._hoverState===r&&e.show()},e.config.delay.show):e.show())},h.prototype._leave=function(t,e){var i=this.constructor.DATA_KEY;(e=e||c(t.currentTarget).data(i))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),c(t.currentTarget).data(i,e)),t&&(e._activeTrigger["focusout"===t.type?v:g]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=u,e.config.delay&&e.config.delay.hide?e._timeout=setTimeout(function(){e._hoverState===u&&e.hide()},e.config.delay.hide):e.hide())},h.prototype._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},h.prototype._getConfig=function(t){return(t=c.extend({},this.constructor.Default,c(this.element).data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),vi.typeCheckConfig(e,t,this.constructor.DefaultType),t},h.prototype._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},h._jQueryInterface=function(i){return this.each(function(){var t=c(this).data(o),e="object"===(void 0===i?"undefined":w(i))&&i;if((t||!/dispose|hide/.test(i))&&(t||(t=new h(this,e),c(this).data(o,t)),"string"==typeof i)){if(void 0===t[i])throw new Error('No method named "'+i+'"');t[i]()}})},C(h,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return n}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return o}},{key:"Event",get:function(){return l}},{key:"EVENT_KEY",get:function(){return t}},{key:"DefaultType",get:function(){return s}}]),h}();return c.fn[e]=h._jQueryInterface,c.fn[e].Constructor=h,c.fn[e].noConflict=function(){return c.fn[e]=i,h._jQueryInterface},h}(jQuery));Jt=jQuery,te="popover",ie="."+(ee="bs.popover"),oe=Jt.fn[te],ne=Jt.extend({},yi.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),se=Jt.extend({},yi.DefaultType,{content:"(string|element|function)"}),ae="fade",le=".popover-title",he=".popover-content",ce={HIDE:"hide"+ie,HIDDEN:"hidden"+ie,SHOW:(re="show")+ie,SHOWN:"shown"+ie,INSERTED:"inserted"+ie,CLICK:"click"+ie,FOCUSIN:"focusin"+ie,FOCUSOUT:"focusout"+ie,MOUSEENTER:"mouseenter"+ie,MOUSELEAVE:"mouseleave"+ie},ue=function(t){function o(){return E(this,o),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,t),o.prototype.isWithContent=function(){return this.getTitle()||this._getContent()},o.prototype.getTipElement=function(){return this.tip=this.tip||Jt(this.config.template)[0]},o.prototype.setContent=function(){var t=Jt(this.getTipElement());this.setElementContent(t.find(le),this.getTitle()),this.setElementContent(t.find(he),this._getContent()),t.removeClass(ae+" "+re),this.cleanupTether()},o.prototype._getContent=function(){return this.element.getAttribute("data-content")||("function"==typeof this.config.content?this.config.content.call(this.element):this.config.content)},o._jQueryInterface=function(i){return this.each(function(){var t=Jt(this).data(ee),e="object"===(void 0===i?"undefined":w(i))?i:null;if((t||!/destroy|hide/.test(i))&&(t||(t=new o(this,e),Jt(this).data(ee,t)),"string"==typeof i)){if(void 0===t[i])throw new Error('No method named "'+i+'"');t[i]()}})},C(o,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return ne}},{key:"NAME",get:function(){return te}},{key:"DATA_KEY",get:function(){return ee}},{key:"Event",get:function(){return ce}},{key:"EVENT_KEY",get:function(){return ie}},{key:"DefaultType",get:function(){return se}}]),o}(yi),Jt.fn[te]=ue._jQueryInterface,Jt.fn[te].Constructor=ue,Jt.fn[te].noConflict=function(){return Jt.fn[te]=oe,ue._jQueryInterface},de=jQuery,pe="scrollspy",me="."+(fe="bs.scrollspy"),ge=de.fn[pe],ve={offset:10,method:"auto",target:"",children:""},ye={offset:"number",method:"string",target:"(string|element)",children:"string"},be={ACTIVATE:"activate"+me,SCROLL:"scroll"+me,LOAD_DATA_API:"load"+me+".data-api"},we="dropdown-item",Ce="active",Ee='[data-spy="scroll"]',_e=".active",xe="li",Se=".nav-link",Te=".dropdown",Re=".dropdown-item",ke=".dropdown-toggle",De="offset",Me="position",Le=function(){function o(t,e){var i=this;E(this,o),this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector=this._config.children?this._config.target+" "+this._config.children:this._config.target+" "+Se+","+this._config.target+" "+Re,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,de(this._scrollElement).on(be.SCROLL,function(t){return i._process(t)}),this.refresh(),this._process()}return o.prototype.refresh=function(){var e=this,t=this._scrollElement!==this._scrollElement.window?Me:De,o="auto"===this._config.method?t:this._config.method,n=o===Me?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),de.makeArray(de(this._selector)).map(function(t){var e=void 0,i=vi.getSelectorFromElement(t);return i&&(e=de(i)[0]),e&&(e.offsetWidth||e.offsetHeight)?[de(e)[o]().top+n,i]:null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},o.prototype.dispose=function(){de.removeData(this._element,fe),de(this._scrollElement).off(me),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},o.prototype._getConfig=function(t){if("string"!=typeof(t=de.extend({},ve,t)).target){var e=de(t.target).attr("id");e||(e=vi.getUID(pe),de(t.target).attr("id",e)),t.target="#"+e}return vi.typeCheckConfig(pe,t,ye),t},o.prototype._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},o.prototype._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},o.prototype._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.offsetHeight},o.prototype._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),i=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),i<=t){var o=this._targets[this._targets.length-1];this._activeTarget!==o&&this._activate(o)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var n=this._offsets.length;n--;){this._activeTarget!==this._targets[n]&&t>=this._offsets[n]&&(void 0===this._offsets[n+1]||t<this._offsets[n+1])&&this._activate(this._targets[n])}}},o.prototype._activate=function(e){this._activeTarget=e,this._clear();var t=this._selector.split(",");t=t.map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'});var i=de(t.join(","));i.hasClass(we)?(i.closest(Te).find(ke).addClass(Ce),i.addClass(Ce)):i.parents(xe).each(function(){de(this).find("> .nav-link").addClass(Ce)});de(this._scrollElement).trigger(be.ACTIVATE,{relatedTarget:e})},o.prototype._clear=function(){de(this._selector).filter(_e).removeClass(Ce)},o._jQueryInterface=function(i){return this.each(function(){var t=de(this).data(fe),e="object"===(void 0===i?"undefined":w(i))&&i;if(t||(t=new o(this,e),de(this).data(fe,t)),"string"==typeof i){if(void 0===t[i])throw new Error('No method named "'+i+'"');t[i]()}})},C(o,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return ve}}]),o}(),de(window).on(be.LOAD_DATA_API,function(){for(var t=de.makeArray(de(Ee)),e=t.length;e--;){var i=de(t[e]);Le._jQueryInterface.call(i,i.data())}}),de.fn[pe]=Le._jQueryInterface,de.fn[pe].Constructor=Le,de.fn[pe].noConflict=function(){return de.fn[pe]=ge,Le._jQueryInterface},Pe=jQuery,Ie="."+(Ae="bs.tab"),Oe=Pe.fn.tab,Fe={HIDE:"hide"+Ie,HIDDEN:"hidden"+Ie,SHOW:"show"+Ie,SHOWN:"shown"+Ie,CLICK_DATA_API:"click"+Ie+".data-api"},He="dropdown-menu",ze="active",Ne="disabled",Be="fade",We="show",je=".dropdown",Ye="ul:not(.dropdown-menu), ol:not(.dropdown-menu), nav:not(.dropdown-menu)",Ve="> .nav-item .fade, > .fade",Ge=".active",$e="> .nav-item > .active, > .active",Ue='[data-toggle="tab"], [data-toggle="pill"]',qe=".dropdown-toggle",Xe="> .dropdown-menu .active",Ke=function(){function o(t){E(this,o),this._element=t}return o.prototype.show=function(){var i=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&Pe(this._element).hasClass(ze)||Pe(this._element).hasClass(Ne))){var t=void 0,o=void 0,e=Pe(this._element).closest(Ye)[0],n=vi.getSelectorFromElement(this._element);e&&(o=(o=Pe.makeArray(Pe(e).find(Ge)))[o.length-1]);var s=Pe.Event(Fe.HIDE,{relatedTarget:this._element}),a=Pe.Event(Fe.SHOW,{relatedTarget:o});if(o&&Pe(o).trigger(s),Pe(this._element).trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){n&&(t=Pe(n)[0]),this._activate(this._element,e);var r=function(){var t=Pe.Event(Fe.HIDDEN,{relatedTarget:i._element}),e=Pe.Event(Fe.SHOWN,{relatedTarget:o});Pe(o).trigger(t),Pe(i._element).trigger(e)};t?this._activate(t,t.parentNode,r):r()}}},o.prototype.dispose=function(){Pe.removeClass(this._element,Ae),this._element=null},o.prototype._activate=function(t,e,i){var o=this,n=Pe(e).find($e)[0],s=i&&vi.supportsTransitionEnd()&&(n&&Pe(n).hasClass(Be)||Boolean(Pe(e).find(Ve)[0])),a=function(){return o._transitionComplete(t,n,s,i)};n&&s?Pe(n).one(vi.TRANSITION_END,a).emulateTransitionEnd(150):a(),n&&Pe(n).removeClass(We)},o.prototype._transitionComplete=function(t,e,i,o){if(e){Pe(e).removeClass(ze);var n=Pe(e.parentNode).find(Xe)[0];n&&Pe(n).removeClass(ze),e.setAttribute("aria-expanded",!1)}if(Pe(t).addClass(ze),t.setAttribute("aria-expanded",!0),i?(vi.reflow(t),Pe(t).addClass(We)):Pe(t).removeClass(Be),t.parentNode&&Pe(t.parentNode).hasClass(He)){var s=Pe(t).closest(je)[0];s&&Pe(s).find(qe).addClass(ze),t.setAttribute("aria-expanded",!0)}o&&o()},o._jQueryInterface=function(i){return this.each(function(){var t=Pe(this),e=t.data(Ae);if(e||(e=new o(this),t.data(Ae,e)),"string"==typeof i){if(void 0===e[i])throw new Error('No method named "'+i+'"');e[i]()}})},C(o,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}}]),o}(),Pe(document).on(Fe.CLICK_DATA_API,Ue,function(t){t.preventDefault(),Ke._jQueryInterface.call(Pe(this),"show")}),Pe.fn.tab=Ke._jQueryInterface,Pe.fn.tab.Constructor=Ke,Pe.fn.tab.noConflict=function(){return Pe.fn.tab=Oe,Ke._jQueryInterface},function(l){"use strict";var h=function t(e,i){this.options=l.extend({},t.DEFAULTS,i),this.$target=l(this.options.target).on("scroll.bs.affix.data-api",l.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",l.proxy(this.checkPositionWithEventLoop,this)),this.$element=l(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function i(o){return this.each(function(){var t=l(this),e=t.data("bs.affix"),i="object"==(void 0===o?"undefined":w(o))&&o;e||t.data("bs.affix",e=new h(this,i)),"string"==typeof o&&e[o]()})}h.VERSION="3.3.6",h.RESET="affix affix-top affix-bottom",h.DEFAULTS={offset:0,target:window},h.prototype.getState=function(t,e,i,o){var n=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return n<i&&"top";if("bottom"==this.affixed)return null!=i?!(n+this.unpin<=s.top)&&"bottom":!(n+a<=t-o)&&"bottom";var r=null==this.affixed,l=r?n:s.top;return null!=i&&n<=i?"top":null!=o&&t-o<=l+(r?a:e)&&"bottom"},h.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(h.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},h.prototype.checkPositionWithEventLoop=function(){setTimeout(l.proxy(this.checkPosition,this),1)},h.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),e=this.options.offset,i=e.top,o=e.bottom,n=Math.max(l(document).height(),l(document.body).height());"object"!=(void 0===e?"undefined":w(e))&&(o=i=e),"function"==typeof i&&(i=e.top(this.$element)),"function"==typeof o&&(o=e.bottom(this.$element));var s=this.getState(n,t,i,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var a="affix"+(s?"-"+s:""),r=l.Event(a+".bs.affix");if(this.$element.trigger(r),r.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(h.RESET).addClass(a).trigger(a.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:n-t-o})}};var t=l.fn.affix;l.fn.affix=i,l.fn.affix.Constructor=h,l.fn.affix.noConflict=function(){return l.fn.affix=t,this},l(window).on("load",function(){l('[data-spy="affix"]').each(function(){var t=l(this),e=t.data();e.offset=e.offset||{},null!=e.offsetBottom&&(e.offset.bottom=e.offsetBottom),null!=e.offsetTop&&(e.offset.top=e.offsetTop),i.call(t,e)})})}(jQuery),Qe=jQuery,Ze="imageGrid",ti="."+(Je="bs.image-grid"),ei=Qe.fn[Ze],ii={padding:10,targetHeight:300,display:"inline-block"},oi={RESIZE:"resize"+ti},ni=function(){function o(t,e){E(this,o),this._cleanWhitespace(t),this._row=0,this._rownum=1,this._elements=[],this._element=t,this._albumWidth=Qe(t).width(),this._images=Qe(t).children(),this._config=Qe.extend({},ii,e),Qe(window).on(oi.RESIZE,Qe.proxy(this._handleResize,this)),this._processImages()}return o.prototype.dispose=function(){Qe(window).off(ti),Qe.removeData(this._element,Je),this._row=null,this._rownum=null,this._elements=null,this._element=null,this._albumWidth=null,this._images=null,this._config=null},o.prototype._handleResize=function(){this._row=0,this._rownum=1,this._elements=[],this._albumWidth=Qe(this._element).width(),this._images=Qe(this._element).children(),this._processImages()},o.prototype._processImages=function(){var r=this;this._images.each(function(t){var e=Qe(this),i=e.is("img")?e:e.find("img"),o=void 0!==i.data("width")?i.data("width"):i.width(),n=void 0!==i.data("height")?i.data("height"):i.height();i.data("width",o),i.data("height",n);var s=Math.ceil(o/n*r._config.targetHeight),a=Math.ceil(r._config.targetHeight);r._elements.push([this,s,a]),r._row+=s+r._config.padding,r._row>r._albumWidth&&r._elements.length&&(r._resizeRow(r._row-r._config.padding),r._row=0,r._elements=[],r._rownum+=1),r._images.length-1==t&&r._elements.length&&(r._resizeRow(r._row),r._row=0,r._elements=[],r._rownum+=1)})},o.prototype._resizeRow=function(t){for(var e=this._config.padding*(this._elements.length-1),i=(this._albumWidth-e)/(t-e),o=e,n=(this._albumWidth,0);n<this._elements.length;n++){var s=Qe(this._elements[n][0]),a=Math.floor(this._elements[n][1]*i),r=Math.floor(this._elements[n][2]*i),l=n<this._elements.length-1;o+=a,!l&&o<this._albumWidth&&(a+=this._albumWidth-o),a--;var h=s.is("img")?s:s.find("img");h.width(a),h.height(r),this._applyModifications(s,l)}},o.prototype._applyModifications=function(t,e){var i={"margin-bottom":this._config.padding+"px","margin-right":e?this._config.padding+"px":0,display:this._config.display,"vertical-align":"bottom"};t.css(i)},o.prototype._cleanWhitespace=function(t){Qe(t).contents().filter(function(){return 3==this.nodeType&&!/\S/.test(this.nodeValue)}).remove()},o._jQueryInterface=function(t){return this.each(function(){var t=Qe(this),e=t.data(Je),i=Qe.extend({},ii,t.data(),"object"===(void 0===i?"undefined":w(i))&&i);e||t.data(Je,e=new o(this,i)),"string"==typeof i&&e[i].call(t)})},o}(),Qe.fn[Ze]=ni._jQueryInterface,Qe.fn[Ze].Constructor=ni,Qe.fn[Ze].noConflict=function(){return Qe.fn[Ze]=ei,Enter._jQueryInterface},Qe(function(){Qe('[data-grid="images"]').imageGrid()}),si=jQuery,ai=".bs.zoom",si.fn.zoom,ri={CLICK:"click"+ai,SCROLL:"scroll"+ai,KEYUP:"keyup"+ai,TOUCHSTART:"touchstart"+ai,TOUCHMOVE:"touchmove"+ai},li="zoom-overlay-open",hi="zoom-overlay-transitioning",ci="zoom-overlay",ui="zoom-img-wrap",di="zoom-img",pi="zoom",fi="zoom-out",mi=function(){function i(t,e){E(this,i),this._activeZoom=null,this._initialScrollPosition=null,this._initialTouchPosition=null,this._touchMoveListener=null,this._$document=si(document),this._$window=si(window),this._$body=si(document.body),this._boundClick=si.proxy(this._clickHandler,this)}return i.prototype._zoom=function(t){var e=t.target;if(e&&"IMG"===e.tagName&&!this._$body.hasClass(li))return t.metaKey||t.ctrlKey?window.open(t.target.getAttribute("data-original")||t.target.src,"_blank"):void(e.width>=si(window).width()-80||(this._activeZoomClose(!0),this._activeZoom=new gi(e),this._activeZoom.zoomImage(),this._$window.on(ri.SCROLL,si.proxy(this._scrollHandler,this)),this._$document.on(ri.KEYUP,si.proxy(this._keyHandler,this)),this._$document.on(ri.TOUCHSTART,si.proxy(this._touchStart,this)),document.addEventListener?document.addEventListener("click",this._boundClick,!0):document.attachEvent("onclick",this._boundClick,!0),"bubbles"in t?t.bubbles&&t.stopPropagation():t.cancelBubble=!0))},i.prototype._activeZoomClose=function(t){this._activeZoom&&(t?this._activeZoom.dispose():this._activeZoom.close(),this._$window.off(ai),this._$document.off(ai),document.removeEventListener("click",this._boundClick,!0),this._activeZoom=null)},i.prototype._scrollHandler=function(t){null===this._initialScrollPosition&&(this._initialScrollPosition=si(window).scrollTop());var e=this._initialScrollPosition-si(window).scrollTop();40<=Math.abs(e)&&this._activeZoomClose()},i.prototype._keyHandler=function(t){27===t.keyCode&&this._activeZoomClose()},i.prototype._clickHandler=function(t){t.preventDefault?t.preventDefault():event.returnValue=!1,"bubbles"in t?t.bubbles&&t.stopPropagation():t.cancelBubble=!0,this._activeZoomClose()},i.prototype._touchStart=function(t){this._initialTouchPosition=t.touches[0].pageY,si(t.target).on(ri.TOUCHMOVE,si.proxy(this._touchMove,this))},i.prototype._touchMove=function(t){10<Math.abs(t.touches[0].pageY-this._initialTouchPosition)&&(this._activeZoomClose(),si(t.target).off(ri.TOUCHMOVE))},i.prototype.listen=function(){this._$body.on(ri.CLICK,'[data-action="zoom"]',si.proxy(this._zoom,this))},C(i,null,[{key:"VERSION",get:function(){return"v4.0.0-alpha.6"}},{key:"Default",get:function(){return Default}}]),i}(),gi=function(){function e(t){E(this,e),this._fullHeight=null,this._fullWidth=null,this._overlay=null,this._targetImageWrap=null,this._targetImage=t,this._$body=si(document.body)}return e.prototype.zoomImage=function(){var t=document.createElement("img");t.onload=si.proxy(function(){this._fullHeight=Number(t.height),this._fullWidth=Number(t.width),this._zoomOriginal()},this),t.src=this._targetImage.src},e.prototype._zoomOriginal=function(){this._targetImageWrap=document.createElement("div"),this._targetImageWrap.className=ui,this._targetImage.parentNode.insertBefore(this._targetImageWrap,this._targetImage),this._targetImageWrap.appendChild(this._targetImage),si(this._targetImage).addClass(di).attr("data-action",fi),this._overlay=document.createElement("div"),this._overlay.className=ci,document.body.appendChild(this._overlay),this._calculateZoom(),this._triggerAnimation()},e.prototype._calculateZoom=function(){this._targetImage.offsetWidth;var t=this._fullWidth,e=this._fullHeight,i=(si(window).scrollTop(),t/this._targetImage.width),o=si(window).height()-80,n=si(window).width()-80,s=t/e,a=n/o;this._imgScaleFactor=t<n&&e<o?i:s<a?o/e*i:n/t*i},e.prototype._triggerAnimation=function(){this._targetImage.offsetWidth;var t=si(this._targetImage).offset(),e=si(window).scrollTop()+si(window).height()/2,i=si(window).width()/2,o=t.top+this._targetImage.height/2,n=t.left+this._targetImage.width/2;this._translateY=e-o,this._translateX=i-n;var s="scale("+this._imgScaleFactor+")",a="translate("+this._translateX+"px, "+this._translateY+"px)";vi.supportsTransitionEnd()||(a+=" translateZ(0)"),si(this._targetImage).css({"-webkit-transform":s,"-ms-transform":s,transform:s}),si(this._targetImageWrap).css({"-webkit-transform":a,"-ms-transform":a,transform:a}),this._$body.addClass(li)},e.prototype.close=function(){if(this._$body.removeClass(li).addClass(hi),si(this._targetImage).css({"-webkit-transform":"","-ms-transform":"",transform:""}),si(this._targetImageWrap).css({"-webkit-transform":"","-ms-transform":"",transform:""}),!vi.supportsTransitionEnd())return this.dispose();si(this._targetImage).one(vi.TRANSITION_END,si.proxy(this.dispose,this)).emulateTransitionEnd(300)},e.prototype.dispose=function(){this._targetImageWrap&&this._targetImageWrap.parentNode&&(si(this._targetImage).removeClass(di).attr("data-action",pi),this._targetImageWrap.parentNode.replaceChild(this._targetImage,this._targetImageWrap),this._overlay.parentNode.removeChild(this._overlay),this._$body.removeClass(hi))},e}(),si(function(){(new mi).listen()})}();var $input=$('<div class="modal-body"><input type="text" class="form-control" placeholder="Message"></div>');$(document).on("click",".js-msgGroup",function(){$(".js-msgGroup, .js-newMsg").addClass("hidden-xs-up"),$(".js-conversation").removeClass("hidden-xs-up"),$(".modal-title").html('<a href="#" class="js-gotoMsgs">Back</a>'),$input.insertBefore(".js-modalBody")}),$(function(){function e(){return $('[data-toggle="popover"]').length?$(window).width()-($('[data-toggle="popover"]').offset().left+$('[data-toggle="popover"]').outerWidth()):0}$(window).on("resize",function(){var t=$('[data-toggle="popover"]').data("bs.popover");t&&(t.config.viewport.padding=e())}),$('[data-toggle="popover"]').popover({template:'<div class="popover" role="tooltip"><div class="popover-content px-0"></div></div>',title:"",html:!0,trigger:"manual",placement:"bottom",viewport:{selector:"body",padding:e()},content:function(){return'<ul class="nav nav-pills nav-stacked flex-column" style="width: 120px">'+$("#js-popoverContent").clone().html()+"</ul>"}}),$('[data-toggle="popover"]').on("click",function(t){t.stopPropagation(),$($('[data-toggle="popover"]').data("bs.popover").getTipElement()).hasClass("in")?($('[data-toggle="popover"]').popover("hide"),$(document).off("click.app.popover")):($('[data-toggle="popover"]').popover("show"),setTimeout(function(){$(document).one("click.app.popover",function(){$('[data-toggle="popover"]').popover("hide")})},1))})}),$(document).on("click",".js-gotoMsgs",function(){$input.remove(),$(".js-conversation").addClass("hidden-xs-up"),$(".js-msgGroup, .js-newMsg").removeClass("hidden-xs-up"),$(".modal-title").html("Messages")}),$(document).on("click","[data-action=growl]",function(t){t.preventDefault(),$("#app-growl").append('<div class="alert alert-dark alert-dismissible fade show" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>Click the x on the upper right to dismiss this little thing. Or click growl again to show more growls</div>')}),$(document).on("focus",'[data-action="grow"]',function(){1e3<$(window).width()&&$(this).animate({width:300})}),$(document).on("blur",'[data-action="grow"]',function(){if(1e3<$(window).width())$(this).animate({width:180})}),jQuery.trumbowyg={langs:{en:{viewHTML:"View HTML",undo:"Undo",redo:"Redo",formatting:"Formatting",p:"Paragraph",blockquote:"Quote",code:"Code",header:"Header",bold:"Bold",italic:"Italic",strikethrough:"Stroke",underline:"Underline",strong:"Strong",em:"Emphasis",del:"Deleted",superscript:"Superscript",subscript:"Subscript",unorderedList:"Unordered list",orderedList:"Ordered list",insertImage:"Insert Image",link:"Link",createLink:"Insert link",unlink:"Remove link",justifyLeft:"Align Left",justifyCenter:"Align Center",justifyRight:"Align Right",justifyFull:"Align Justify",horizontalRule:"Insert horizontal rule",removeformat:"Remove format",fullscreen:"Fullscreen",close:"Close",submit:"Confirm",reset:"Cancel",required:"Required",description:"Description",title:"Title",text:"Text",target:"Target",width:"Width"}},plugins:{},svgPath:null,hideButtonTexts:null},Object.defineProperty(jQuery.trumbowyg,"defaultOptions",{value:{lang:"en",fixedBtnPane:!1,fixedFullWidth:!1,autogrow:!1,autogrowOnEnter:!1,imageWidthModalEdit:!1,prefix:"trumbowyg-",semantic:!0,resetCss:!1,removeformatPasted:!1,tagsToRemove:[],btns:[["viewHTML"],["undo","redo"],["formatting"],["strong","em","del"],["superscript","subscript"],["link"],["insertImage"],["justifyLeft","justifyCenter","justifyRight","justifyFull"],["unorderedList","orderedList"],["horizontalRule"],["removeformat"],["fullscreen"]],btnsDef:{},inlineElementsSelector:"a,abbr,acronym,b,caption,cite,code,col,dfn,dir,dt,dd,em,font,hr,i,kbd,li,q,span,strikeout,strong,sub,sup,u",pasteHandlers:[],plugins:{}},writable:!1,enumerable:!0,configurable:!1}),function(p,f,m,g){"use strict";var c="tbwconfirm",u="tbwcancel";g.fn.trumbowyg=function(t,e){var i="trumbowyg";if(t===Object(t)||!t)return this.each(function(){g(this).data(i)||g(this).data(i,new n(this,t))});if(1===this.length)try{var o=g(this).data(i);switch(t){case"execCmd":return o.execCmd(e.cmd,e.param,e.forceCss);case"openModal":return o.openModal(e.title,e.content);case"closeModal":return o.closeModal();case"openModalInsert":return o.openModalInsert(e.title,e.fields,e.callback);case"saveRange":return o.saveRange();case"getRange":return o.range;case"getRangeText":return o.getRangeText();case"restoreRange":return o.restoreRange();case"enable":return o.setDisabled(!1);case"disable":return o.setDisabled(!0);case"toggle":return o.toggle();case"destroy":return o.destroy();case"empty":return o.empty();case"html":return o.html(e)}}catch(t){}return!1};var n=function(t,e){var i=this,o="trumbowyg-icons",n=g.trumbowyg;i.doc=t.ownerDocument||m,i.$ta=g(t),i.$c=g(t),null!=(e=e||{}).lang||null!=n.langs[e.lang]?i.lang=g.extend(!0,{},n.langs.en,n.langs[e.lang]):i.lang=n.langs.en,i.hideButtonTexts=null!=n.hideButtonTexts?n.hideButtonTexts:e.hideButtonTexts;var s=null!=n.svgPath?n.svgPath:e.svgPath;if(i.hasSvg=!1!==s,i.svgPath=i.doc.querySelector("base")?f.location.href.split("#")[0]:"",0===g("#"+o,i.doc).length&&!1!==s){if(null==s){for(var a=m.getElementsByTagName("script"),r=0;r<a.length;r+=1){var l=a[r].src,h=l.match("trumbowyg(.min)?.js");null!=h&&(s=l.substring(0,l.indexOf(h[0]))+"../ui/icons.svg")}null==s&&console.warn("You must define svgPath: https://goo.gl/CfTY9U")}var c=i.doc.createElement("div");c.id=o,i.doc.body.insertBefore(c,i.doc.body.childNodes[0]),g.ajax({async:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"xml",crossDomain:!0,url:s,data:null,beforeSend:null,complete:null,success:function(t){c.innerHTML=(new XMLSerializer).serializeToString(t.documentElement)}})}var u=i.lang.header,d=function(){return(f.chrome||f.Intl&&Intl.v8BreakIterator)&&"CSS"in f};i.btnsDef={viewHTML:{fn:"toggle"},undo:{isSupported:d,key:"Z"},redo:{isSupported:d,key:"Y"},p:{fn:"formatBlock"},blockquote:{fn:"formatBlock"},h1:{fn:"formatBlock",title:u+" 1"},h2:{fn:"formatBlock",title:u+" 2"},h3:{fn:"formatBlock",title:u+" 3"},h4:{fn:"formatBlock",title:u+" 4"},subscript:{tag:"sub"},superscript:{tag:"sup"},bold:{key:"B",tag:"b"},italic:{key:"I",tag:"i"},underline:{tag:"u"},strikethrough:{tag:"strike"},strong:{fn:"bold",key:"B"},em:{fn:"italic",key:"I"},del:{fn:"strikethrough"},createLink:{key:"K",tag:"a"},unlink:{},insertImage:{},justifyLeft:{tag:"left",forceCss:!0},justifyCenter:{tag:"center",forceCss:!0},justifyRight:{tag:"right",forceCss:!0},justifyFull:{tag:"justify",forceCss:!0},unorderedList:{fn:"insertUnorderedList",tag:"ul"},orderedList:{fn:"insertOrderedList",tag:"ol"},horizontalRule:{fn:"insertHorizontalRule"},removeformat:{},fullscreen:{class:"trumbowyg-not-disable"},close:{fn:"destroy",class:"trumbowyg-not-disable"},formatting:{dropdown:["p","blockquote","h1","h2","h3","h4"],ico:"p"},link:{dropdown:["createLink","unlink"]}},i.o=g.extend(!0,{},n.defaultOptions,e),i.o.hasOwnProperty("imgDblClickHandler")||(i.o.imgDblClickHandler=i.getDefaultImgDblClickHandler()),i.disabled=i.o.disabled||"TEXTAREA"===t.nodeName&&t.disabled,e.btns?i.o.btns=e.btns:i.o.semantic||(i.o.btns[3]=["bold","italic","underline","strikethrough"]),g.each(i.o.btnsDef,function(t,e){i.addBtnDef(t,e)}),i.eventNamespace="trumbowyg-event",i.keys=[],i.tagToButton={},i.tagHandlers=[],i.pasteHandlers=[].concat(i.o.pasteHandlers),i.isIE=-1!==p.userAgent.indexOf("MSIE")||-1!==p.appVersion.indexOf("Trident/"),i.init()};n.prototype={init:function(){var t=this;t.height=t.$ta.height(),t.initPlugins();try{t.doc.execCommand("enableObjectResizing",!1,!1),t.doc.execCommand("defaultParagraphSeparator",!1,"p")}catch(t){}t.buildEditor(),t.buildBtnPane(),t.fixedBtnPaneEvents(),t.buildOverlay(),setTimeout(function(){t.disabled&&t.setDisabled(!0),t.$c.trigger("tbwinit")})},addBtnDef:function(t,e){this.btnsDef[t]=e},buildEditor:function(){var o=this,e=o.o.prefix,t="";o.$box=g("<div/>",{class:e+"box "+e+"editor-visible "+e+o.o.lang+" trumbowyg"}),o.isTextarea=o.$ta.is("textarea"),o.isTextarea?(t=o.$ta.val(),o.$ed=g("<div/>"),o.$box.insertAfter(o.$ta).append(o.$ed,o.$ta)):(o.$ed=o.$ta,t=o.$ed.html(),o.$ta=g("<textarea/>",{name:o.$ta.attr("id"),height:o.height}).val(t),o.$box.insertAfter(o.$ed).append(o.$ta,o.$ed),o.syncCode()),o.$ta.addClass(e+"textarea").attr("tabindex",-1),o.$ed.addClass(e+"editor").attr({contenteditable:!0,dir:o.lang._dir||"ltr"}).html(t),o.o.tabindex&&o.$ed.attr("tabindex",o.o.tabindex),o.$c.is("[placeholder]")&&o.$ed.attr("placeholder",o.$c.attr("placeholder")),o.$c.is("[spellcheck]")&&o.$ed.attr("spellcheck",o.$c.attr("spellcheck")),o.o.resetCss&&o.$ed.addClass(e+"reset-css"),o.o.autogrow||o.$ta.add(o.$ed).css({height:o.height}),o.semanticCode(),o.o.autogrowOnEnter&&o.$ed.addClass(e+"autogrow-on-enter");var i,n=!1,s=!1;o.$ed.on("dblclick","img",o.o.imgDblClickHandler).on("keydown",function(t){if((t.ctrlKey||t.metaKey)&&!t.altKey){n=!0;var e=o.keys[String.fromCharCode(t.which).toUpperCase()];try{return o.execCmd(e.fn,e.param),!1}catch(t){}}}).on("compositionstart compositionupdate",function(){s=!0}).on("keyup compositionend",function(t){if("compositionend"===t.type)s=!1;else if(s)return;var e=t.which;if(!(37<=e&&e<=40)){if(!t.ctrlKey&&!t.metaKey||89!==e&&90!==e)if(n||17===e)void 0===t.which&&o.semanticCode(!1,!1,!0);else{var i=!o.isIE||"compositionend"===t.type;o.semanticCode(!1,i&&13===e),o.$c.trigger("tbwchange")}else o.$c.trigger("tbwchange");setTimeout(function(){n=!1},50)}}).on("mouseup keydown keyup",function(t){(!t.ctrlKey&&!t.metaKey||t.altKey)&&setTimeout(function(){n=!1},50),clearTimeout(i),i=setTimeout(function(){o.updateButtonPaneStatus()},50)}).on("focus blur",function(t){if(o.$c.trigger("tbw"+t.type),"blur"===t.type&&g("."+e+"active-button",o.$btnPane).removeClass(e+"active-button "+e+"active"),o.o.autogrowOnEnter){if(o.autogrowOnEnterDontClose)return;"focus"===t.type?(o.autogrowOnEnterWasFocused=!0,o.autogrowEditorOnEnter()):o.o.autogrow||(o.$ed.css({height:o.$ed.css("min-height")}),o.$c.trigger("tbwresize"))}}).on("cut",function(){setTimeout(function(){o.semanticCode(!1,!0),o.$c.trigger("tbwchange")},0)}).on("paste",function(i){if(o.o.removeformatPasted){i.preventDefault(),f.getSelection&&f.getSelection().deleteFromDocument&&f.getSelection().deleteFromDocument();try{var e=f.clipboardData.getData("Text");try{o.doc.selection.createRange().pasteHTML(e)}catch(t){o.doc.getSelection().getRangeAt(0).insertNode(o.doc.createTextNode(e))}o.$c.trigger("tbwchange",i)}catch(t){o.execCmd("insertText",(i.originalEvent||i).clipboardData.getData("text/plain"))}}g.each(o.pasteHandlers,function(t,e){e(i)}),setTimeout(function(){o.semanticCode(!1,!0),o.$c.trigger("tbwpaste",i)},0)}),o.$ta.on("keyup",function(){o.$c.trigger("tbwchange")}).on("paste",function(){setTimeout(function(){o.$c.trigger("tbwchange")},0)}),o.$box.on("keydown",function(t){if(27===t.which&&1===g("."+e+"modal-box",o.$box).length)return o.closeModal(),!1})},autogrowEditorOnEnter:function(){var t=this;t.$ed.removeClass("autogrow-on-enter");var e=t.$ed[0].clientHeight;t.$ed.height("auto");var i=t.$ed[0].scrollHeight;t.$ed.addClass("autogrow-on-enter"),e!==i&&(t.$ed.height(e),setTimeout(function(){t.$ed.css({height:i}),t.$c.trigger("tbwresize")},0))},buildBtnPane:function(){var o=this,n=o.o.prefix,s=o.$btnPane=g("<div/>",{class:n+"button-pane"});g.each(o.o.btns,function(t,e){g.isArray(e)||(e=[e]);var i=g("<div/>",{class:n+"button-group "+(0<=e.indexOf("fullscreen")?n+"right":"")});g.each(e,function(t,e){try{o.isSupportedBtn(e)&&i.append(o.buildBtn(e))}catch(t){}}),0<i.html().trim().length&&s.append(i)}),o.$box.prepend(s)},buildBtn:function(t){var i=this,e=i.o.prefix,o=i.btnsDef[t],n=o.dropdown,s=null==o.hasIcon||o.hasIcon,a=i.lang[t]||t,r=g("<button/>",{type:"button",class:e+t+"-button "+(o.class||"")+(s?"":" "+e+"textual-button"),html:i.hasSvg&&s?'<svg><use xlink:href="'+i.svgPath+"#"+e+(o.ico||t).replace(/([A-Z]+)/g,"-$1").toLowerCase()+'"/></svg>':i.hideButtonTexts?"":o.text||o.title||i.lang[t]||t,title:(o.title||o.text||a)+(o.key?" (Ctrl + "+o.key+")":""),tabindex:-1,mousedown:function(){return n&&!g("."+t+"-"+e+"dropdown",i.$box).is(":hidden")||g("body",i.doc).trigger("mousedown"),!((i.$btnPane.hasClass(e+"disable")||i.$box.hasClass(e+"disabled"))&&!g(this).hasClass(e+"active")&&!g(this).hasClass(e+"not-disable")||(i.execCmd((!n?o.fn:"dropdown")||t,o.param||t,o.forceCss),1))}});if(n){r.addClass(e+"open-dropdown");var l=e+"dropdown",h={class:l+"-"+t+" "+l+" "+e+"fixed-top"};h["data-"+l]=t;var c=g("<div/>",h);g.each(n,function(t,e){i.btnsDef[e]&&i.isSupportedBtn(e)&&c.append(i.buildSubBtn(e))}),i.$box.append(c.hide())}else o.key&&(i.keys[o.key]={fn:o.fn||t,param:o.param||t});return n||(i.tagToButton[(o.tag||t).toLowerCase()]=t),r},buildSubBtn:function(t){var e=this,i=e.o.prefix,o=e.btnsDef[t],n=null==o.hasIcon||o.hasIcon;return o.key&&(e.keys[o.key]={fn:o.fn||t,param:o.param||t}),e.tagToButton[(o.tag||t).toLowerCase()]=t,g("<button/>",{type:"button",class:i+t+"-dropdown-button"+(o.ico?" "+i+o.ico+"-button":""),html:e.hasSvg&&n?'<svg><use xlink:href="'+e.svgPath+"#"+i+(o.ico||t).replace(/([A-Z]+)/g,"-$1").toLowerCase()+'"/></svg>'+(o.text||o.title||e.lang[t]||t):o.text||o.title||e.lang[t]||t,title:o.key?" (Ctrl + "+o.key+")":null,style:o.style||null,mousedown:function(){return g("body",e.doc).trigger("mousedown"),e.execCmd(o.fn||t,o.param||t,o.forceCss),!1}})},isSupportedBtn:function(t){try{return this.btnsDef[t].isSupported()}catch(t){}return!0},buildOverlay:function(){return this.$overlay=g("<div/>",{class:this.o.prefix+"overlay"}).appendTo(this.$box),this.$overlay},showOverlay:function(){g(f).trigger("scroll"),this.$overlay.fadeIn(200),this.$box.addClass(this.o.prefix+"box-blur")},hideOverlay:function(){this.$overlay.fadeOut(50),this.$box.removeClass(this.o.prefix+"box-blur")},fixedBtnPaneEvents:function(){var n=this,s=n.o.fixedFullWidth,a=n.$box;n.o.fixedBtnPane&&(n.isFixed=!1,g(f).on("scroll."+n.eventNamespace+" resize."+n.eventNamespace,function(){if(a){n.syncCode();var t=g(f).scrollTop(),e=a.offset().top+1,i=n.$btnPane,o=i.outerHeight()-2;0<t-e&&t-e-n.height<0?(n.isFixed||(n.isFixed=!0,i.css({position:"fixed",top:0,left:s?"0":"auto",zIndex:7}),g([n.$ta,n.$ed]).css({marginTop:i.height()})),i.css({width:s?"100%":a.width()-1+"px"}),g("."+n.o.prefix+"fixed-top",a).css({position:s?"fixed":"absolute",top:s?o:o+(t-e)+"px",zIndex:15})):n.isFixed&&(n.isFixed=!1,i.removeAttr("style"),g([n.$ta,n.$ed]).css({marginTop:0}),g("."+n.o.prefix+"fixed-top",a).css({position:"absolute",top:o}))}}))},setDisabled:function(t){var e=this,i=e.o.prefix;(e.disabled=t)?e.$ta.attr("disabled",!0):e.$ta.removeAttr("disabled"),e.$box.toggleClass(i+"disabled",t),e.$ed.attr("contenteditable",!t)},destroy:function(){var t=this,e=t.o.prefix;t.isTextarea?t.$box.after(t.$ta.css({height:""}).val(t.html()).removeClass(e+"textarea").show()):t.$box.after(t.$ed.css({height:""}).removeClass(e+"editor").removeAttr("contenteditable").removeAttr("dir").html(t.html()).show()),t.$ed.off("dblclick","img"),t.destroyPlugins(),t.$box.remove(),t.$c.removeData("trumbowyg"),g("body").removeClass(e+"body-fullscreen"),t.$c.trigger("tbwclose"),g(f).off("scroll."+t.eventNamespace+" resize."+t.eventNamespace)},empty:function(){this.$ta.val(""),this.syncCode(!0)},toggle:function(){var t=this,e=t.o.prefix;t.o.autogrowOnEnter&&(t.autogrowOnEnterDontClose=!t.$box.hasClass(e+"editor-hidden")),t.semanticCode(!1,!0),setTimeout(function(){t.doc.activeElement.blur(),t.$box.toggleClass(e+"editor-hidden "+e+"editor-visible"),t.$btnPane.toggleClass(e+"disable"),g("."+e+"viewHTML-button",t.$btnPane).toggleClass(e+"active"),t.$box.hasClass(e+"editor-visible")?t.$ta.attr("tabindex",-1):t.$ta.removeAttr("tabindex"),t.o.autogrowOnEnter&&!t.autogrowOnEnterDontClose&&t.autogrowEditorOnEnter()},0)},dropdown:function(t){var e=this,i=e.doc,o=e.o.prefix,n=g("[data-"+o+"dropdown="+t+"]",e.$box),s=g("."+o+t+"-button",e.$btnPane),a=n.is(":hidden");if(g("body",i).trigger("mousedown"),a){var r=s.offset().left;s.addClass(o+"active"),n.css({position:"absolute",top:s.offset().top-e.$btnPane.offset().top+s.outerHeight(),left:e.o.fixedFullWidth&&e.isFixed?r+"px":r-e.$btnPane.offset().left+"px"}).show(),g(f).trigger("scroll"),g("body",i).on("mousedown."+e.eventNamespace,function(t){n.is(t.target)||(g("."+o+"dropdown",e.$box).hide(),g("."+o+"active",e.$btnPane).removeClass(o+"active"),g("body",i).off("mousedown."+e.eventNamespace))})}},html:function(t){return null!=t?(this.$ta.val(t),this.syncCode(!0),this):this.$ta.val()},syncTextarea:function(){this.$ta.val(0<this.$ed.text().trim().length||0<this.$ed.find("hr,img,embed,iframe,input").length?this.$ed.html():"")},syncCode:function(t){var e=this;if(!t&&e.$ed.is(":visible"))e.syncTextarea();else{var i=g("<div>").html(e.$ta.val()),o=g("<div>").append(i);g(e.o.tagsToRemove.join(","),o).remove(),e.$ed.html(o.contents().html())}if(e.o.autogrow&&(e.height=e.$ed.height(),e.height!==e.$ta.css("height")&&(e.$ta.css({height:e.height}),e.$c.trigger("tbwresize"))),e.o.autogrowOnEnter){e.$ed.height("auto");var n=e.autogrowOnEnterWasFocused?e.$ed[0].scrollHeight:e.$ed.css("min-height");n!==e.$ta.css("height")&&(e.$ed.css({height:n}),e.$c.trigger("tbwresize"))}},semanticCode:function(t,e,i){var o=this;if(o.saveRange(),o.syncCode(t),o.o.semantic){if(o.semanticTag("b","strong"),o.semanticTag("i","em"),o.semanticTag("s","del"),o.semanticTag("strike","del"),e){var n=o.o.inlineElementsSelector,s=":not("+n+")";o.$ed.contents().filter(function(){return 3===this.nodeType&&0<this.nodeValue.trim().length}).wrap("<span data-tbw/>");var a=function(t){if(0!==t.length){var e=t.nextUntil(s).addBack().wrapAll("<p/>").parent(),i=e.nextAll(n).first();e.next("br").remove(),a(i)}};a(o.$ed.children(n).first()),o.semanticTag("div","p",!0),o.$ed.find("p").filter(function(){return(!o.range||this!==o.range.startContainer)&&0===g(this).text().trim().length&&0===g(this).children().not("br,span").length}).contents().unwrap(),g("[data-tbw]",o.$ed).contents().unwrap(),o.$ed.find("p:empty").remove()}i||o.restoreRange(),o.syncTextarea()}},semanticTag:function(t,e,i){g(t,this.$ed).each(function(){var t=g(this);t.wrap("<"+e+"/>"),i&&g.each(t.prop("attributes"),function(){t.parent().attr(this.name,this.value)}),t.contents().unwrap()})},createLink:function(){for(var t,e,i,o=this,n=o.doc.getSelection(),s=n.focusNode;["A","DIV"].indexOf(s.nodeName)<0;)s=s.parentNode;if(s&&"A"===s.nodeName){var a=g(s);t=a.attr("href"),e=a.attr("title"),i=a.attr("target");var r=o.doc.createRange();r.selectNode(s),n.removeAllRanges(),n.addRange(r)}o.saveRange(),o.openModalInsert(o.lang.createLink,{url:{label:"URL",required:!0,value:t},title:{label:o.lang.title,value:e},text:{label:o.lang.text,value:(new XMLSerializer).serializeToString(n.getRangeAt(0).cloneContents())},target:{label:o.lang.target,value:i}},function(t){var e=g(['<a href="',t.url,'">',t.text,"</a>"].join(""));return 0<t.title.length&&e.attr("title",t.title),0<t.target.length&&e.attr("target",t.target),o.range.deleteContents(),o.range.insertNode(e[0]),o.syncCode(),o.$c.trigger("tbwchange"),!0})},unlink:function(){var t=this.doc.getSelection(),e=t.focusNode;if(t.isCollapsed){for(;["A","DIV"].indexOf(e.nodeName)<0;)e=e.parentNode;if(e&&"A"===e.nodeName){var i=this.doc.createRange();i.selectNode(e),t.removeAllRanges(),t.addRange(i)}}this.execCmd("unlink",void 0,void 0,!0)},insertImage:function(){var i=this;i.saveRange();var t={url:{label:"URL",required:!0},alt:{label:i.lang.description,value:i.getRangeText()}};i.o.imageWidthModalEdit&&(t.width={}),i.openModalInsert(i.lang.insertImage,t,function(t){i.execCmd("insertImage",t.url);var e=g('img[src="'+t.url+'"]:not([alt])',i.$box);return e.attr("alt",t.alt),i.o.imageWidthModalEdit&&e.attr({width:t.width}),i.syncCode(),i.$c.trigger("tbwchange"),!0})},fullscreen:function(){var t,e=this.o.prefix,i=e+"fullscreen";this.$box.toggleClass(i),t=this.$box.hasClass(i),g("body").toggleClass(e+"body-fullscreen",t),g(f).trigger("scroll"),this.$c.trigger("tbw"+(t?"open":"close")+"fullscreen")},execCmd:function(e,i,t,o){var n=this;o=!!o||"","dropdown"!==e&&n.$ed.focus();try{n.doc.execCommand("styleWithCSS",!1,t||!1)}catch(t){}try{n[e+o](i)}catch(t){try{e(i)}catch(t){"insertHorizontalRule"===e?i=void 0:"formatBlock"===e&&n.isIE&&(i="<"+i+">"),n.doc.execCommand(e,!1,i),n.syncCode(),n.semanticCode(!1,!0)}"dropdown"!==e&&(n.updateButtonPaneStatus(),n.$c.trigger("tbwchange"))}},openModal:function(t,e){var i=this,o=i.o.prefix;if(0<g("."+o+"modal-box",i.$box).length)return!1;i.o.autogrowOnEnter&&(i.autogrowOnEnterDontClose=!0),i.saveRange(),i.showOverlay(),i.$btnPane.addClass(o+"disable");var n=g("<div/>",{class:o+"modal "+o+"fixed-top"}).css({top:i.$btnPane.height()}).appendTo(i.$box);i.$overlay.one("click",function(){return n.trigger(u),!1});var s=g("<form/>",{action:"",html:e}).on("submit",function(){return n.trigger(c),!1}).on("reset",function(){return n.trigger(u),!1}).on("submit reset",function(){i.o.autogrowOnEnter&&(i.autogrowOnEnterDontClose=!1)}),a=g("<div/>",{class:o+"modal-box",html:s}).css({top:"-"+i.$btnPane.outerHeight()+"px",opacity:0}).appendTo(n).animate({top:0,opacity:1},100);return g("<span/>",{text:t,class:o+"modal-title"}).prependTo(a),n.height(a.outerHeight()+10),g("input:first",a).focus(),i.buildModalBtn("submit",a),i.buildModalBtn("reset",a),g(f).trigger("scroll"),n},buildModalBtn:function(t,e){var i=this.o.prefix;return g("<button/>",{class:i+"modal-button "+i+"modal-"+t,type:t,text:this.lang[t]||t}).appendTo(g("form",e))},closeModal:function(){var t=this,e=t.o.prefix;t.$btnPane.removeClass(e+"disable"),t.$overlay.off();var i=g("."+e+"modal-box",t.$box);i.animate({top:"-"+i.height()},100,function(){i.parent().remove(),t.hideOverlay()}),t.restoreRange()},openModalInsert:function(t,e,i){var a=this,r=a.o.prefix,l=a.lang,h="";return g.each(e,function(t,e){var i=e.label,o=e.name||t,n=e.attributes||{},s=Object.keys(n).map(function(t){return t+'="'+n[t]+'"'}).join(" ");h+='<label><input type="'+(e.type||"text")+'" name="'+o+'" value="'+(e.value||"").replace(/"/g,"&quot;")+'"'+s+'><span class="'+r+'input-infos"><span>'+(i?l[i]?l[i]:i:l[t]?l[t]:t)+"</span></span></label>"}),a.openModal(t,h).on(c,function(){var o=g("form",g(this)),n=!0,s={};g.each(e,function(t,e){var i=g('input[name="'+t+'"]',o);"checkbox"===i.attr("type").toLowerCase()?s[t]=i.is(":checked"):s[t]=g.trim(i.val()),e.required&&""===s[t]?(n=!1,a.addErrorOnModalField(i,a.lang.required)):e.pattern&&!e.pattern.test(s[t])&&(n=!1,a.addErrorOnModalField(i,e.patternError))}),n&&(a.restoreRange(),i(s,e)&&(a.syncCode(),a.$c.trigger("tbwchange"),a.closeModal(),g(this).off(c)))}).one(u,function(){g(this).off(c),a.closeModal()})},addErrorOnModalField:function(t,e){var i=this.o.prefix,o=t.parent();t.on("change keyup",function(){o.removeClass(i+"input-error")}),o.addClass(i+"input-error").find("input+span").append(g("<span/>",{class:i+"msg-error",text:e}))},getDefaultImgDblClickHandler:function(){var n=this;return function(){var e=g(this),t=e.attr("src"),i="(Base64)";0===t.indexOf("data:image")&&(t=i);var o={url:{label:"URL",value:t,required:!0},alt:{label:n.lang.description,value:e.attr("alt")}};return n.o.imageWidthModalEdit&&(o.width={value:e.attr("width")?e.attr("width"):""}),n.openModalInsert(n.lang.insertImage,o,function(t){return t.src!==i&&e.attr({src:t.url}),e.attr({alt:t.alt}),n.o.imageWidthModalEdit&&(0<parseInt(t.width)?e.attr({width:t.width}):e.removeAttr("width")),!0}),!1}},saveRange:function(){var t=this,e=t.doc.getSelection();if(t.range=null,e.rangeCount){var i,o=t.range=e.getRangeAt(0),n=t.doc.createRange();n.selectNodeContents(t.$ed[0]),n.setEnd(o.startContainer,o.startOffset),i=(n+"").length,t.metaRange={start:i,end:i+(o+"").length}}},restoreRange:function(){var t,e=this,i=e.metaRange,o=e.range,n=e.doc.getSelection();if(o){if(i&&i.start!==i.end){var s,a=0,r=[e.$ed[0]],l=!1,h=!1;for(t=e.doc.createRange();!h&&(s=r.pop());)if(3===s.nodeType){var c=a+s.length;!l&&i.start>=a&&i.start<=c&&(t.setStart(s,i.start-a),l=!0),l&&i.end>=a&&i.end<=c&&(t.setEnd(s,i.end-a),h=!0),a=c}else for(var u=s.childNodes,d=u.length;0<d;)d-=1,r.push(u[d])}n.removeAllRanges(),n.addRange(t||o)}},getRangeText:function(){return this.range+""},updateButtonPaneStatus:function(){var s=this,a=s.o.prefix,t=s.getTagsRecursive(s.doc.getSelection().focusNode),r=a+"active-button "+a+"active";g("."+a+"active-button",s.$btnPane).removeClass(r),g.each(t,function(t,e){var i=s.tagToButton[e.toLowerCase()],o=g("."+a+i+"-button",s.$btnPane);if(0<o.length)o.addClass(r);else try{var n=(o=g("."+a+"dropdown ."+a+i+"-dropdown-button",s.$box)).parent().data("dropdown");g("."+a+n+"-button",s.$box).addClass(r)}catch(t){}})},getTagsRecursive:function(i,o){var n=this;if(o=o||(i&&i.tagName?[i.tagName]:[]),!i||!i.parentNode)return o;var t=(i=i.parentNode).tagName;return"DIV"===t?o:("P"===t&&""!==i.style.textAlign&&o.push(i.style.textAlign),g.each(n.tagHandlers,function(t,e){o=o.concat(e(i,n))}),o.push(t),n.getTagsRecursive(i,o).filter(function(t){return null!=t}))},initPlugins:function(){var i=this;i.loadedPlugins=[],g.each(g.trumbowyg.plugins,function(t,e){e.shouldInit&&!e.shouldInit(i)||(e.init(i),e.tagHandler&&i.tagHandlers.push(e.tagHandler),i.loadedPlugins.push(e))})},destroyPlugins:function(){g.each(this.loadedPlugins,function(t,e){e.destroy&&e.destroy()})}}}(navigator,window,document,jQuery),function(s){var a=function(t,e){if(this.element=s(t),this.format=m.parseFormat(e.format||this.element.data("date-format")||"mm/dd/yyyy"),this.picker=s(m.template).appendTo("body").on({click:s.proxy(this.click,this)}),this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on"),this.isInput?this.element.on({focus:s.proxy(this.show,this),keyup:s.proxy(this.update,this)}):this.component?this.component.on("click",s.proxy(this.show,this)):this.element.on("click",s.proxy(this.show,this)),this.minViewMode=e.minViewMode||this.element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=e.viewMode||this.element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=e.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.onRender=e.onRender,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};a.prototype={constructor:a,show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),s(window).on("resize",s.proxy(this.place,this)),t&&(t.stopPropagation(),t.preventDefault()),this.isInput;var e=this;s(document).on("mousedown",function(t){0==s(t.target).closest(".datepicker").length&&e.hide()}),this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide(),s(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||s(document).off("mousedown",this.hide),this.element.trigger({type:"hide",date:this.date})},set:function(){var t=m.formatDate(this.date,this.format);this.isInput?this.element.prop("value",t):(this.component&&this.element.find("input").prop("value",t),this.element.data("date",t))},setValue:function(t){this.date="string"==typeof t?m.parseDate(t,this.format):new Date(t),this.set(),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},place:function(){var t=this.component?this.component.offset():this.element.offset();this.picker.css({top:t.top+this.height,left:t.left})},update:function(t){this.date=m.parseDate("string"==typeof t?t:this.isInput?this.element.prop("value"):this.element.data("date"),this.format),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},fillDow:function(){for(var t=this.weekStart,e="<tr>";t<this.weekStart+7;)e+='<th class="dow">'+m.dates.daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;e<12;)t+='<span class="month">'+m.dates.monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").append(t)},fill:function(){var t=new Date(this.viewDate),e=t.getFullYear(),i=t.getMonth(),o=this.date.valueOf();this.picker.find(".datepicker-days th:eq(1)").text(m.dates.months[i]+" "+e);var n=new Date(e,i-1,28,0,0,0,0),s=m.getDaysInMonth(n.getFullYear(),n.getMonth());n.setDate(s),n.setDate(s-(n.getDay()-this.weekStart+7)%7);var a=new Date(n);a.setDate(a.getDate()+42),a=a.valueOf();for(var r,l,h,c=[];n.valueOf()<a;)n.getDay()===this.weekStart&&c.push("<tr>"),r=this.onRender(n),l=n.getFullYear(),(h=n.getMonth())<i&&l===e||l<e?r+=" old":(i<h&&l===e||e<l)&&(r+=" new"),n.valueOf()===o&&(r+=" active"),c.push('<td class="day '+r+'">'+n.getDate()+"</td>"),n.getDay()===this.weekEnd&&c.push("</tr>"),n.setDate(n.getDate()+1);this.picker.find(".datepicker-days tbody").empty().append(c.join(""));var u=this.date.getFullYear(),d=this.picker.find(".datepicker-months").find("th:eq(1)").text(e).end().find("span").removeClass("active");u===e&&d.eq(this.date.getMonth()).addClass("active"),c="",e=10*parseInt(e/10,10);var p=this.picker.find(".datepicker-years").find("th:eq(1)").text(e+"-"+(e+9)).end().find("td");e-=1;for(var f=-1;f<11;f++)c+='<span class="year'+(-1===f||10===f?" old":"")+(u===e?" active":"")+'">'+e+"</span>",e+=1;p.html(c)},click:function(t){t.stopPropagation(),t.preventDefault();var e=s(t.target).closest("span, td, th");if(1===e.length)switch(e[0].nodeName.toLowerCase()){case"th":switch(e[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+m.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+m.modes[this.viewMode].navFnc].call(this.viewDate)+m.modes[this.viewMode].navStep*("prev"===e[0].className?-1:1)),this.fill(),this.set()}break;case"span":if(e.is(".month")){var i=e.parent().find("span").index(e);this.viewDate.setMonth(i)}else{var o=parseInt(e.text(),10)||0;this.viewDate.setFullYear(o)}0!==this.viewMode&&(this.date=new Date(this.viewDate),this.element.trigger({type:"changeDate",date:this.date,viewMode:m.modes[this.viewMode].clsName})),this.showMode(-1),this.fill(),this.set();break;case"td":if(e.is(".day")&&!e.is(".disabled")){var n=parseInt(e.text(),10)||1;i=this.viewDate.getMonth();e.is(".old")?i-=1:e.is(".new")&&(i+=1);o=this.viewDate.getFullYear();this.date=new Date(o,i,n,0,0,0,0),this.viewDate=new Date(o,i,Math.min(28,n),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:m.modes[this.viewMode].clsName})}}},mousedown:function(t){t.stopPropagation(),t.preventDefault()},showMode:function(t){t&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+m.modes[this.viewMode].clsName).show()}},s.fn.datepicker=function(o,n){return this.each(function(){var t=s(this),e=t.data("datepicker"),i="object"==typeof o&&o;e||t.data("datepicker",e=new a(this,s.extend({},s.fn.datepicker.defaults,i))),"string"==typeof o&&e[o](n)})},s.fn.datepicker.defaults={onRender:function(t){return""}},s.fn.datepicker.Constructor=a;var m={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getDaysInMonth:function(t,e){return[31,m.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},parseFormat:function(t){var e=t.match(/[.\/\-\s].*?/),i=t.split(/\W+/);if(!e||!i||0===i.length)throw new Error("Invalid date format.");return{separator:e,parts:i}},parseDate:function(t,e){var i,o=t.split(e.separator);if((t=new Date).setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),o.length===e.parts.length){for(var n=t.getFullYear(),s=t.getDate(),a=t.getMonth(),r=0,l=e.parts.length;r<l;r++)switch(i=parseInt(o[r],10)||1,e.parts[r]){case"dd":case"d":s=i,t.setDate(i);break;case"mm":case"m":a=i-1,t.setMonth(i-1);break;case"yy":n=2e3+i,t.setFullYear(2e3+i);break;case"yyyy":n=i,t.setFullYear(i)}t=new Date(n,a,s,0,0,0)}return t},formatDate:function(t,e){var i={d:t.getDate(),m:t.getMonth()+1,yy:t.getFullYear().toString().substring(2),yyyy:t.getFullYear()};i.dd=(i.d<10?"0":"")+i.d,i.mm=(i.m<10?"0":"")+i.m;t=[];for(var o=0,n=e.parts.length;o<n;o++)t.push(i[e.parts[o]]);return t.join(e.separator)},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};m.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+m.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+m.headTemplate+m.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+m.headTemplate+m.contTemplate+"</table></div></div>"}(window.jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(s){function i(t,e,i){e={content:{message:"object"==typeof e?e.message:e,title:e.title?e.title:"",icon:e.icon?e.icon:"",url:e.url?e.url:"#",target:e.target?e.target:"-"}};i=s.extend(!0,{},e,i),this.settings=s.extend(!0,{},o,i),this._defaults=o,"-"==this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),this.init()}var o={element:"body",position:null,type:"info",allow_dismiss:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};String.format=function(){for(var t=arguments[0],e=1;e<arguments.length;e++)t=t.replace(RegExp("\\{"+(e-1)+"\\}","gm"),arguments[e]);return t},s.extend(i.prototype,{init:function(){var a=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(t,e){var i={};for(var t in"string"==typeof t?i[t]=e:i=t,i)switch(t){case"type":this.$ele.removeClass("alert-"+a.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+a.settings.type),a.settings.type=i[t],this.$ele.addClass("alert-"+i[t]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+i[t]);break;case"icon":var o=this.$ele.find('[data-notify="icon"]');"class"==a.settings.icon_type.toLowerCase()?o.removeClass(a.settings.content.icon).addClass(i[t]):(o.is("img")||o.find("img"),o.attr("src",i[t]));break;case"progress":var n=a.settings.delay-a.settings.delay*(i[t]/100);this.$ele.data("notify-delay",n),this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",i[t]).css("width",i[t]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",i[t]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",i[t]);break;default:this.$ele.find('[data-notify="'+t+'"]').html(i[t])}var s=this.$ele.outerHeight()+parseInt(a.settings.spacing)+parseInt(a.settings.offset.y);a.reposition(s)},close:function(){a.close()}}},buildNotify:function(){var t=this.settings.content;this.$ele=s(String.format(this.settings.template,this.settings.type,t.title,t.message,t.url,t.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){"class"==this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:"0px",position:"absolute",top:"0px",width:"100%",zIndex:this.settings.z_index+1}),this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},placement:function(){var i=this,t=this.settings.offset.y,e={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},o=!1,n=this.settings;switch(s('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){return t=Math.max(t,parseInt(s(this).css(n.placement.from))+parseInt(s(this).outerHeight())+parseInt(n.spacing))}),1==this.settings.newest_on_top&&(t=this.settings.offset.y),e[this.settings.placement.from]=t+"px",this.settings.placement.align){case"left":case"right":e[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":e.left=0,e.right=0}this.$ele.css(e).addClass(this.settings.animate.enter),s.each(Array("webkit","moz","o","ms",""),function(t,e){i.$ele[0].style[e+"AnimationIterationCount"]=1}),s(this.settings.element).append(this.$ele),1==this.settings.newest_on_top&&(t=parseInt(t)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(t)),s.isFunction(i.settings.onShow)&&i.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,function(){o=!0}).one(this.animations.end,function(){s.isFunction(i.settings.onShown)&&i.settings.onShown.call(this)}),setTimeout(function(){o||s.isFunction(i.settings.onShown)&&i.settings.onShown.call(this)},600)},bind:function(){var i=this;if(this.$ele.find('[data-notify="dismiss"]').on("click",function(){i.close()}),this.$ele.mouseover(function(){s(this).data("data-hover","true")}).mouseout(function(){s(this).data("data-hover","false")}),this.$ele.data("data-hover","false"),0<this.settings.delay){i.$ele.data("notify-delay",i.settings.delay);var o=setInterval(function(){var t=parseInt(i.$ele.data("notify-delay"))-i.settings.timer;if("false"===i.$ele.data("data-hover")&&"pause"==i.settings.mouse_over||"pause"!=i.settings.mouse_over){var e=(i.settings.delay-t)/i.settings.delay*100;i.$ele.data("notify-delay",t),i.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",e).css("width",e+"%")}t<=-i.settings.timer&&(clearInterval(o),i.close())},i.settings.timer)}},close:function(){var t=this,e=parseInt(this.$ele.css(this.settings.placement.from)),i=!1;this.$ele.data("closing","true").addClass(this.settings.animate.exit),t.reposition(e),s.isFunction(t.settings.onClose)&&t.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,function(){i=!0}).one(this.animations.end,function(){s(this).remove(),s.isFunction(t.settings.onClosed)&&t.settings.onClosed.call(this)}),setTimeout(function(){i||(t.$ele.remove(),t.settings.onClosed&&t.settings.onClosed(t.$ele))},600)},reposition:function(t){var e=this,i='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',o=this.$ele.nextAll(i);1==this.settings.newest_on_top&&(o=this.$ele.prevAll(i)),o.each(function(){s(this).css(e.settings.placement.from,t),t=parseInt(t)+parseInt(e.settings.spacing)+s(this).outerHeight()})}}),s.notify=function(t,e){return new i(this,t,e).notify},s.notifyDefaults=function(t){return o=s.extend(!0,{},o,t)},s.notifyClose=function(t){void 0===t||"all"==t?s("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):s('[data-notify-position="'+t+'"]').find('[data-notify="dismiss"]').trigger("click")}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";var t,n;function d(){return t.apply(null,arguments)}function r(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function l(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function h(t){return void 0===t}function c(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function u(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function p(t,e){var i,o=[];for(i=0;i<t.length;++i)o.push(e(t[i],i));return o}function f(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function m(t,e){for(var i in e)f(e,i)&&(t[i]=e[i]);return f(e,"toString")&&(t.toString=e.toString),f(e,"valueOf")&&(t.valueOf=e.valueOf),t}function g(t,e,i,o){return Re(t,e,i,o,!0).utc()}function v(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function y(t){if(null==t._isValid){var e=v(t),i=n.call(e.parsedDateParts,function(t){return null!=t}),o=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(o=o&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return o;t._isValid=o}return t._isValid}function b(t){var e=g(NaN);return null!=t?m(v(e),t):v(e).userInvalidated=!0,e}n=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,o=0;o<i;o++)if(o in e&&t.call(this,e[o],o,e))return!0;return!1};var s=d.momentProperties=[];function w(t,e){var i,o,n;if(h(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),h(e._i)||(t._i=e._i),h(e._f)||(t._f=e._f),h(e._l)||(t._l=e._l),h(e._strict)||(t._strict=e._strict),h(e._tzm)||(t._tzm=e._tzm),h(e._isUTC)||(t._isUTC=e._isUTC),h(e._offset)||(t._offset=e._offset),h(e._pf)||(t._pf=v(e)),h(e._locale)||(t._locale=e._locale),0<s.length)for(i=0;i<s.length;i++)h(n=e[o=s[i]])||(t[o]=n);return t}var e=!1;function C(t){w(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===e&&(e=!0,d.updateOffset(this),e=!1)}function E(t){return t instanceof C||null!=t&&null!=t._isAMomentObject}function _(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function x(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=_(e)),i}function a(t,e,i){var o,n=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),a=0;for(o=0;o<n;o++)(i&&t[o]!==e[o]||!i&&x(t[o])!==x(e[o]))&&a++;return a+s}function S(t){!1===d.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function i(n,s){var a=!0;return m(function(){if(null!=d.deprecationHandler&&d.deprecationHandler(null,n),a){for(var t,e=[],i=0;i<arguments.length;i++){if(t="","object"==typeof arguments[i]){for(var o in t+="\n["+i+"] ",arguments[0])t+=o+": "+arguments[0][o]+", ";t=t.slice(0,-2)}else t=arguments[i];e.push(t)}S(n+"\nArguments: "+Array.prototype.slice.call(e).join("")+"\n"+(new Error).stack),a=!1}return s.apply(this,arguments)},s)}var o,T={};function R(t,e){null!=d.deprecationHandler&&d.deprecationHandler(t,e),T[t]||(S(e),T[t]=!0)}function k(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function D(t,e){var i,o=m({},t);for(i in e)f(e,i)&&(l(t[i])&&l(e[i])?(o[i]={},m(o[i],t[i]),m(o[i],e[i])):null!=e[i]?o[i]=e[i]:delete o[i]);for(i in t)f(t,i)&&!f(e,i)&&l(t[i])&&(o[i]=m({},o[i]));return o}function M(t){null!=t&&this.set(t)}d.suppressDeprecationWarnings=!1,d.deprecationHandler=null,o=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)f(t,e)&&i.push(e);return i};var L={};function P(t,e){var i=t.toLowerCase();L[i]=L[i+"s"]=L[e]=t}function A(t){return"string"==typeof t?L[t]||L[t.toLowerCase()]:void 0}function I(t){var e,i,o={};for(i in t)f(t,i)&&(e=A(i))&&(o[e]=t[i]);return o}var O={};function F(t,e){O[t]=e}function H(t,e,i){var o=""+Math.abs(t),n=e-o.length;return(0<=t?i?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+o}var z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,N=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,B={},W={};function j(t,e,i,o){var n=o;"string"==typeof o&&(n=function(){return this[o]()}),t&&(W[t]=n),e&&(W[e[0]]=function(){return H(n.apply(this,arguments),e[1],e[2])}),i&&(W[i]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function Y(t,e){return t.isValid()?(e=V(e,t.localeData()),B[e]=B[e]||function(o){var t,n,e,s=o.match(z);for(t=0,n=s.length;t<n;t++)W[s[t]]?s[t]=W[s[t]]:s[t]=(e=s[t]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(t){var e,i="";for(e=0;e<n;e++)i+=k(s[e])?s[e].call(t,o):s[e];return i}}(e),B[e](t)):t.localeData().invalidDate()}function V(t,e){var i=5;function o(t){return e.longDateFormat(t)||t}for(N.lastIndex=0;0<=i&&N.test(t);)t=t.replace(N,o),N.lastIndex=0,i-=1;return t}var G=/\d/,$=/\d\d/,U=/\d{3}/,q=/\d{4}/,X=/[+-]?\d{6}/,K=/\d\d?/,Q=/\d\d\d\d?/,Z=/\d\d\d\d\d\d?/,J=/\d{1,3}/,tt=/\d{1,4}/,et=/[+-]?\d{1,6}/,it=/\d+/,ot=/[+-]?\d+/,nt=/Z|[+-]\d\d:?\d\d/gi,st=/Z|[+-]\d\d(?::?\d\d)?/gi,at=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,rt={};function lt(t,i,o){rt[t]=k(i)?i:function(t,e){return t&&o?o:i}}function ht(t,e){return f(rt,t)?rt[t](e._strict,e._locale):new RegExp(ct(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,o,n){return e||i||o||n})))}function ct(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ut={};function dt(t,i){var e,o=i;for("string"==typeof t&&(t=[t]),c(i)&&(o=function(t,e){e[i]=x(t)}),e=0;e<t.length;e++)ut[t[e]]=o}function pt(t,n){dt(t,function(t,e,i,o){i._w=i._w||{},n(t,i._w,i,o)})}var ft=0,mt=1,gt=2,vt=3,yt=4,bt=5,wt=6,Ct=7,Et=8;function _t(t){return xt(t)?366:365}function xt(t){return t%4==0&&t%100!=0||t%400==0}j("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),j(0,["YY",2],0,function(){return this.year()%100}),j(0,["YYYY",4],0,"year"),j(0,["YYYYY",5],0,"year"),j(0,["YYYYYY",6,!0],0,"year"),P("year","y"),F("year",1),lt("Y",ot),lt("YY",K,$),lt("YYYY",tt,q),lt("YYYYY",et,X),lt("YYYYYY",et,X),dt(["YYYYY","YYYYYY"],ft),dt("YYYY",function(t,e){e[ft]=2===t.length?d.parseTwoDigitYear(t):x(t)}),dt("YY",function(t,e){e[ft]=d.parseTwoDigitYear(t)}),dt("Y",function(t,e){e[ft]=parseInt(t,10)}),d.parseTwoDigitYear=function(t){return x(t)+(68<x(t)?1900:2e3)};var St,Tt=Rt("FullYear",!0);function Rt(e,i){return function(t){return null!=t?(Dt(this,e,t),d.updateOffset(this,i),this):kt(this,e)}}function kt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Dt(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&xt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),Mt(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function Mt(t,e){if(isNaN(t)||isNaN(e))return NaN;var i,o=(e%(i=12)+i)%i;return t+=(e-o)/12,1===o?xt(t)?29:28:31-o%7%2}St=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},j("M",["MM",2],"Mo",function(){return this.month()+1}),j("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),j("MMMM",0,0,function(t){return this.localeData().months(this,t)}),P("month","M"),F("month",8),lt("M",K),lt("MM",K,$),lt("MMM",function(t,e){return e.monthsShortRegex(t)}),lt("MMMM",function(t,e){return e.monthsRegex(t)}),dt(["M","MM"],function(t,e){e[mt]=x(t)-1}),dt(["MMM","MMMM"],function(t,e,i,o){var n=i._locale.monthsParse(t,o,i._strict);null!=n?e[mt]=n:v(i).invalidMonth=t});var Lt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Pt="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var At="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function It(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=x(e);else if(!c(e=t.localeData().monthsParse(e)))return t;return i=Math.min(t.date(),Mt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function Ot(t){return null!=t?(It(this,t),d.updateOffset(this,!0),this):kt(this,"Month")}var Ft=at;var Ht=at;function zt(){function t(t,e){return e.length-t.length}var e,i,o=[],n=[],s=[];for(e=0;e<12;e++)i=g([2e3,e]),o.push(this.monthsShort(i,"")),n.push(this.months(i,"")),s.push(this.months(i,"")),s.push(this.monthsShort(i,""));for(o.sort(t),n.sort(t),s.sort(t),e=0;e<12;e++)o[e]=ct(o[e]),n[e]=ct(n[e]);for(e=0;e<24;e++)s[e]=ct(s[e]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Nt(t){var e;if(t<100&&0<=t){var i=Array.prototype.slice.call(arguments);i[0]=t+400,e=new Date(Date.UTC.apply(null,i)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function Bt(t,e,i){var o=7+e-i;return-((7+Nt(t,0,o).getUTCDay()-e)%7)+o-1}function Wt(t,e,i,o,n){var s,a,r=1+7*(e-1)+(7+i-o)%7+Bt(t,o,n);return a=r<=0?_t(s=t-1)+r:r>_t(t)?(s=t+1,r-_t(t)):(s=t,r),{year:s,dayOfYear:a}}function jt(t,e,i){var o,n,s=Bt(t.year(),e,i),a=Math.floor((t.dayOfYear()-s-1)/7)+1;return a<1?o=a+Yt(n=t.year()-1,e,i):a>Yt(t.year(),e,i)?(o=a-Yt(t.year(),e,i),n=t.year()+1):(n=t.year(),o=a),{week:o,year:n}}function Yt(t,e,i){var o=Bt(t,e,i),n=Bt(t+1,e,i);return(_t(t)-o+n)/7}j("w",["ww",2],"wo","week"),j("W",["WW",2],"Wo","isoWeek"),P("week","w"),P("isoWeek","W"),F("week",5),F("isoWeek",5),lt("w",K),lt("ww",K,$),lt("W",K),lt("WW",K,$),pt(["w","ww","W","WW"],function(t,e,i,o){e[o.substr(0,1)]=x(t)});function Vt(t,e){return t.slice(e,7).concat(t.slice(0,e))}j("d",0,"do","day"),j("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),j("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),j("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),j("e",0,0,"weekday"),j("E",0,0,"isoWeekday"),P("day","d"),P("weekday","e"),P("isoWeekday","E"),F("day",11),F("weekday",11),F("isoWeekday",11),lt("d",K),lt("e",K),lt("E",K),lt("dd",function(t,e){return e.weekdaysMinRegex(t)}),lt("ddd",function(t,e){return e.weekdaysShortRegex(t)}),lt("dddd",function(t,e){return e.weekdaysRegex(t)}),pt(["dd","ddd","dddd"],function(t,e,i,o){var n=i._locale.weekdaysParse(t,o,i._strict);null!=n?e.d=n:v(i).invalidWeekday=t}),pt(["d","e","E"],function(t,e,i,o){e[o]=x(t)});var Gt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var $t="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var Ut="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var qt=at;var Xt=at;var Kt=at;function Qt(){function t(t,e){return e.length-t.length}var e,i,o,n,s,a=[],r=[],l=[],h=[];for(e=0;e<7;e++)i=g([2e3,1]).day(e),o=this.weekdaysMin(i,""),n=this.weekdaysShort(i,""),s=this.weekdays(i,""),a.push(o),r.push(n),l.push(s),h.push(o),h.push(n),h.push(s);for(a.sort(t),r.sort(t),l.sort(t),h.sort(t),e=0;e<7;e++)r[e]=ct(r[e]),l[e]=ct(l[e]),h[e]=ct(h[e]);this._weekdaysRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Zt(){return this.hours()%12||12}function Jt(t,e){j(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function te(t,e){return e._meridiemParse}j("H",["HH",2],0,"hour"),j("h",["hh",2],0,Zt),j("k",["kk",2],0,function(){return this.hours()||24}),j("hmm",0,0,function(){return""+Zt.apply(this)+H(this.minutes(),2)}),j("hmmss",0,0,function(){return""+Zt.apply(this)+H(this.minutes(),2)+H(this.seconds(),2)}),j("Hmm",0,0,function(){return""+this.hours()+H(this.minutes(),2)}),j("Hmmss",0,0,function(){return""+this.hours()+H(this.minutes(),2)+H(this.seconds(),2)}),Jt("a",!0),Jt("A",!1),P("hour","h"),F("hour",13),lt("a",te),lt("A",te),lt("H",K),lt("h",K),lt("k",K),lt("HH",K,$),lt("hh",K,$),lt("kk",K,$),lt("hmm",Q),lt("hmmss",Z),lt("Hmm",Q),lt("Hmmss",Z),dt(["H","HH"],vt),dt(["k","kk"],function(t,e,i){var o=x(t);e[vt]=24===o?0:o}),dt(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),dt(["h","hh"],function(t,e,i){e[vt]=x(t),v(i).bigHour=!0}),dt("hmm",function(t,e,i){var o=t.length-2;e[vt]=x(t.substr(0,o)),e[yt]=x(t.substr(o)),v(i).bigHour=!0}),dt("hmmss",function(t,e,i){var o=t.length-4,n=t.length-2;e[vt]=x(t.substr(0,o)),e[yt]=x(t.substr(o,2)),e[bt]=x(t.substr(n)),v(i).bigHour=!0}),dt("Hmm",function(t,e,i){var o=t.length-2;e[vt]=x(t.substr(0,o)),e[yt]=x(t.substr(o))}),dt("Hmmss",function(t,e,i){var o=t.length-4,n=t.length-2;e[vt]=x(t.substr(0,o)),e[yt]=x(t.substr(o,2)),e[bt]=x(t.substr(n))});var ee,ie=Rt("Hours",!0),oe={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Pt,monthsShort:At,week:{dow:0,doy:6},weekdays:Gt,weekdaysMin:Ut,weekdaysShort:$t,meridiemParse:/[ap]\.?m?\.?/i},ne={},se={};function ae(t){return t?t.toLowerCase().replace("_","-"):t}function re(t){var e=null;if(!ne[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=ee._abbr,require("./locale/"+t),le(e)}catch(t){}return ne[t]}function le(t,e){var i;return t&&((i=h(e)?ce(t):he(t,e))?ee=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),ee._abbr}function he(t,e){if(null===e)return delete ne[t],null;var i,o=oe;if(e.abbr=t,null!=ne[t])R("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),o=ne[t]._config;else if(null!=e.parentLocale)if(null!=ne[e.parentLocale])o=ne[e.parentLocale]._config;else{if(null==(i=re(e.parentLocale)))return se[e.parentLocale]||(se[e.parentLocale]=[]),se[e.parentLocale].push({name:t,config:e}),null;o=i._config}return ne[t]=new M(D(o,e)),se[t]&&se[t].forEach(function(t){he(t.name,t.config)}),le(t),ne[t]}function ce(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return ee;if(!r(t)){if(e=re(t))return e;t=[t]}return function(t){for(var e,i,o,n,s=0;s<t.length;){for(e=(n=ae(t[s]).split("-")).length,i=(i=ae(t[s+1]))?i.split("-"):null;0<e;){if(o=re(n.slice(0,e).join("-")))return o;if(i&&i.length>=e&&a(n,i,!0)>=e-1)break;e--}s++}return ee}(t)}function ue(t){var e,i=t._a;return i&&-2===v(t).overflow&&(e=i[mt]<0||11<i[mt]?mt:i[gt]<1||i[gt]>Mt(i[ft],i[mt])?gt:i[vt]<0||24<i[vt]||24===i[vt]&&(0!==i[yt]||0!==i[bt]||0!==i[wt])?vt:i[yt]<0||59<i[yt]?yt:i[bt]<0||59<i[bt]?bt:i[wt]<0||999<i[wt]?wt:-1,v(t)._overflowDayOfYear&&(e<ft||gt<e)&&(e=gt),v(t)._overflowWeeks&&-1===e&&(e=Ct),v(t)._overflowWeekday&&-1===e&&(e=Et),v(t).overflow=e),t}function de(t,e,i){return null!=t?t:null!=e?e:i}function pe(t){var e,i,o,n,s,a=[];if(!t._d){var r,l;for(r=t,l=new Date(d.now()),o=r._useUTC?[l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()]:[l.getFullYear(),l.getMonth(),l.getDate()],t._w&&null==t._a[gt]&&null==t._a[mt]&&function(t){var e,i,o,n,s,a,r,l;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)s=1,a=4,i=de(e.GG,t._a[ft],jt(ke(),1,4).year),o=de(e.W,1),((n=de(e.E,1))<1||7<n)&&(l=!0);else{s=t._locale._week.dow,a=t._locale._week.doy;var h=jt(ke(),s,a);i=de(e.gg,t._a[ft],h.year),o=de(e.w,h.week),null!=e.d?((n=e.d)<0||6<n)&&(l=!0):null!=e.e?(n=e.e+s,(e.e<0||6<e.e)&&(l=!0)):n=s}o<1||o>Yt(i,s,a)?v(t)._overflowWeeks=!0:null!=l?v(t)._overflowWeekday=!0:(r=Wt(i,o,n,s,a),t._a[ft]=r.year,t._dayOfYear=r.dayOfYear)}(t),null!=t._dayOfYear&&(s=de(t._a[ft],o[ft]),(t._dayOfYear>_t(s)||0===t._dayOfYear)&&(v(t)._overflowDayOfYear=!0),i=Nt(s,0,t._dayOfYear),t._a[mt]=i.getUTCMonth(),t._a[gt]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=o[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[vt]&&0===t._a[yt]&&0===t._a[bt]&&0===t._a[wt]&&(t._nextDay=!0,t._a[vt]=0),t._d=(t._useUTC?Nt:function(t,e,i,o,n,s,a){var r;return t<100&&0<=t?(r=new Date(t+400,e,i,o,n,s,a),isFinite(r.getFullYear())&&r.setFullYear(t)):r=new Date(t,e,i,o,n,s,a),r}).apply(null,a),n=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[vt]=24),t._w&&void 0!==t._w.d&&t._w.d!==n&&(v(t).weekdayMismatch=!0)}}var fe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,me=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ge=/Z|[+-]\d\d(?::?\d\d)?/,ve=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ye=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],be=/^\/?Date\((\-?\d+)/i;function we(t){var e,i,o,n,s,a,r=t._i,l=fe.exec(r)||me.exec(r);if(l){for(v(t).iso=!0,e=0,i=ve.length;e<i;e++)if(ve[e][1].exec(l[1])){n=ve[e][0],o=!1!==ve[e][2];break}if(null==n)return void(t._isValid=!1);if(l[3]){for(e=0,i=ye.length;e<i;e++)if(ye[e][1].exec(l[3])){s=(l[2]||" ")+ye[e][0];break}if(null==s)return void(t._isValid=!1)}if(!o&&null!=s)return void(t._isValid=!1);if(l[4]){if(!ge.exec(l[4]))return void(t._isValid=!1);a="Z"}t._f=n+(s||"")+(a||""),Se(t)}else t._isValid=!1}var Ce=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function Ee(t,e,i,o,n,s){var a=[function(t){var e=parseInt(t,10);{if(e<=49)return 2e3+e;if(e<=999)return 1900+e}return e}(t),At.indexOf(e),parseInt(i,10),parseInt(o,10),parseInt(n,10)];return s&&a.push(parseInt(s,10)),a}var _e={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function xe(t){var e,i,o,n=Ce.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(n){var s=Ee(n[4],n[3],n[2],n[5],n[6],n[7]);if(e=n[1],i=s,o=t,e&&$t.indexOf(e)!==new Date(i[0],i[1],i[2]).getDay()&&(v(o).weekdayMismatch=!0,!(o._isValid=!1)))return;t._a=s,t._tzm=function(t,e,i){if(t)return _e[t];if(e)return 0;var o=parseInt(i,10),n=o%100;return(o-n)/100*60+n}(n[8],n[9],n[10]),t._d=Nt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),v(t).rfc2822=!0}else t._isValid=!1}function Se(t){if(t._f!==d.ISO_8601)if(t._f!==d.RFC_2822){t._a=[],v(t).empty=!0;var e,i,o,n,s,a,r,l,h=""+t._i,c=h.length,u=0;for(o=V(t._f,t._locale).match(z)||[],e=0;e<o.length;e++)n=o[e],(i=(h.match(ht(n,t))||[])[0])&&(0<(s=h.substr(0,h.indexOf(i))).length&&v(t).unusedInput.push(s),h=h.slice(h.indexOf(i)+i.length),u+=i.length),W[n]?(i?v(t).empty=!1:v(t).unusedTokens.push(n),a=n,l=t,null!=(r=i)&&f(ut,a)&&ut[a](r,l._a,l,a)):t._strict&&!i&&v(t).unusedTokens.push(n);v(t).charsLeftOver=c-u,0<h.length&&v(t).unusedInput.push(h),t._a[vt]<=12&&!0===v(t).bigHour&&0<t._a[vt]&&(v(t).bigHour=void 0),v(t).parsedDateParts=t._a.slice(0),v(t).meridiem=t._meridiem,t._a[vt]=function(t,e,i){var o;if(null==i)return e;return null!=t.meridiemHour?t.meridiemHour(e,i):(null!=t.isPM&&((o=t.isPM(i))&&e<12&&(e+=12),o||12!==e||(e=0)),e)}(t._locale,t._a[vt],t._meridiem),pe(t),ue(t)}else xe(t);else we(t)}function Te(t){var e,i,o,n,s=t._i,a=t._f;return t._locale=t._locale||ce(t._l),null===s||void 0===a&&""===s?b({nullInput:!0}):("string"==typeof s&&(t._i=s=t._locale.preparse(s)),E(s)?new C(ue(s)):(u(s)?t._d=s:r(a)?function(t){var e,i,o,n,s;if(0===t._f.length)return v(t).invalidFormat=!0,t._d=new Date(NaN);for(n=0;n<t._f.length;n++)s=0,e=w({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[n],Se(e),y(e)&&(s+=v(e).charsLeftOver,s+=10*v(e).unusedTokens.length,v(e).score=s,(null==o||s<o)&&(o=s,i=e));m(t,i||e)}(t):a?Se(t):h(i=(e=t)._i)?e._d=new Date(d.now()):u(i)?e._d=new Date(i.valueOf()):"string"==typeof i?(o=e,null===(n=be.exec(o._i))?(we(o),!1===o._isValid&&(delete o._isValid,xe(o),!1===o._isValid&&(delete o._isValid,d.createFromInputFallback(o)))):o._d=new Date(+n[1])):r(i)?(e._a=p(i.slice(0),function(t){return parseInt(t,10)}),pe(e)):l(i)?function(t){if(!t._d){var e=I(t._i);t._a=p([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),pe(t)}}(e):c(i)?e._d=new Date(i):d.createFromInputFallback(e),y(t)||(t._d=null),t))}function Re(t,e,i,o,n){var s,a={};return!0!==i&&!1!==i||(o=i,i=void 0),(l(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||r(t)&&0===t.length)&&(t=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=n,a._l=i,a._i=t,a._f=e,a._strict=o,(s=new C(ue(Te(a))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function ke(t,e,i,o){return Re(t,e,i,o,!1)}d.createFromInputFallback=i("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),d.ISO_8601=function(){},d.RFC_2822=function(){};var De=i("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ke.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:b()}),Me=i("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ke.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:b()});function Le(t,e){var i,o;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return ke();for(i=e[0],o=1;o<e.length;++o)e[o].isValid()&&!e[o][t](i)||(i=e[o]);return i}var Pe=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ae(t){var e=I(t),i=e.year||0,o=e.quarter||0,n=e.month||0,s=e.week||e.isoWeek||0,a=e.day||0,r=e.hour||0,l=e.minute||0,h=e.second||0,c=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===St.call(Pe,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,o=0;o<Pe.length;++o)if(t[Pe[o]]){if(i)return!1;parseFloat(t[Pe[o]])!==x(t[Pe[o]])&&(i=!0)}return!0}(e),this._milliseconds=+c+1e3*h+6e4*l+1e3*r*60*60,this._days=+a+7*s,this._months=+n+3*o+12*i,this._data={},this._locale=ce(),this._bubble()}function Ie(t){return t instanceof Ae}function Oe(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Fe(t,i){j(t,0,0,function(){var t=this.utcOffset(),e="+";return t<0&&(t=-t,e="-"),e+H(~~(t/60),2)+i+H(~~t%60,2)})}Fe("Z",":"),Fe("ZZ",""),lt("Z",st),lt("ZZ",st),dt(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=ze(st,t)});var He=/([\+\-]|\d\d)/gi;function ze(t,e){var i=(e||"").match(t);if(null===i)return null;var o=((i[i.length-1]||[])+"").match(He)||["-",0,0],n=60*o[1]+x(o[2]);return 0===n?0:"+"===o[0]?n:-n}function Ne(t,e){var i,o;return e._isUTC?(i=e.clone(),o=(E(t)||u(t)?t.valueOf():ke(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+o),d.updateOffset(i,!1),i):ke(t).local()}function Be(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function We(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}d.updateOffset=function(){};var je=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ye=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ve(t,e){var i,o,n,s=t,a=null;return Ie(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:c(t)?(s={},e?s[e]=t:s.milliseconds=t):(a=je.exec(t))?(i="-"===a[1]?-1:1,s={y:0,d:x(a[gt])*i,h:x(a[vt])*i,m:x(a[yt])*i,s:x(a[bt])*i,ms:x(Oe(1e3*a[wt]))*i}):(a=Ye.exec(t))?(i="-"===a[1]?-1:1,s={y:Ge(a[2],i),M:Ge(a[3],i),w:Ge(a[4],i),d:Ge(a[5],i),h:Ge(a[6],i),m:Ge(a[7],i),s:Ge(a[8],i)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(n=function(t,e){var i;if(!t.isValid()||!e.isValid())return{milliseconds:0,months:0};e=Ne(e,t),t.isBefore(e)?i=$e(t,e):((i=$e(e,t)).milliseconds=-i.milliseconds,i.months=-i.months);return i}(ke(s.from),ke(s.to)),(s={}).ms=n.milliseconds,s.M=n.months),o=new Ae(s),Ie(t)&&f(t,"_locale")&&(o._locale=t._locale),o}function Ge(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function $e(t,e){var i={};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Ue(o,n){return function(t,e){var i;return null===e||isNaN(+e)||(R(n,"moment()."+n+"(period, number) is deprecated. Please use moment()."+n+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=t,t=e,e=i),qe(this,Ve(t="string"==typeof t?+t:t,e),o),this}}function qe(t,e,i,o){var n=e._milliseconds,s=Oe(e._days),a=Oe(e._months);t.isValid()&&(o=null==o||o,a&&It(t,kt(t,"Month")+a*i),s&&Dt(t,"Date",kt(t,"Date")+s*i),n&&t._d.setTime(t._d.valueOf()+n*i),o&&d.updateOffset(t,s||a))}Ve.fn=Ae.prototype,Ve.invalid=function(){return Ve(NaN)};var Xe=Ue(1,"add"),Ke=Ue(-1,"subtract");function Qe(t,e){var i=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(i,"months");return-(i+(e-o<0?(e-o)/(o-t.clone().add(i-1,"months")):(e-o)/(t.clone().add(i+1,"months")-o)))||0}function Ze(t){var e;return void 0===t?this._locale._abbr:(null!=(e=ce(t))&&(this._locale=e),this)}d.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",d.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Je=i("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function ti(){return this._locale}var ei=126227808e5;function ii(t,e){return(t%e+e)%e}function oi(t,e,i){return t<100&&0<=t?new Date(t+400,e,i)-ei:new Date(t,e,i).valueOf()}function ni(t,e,i){return t<100&&0<=t?Date.UTC(t+400,e,i)-ei:Date.UTC(t,e,i)}function si(t,e){j(0,[t,t.length],0,e)}function ai(t,e,i,o,n){var s;return null==t?jt(this,o,n).year:((s=Yt(t,o,n))<e&&(e=s),function(t,e,i,o,n){var s=Wt(t,e,i,o,n),a=Nt(s.year,0,s.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,t,e,i,o,n))}j(0,["gg",2],0,function(){return this.weekYear()%100}),j(0,["GG",2],0,function(){return this.isoWeekYear()%100}),si("gggg","weekYear"),si("ggggg","weekYear"),si("GGGG","isoWeekYear"),si("GGGGG","isoWeekYear"),P("weekYear","gg"),P("isoWeekYear","GG"),F("weekYear",1),F("isoWeekYear",1),lt("G",ot),lt("g",ot),lt("GG",K,$),lt("gg",K,$),lt("GGGG",tt,q),lt("gggg",tt,q),lt("GGGGG",et,X),lt("ggggg",et,X),pt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,o){e[o.substr(0,2)]=x(t)}),pt(["gg","GG"],function(t,e,i,o){e[o]=d.parseTwoDigitYear(t)}),j("Q",0,"Qo","quarter"),P("quarter","Q"),F("quarter",7),lt("Q",G),dt("Q",function(t,e){e[mt]=3*(x(t)-1)}),j("D",["DD",2],"Do","date"),P("date","D"),F("date",9),lt("D",K),lt("DD",K,$),lt("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),dt(["D","DD"],gt),dt("Do",function(t,e){e[gt]=x(t.match(K)[0])});var ri=Rt("Date",!0);j("DDD",["DDDD",3],"DDDo","dayOfYear"),P("dayOfYear","DDD"),F("dayOfYear",4),lt("DDD",J),lt("DDDD",U),dt(["DDD","DDDD"],function(t,e,i){i._dayOfYear=x(t)}),j("m",["mm",2],0,"minute"),P("minute","m"),F("minute",14),lt("m",K),lt("mm",K,$),dt(["m","mm"],yt);var li=Rt("Minutes",!1);j("s",["ss",2],0,"second"),P("second","s"),F("second",15),lt("s",K),lt("ss",K,$),dt(["s","ss"],bt);var hi,ci=Rt("Seconds",!1);for(j("S",0,0,function(){return~~(this.millisecond()/100)}),j(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),j(0,["SSS",3],0,"millisecond"),j(0,["SSSS",4],0,function(){return 10*this.millisecond()}),j(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),j(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),j(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),j(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),j(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),P("millisecond","ms"),F("millisecond",16),lt("S",J,G),lt("SS",J,$),lt("SSS",J,U),hi="SSSS";hi.length<=9;hi+="S")lt(hi,it);function ui(t,e){e[wt]=x(1e3*("0."+t))}for(hi="S";hi.length<=9;hi+="S")dt(hi,ui);var di=Rt("Milliseconds",!1);j("z",0,0,"zoneAbbr"),j("zz",0,0,"zoneName");var pi=C.prototype;function fi(t){return t}pi.add=Xe,pi.calendar=function(t,e){var i=t||ke(),o=Ne(i,this).startOf("day"),n=d.calendarFormat(this,o)||"sameElse",s=e&&(k(e[n])?e[n].call(this,i):e[n]);return this.format(s||this.localeData().calendar(n,this,ke(i)))},pi.clone=function(){return new C(this)},pi.diff=function(t,e,i){var o,n,s;if(!this.isValid())return NaN;if(!(o=Ne(t,this)).isValid())return NaN;switch(n=6e4*(o.utcOffset()-this.utcOffset()),e=A(e)){case"year":s=Qe(this,o)/12;break;case"month":s=Qe(this,o);break;case"quarter":s=Qe(this,o)/3;break;case"second":s=(this-o)/1e3;break;case"minute":s=(this-o)/6e4;break;case"hour":s=(this-o)/36e5;break;case"day":s=(this-o-n)/864e5;break;case"week":s=(this-o-n)/6048e5;break;default:s=this-o}return i?s:_(s)},pi.endOf=function(t){var e;if(void 0===(t=A(t))||"millisecond"===t||!this.isValid())return this;var i=this._isUTC?ni:oi;switch(t){case"year":e=i(this.year()+1,0,1)-1;break;case"quarter":e=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=i(this.year(),this.month()+1,1)-1;break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-ii(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-ii(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-ii(e,1e3)-1}return this._d.setTime(e),d.updateOffset(this,!0),this},pi.format=function(t){t||(t=this.isUtc()?d.defaultFormatUtc:d.defaultFormat);var e=Y(this,t);return this.localeData().postformat(e)},pi.from=function(t,e){return this.isValid()&&(E(t)&&t.isValid()||ke(t).isValid())?Ve({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},pi.fromNow=function(t){return this.from(ke(),t)},pi.to=function(t,e){return this.isValid()&&(E(t)&&t.isValid()||ke(t).isValid())?Ve({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},pi.toNow=function(t){return this.to(ke(),t)},pi.get=function(t){return k(this[t=A(t)])?this[t]():this},pi.invalidAt=function(){return v(this).overflow},pi.isAfter=function(t,e){var i=E(t)?t:ke(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=A(e)||"millisecond")?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())},pi.isBefore=function(t,e){var i=E(t)?t:ke(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=A(e)||"millisecond")?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())},pi.isBetween=function(t,e,i,o){var n=E(t)?t:ke(t),s=E(e)?e:ke(e);return!!(this.isValid()&&n.isValid()&&s.isValid())&&("("===(o=o||"()")[0]?this.isAfter(n,i):!this.isBefore(n,i))&&(")"===o[1]?this.isBefore(s,i):!this.isAfter(s,i))},pi.isSame=function(t,e){var i,o=E(t)?t:ke(t);return!(!this.isValid()||!o.isValid())&&("millisecond"===(e=A(e)||"millisecond")?this.valueOf()===o.valueOf():(i=o.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))},pi.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},pi.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},pi.isValid=function(){return y(this)},pi.lang=Je,pi.locale=Ze,pi.localeData=ti,pi.max=Me,pi.min=De,pi.parsingFlags=function(){return m({},v(this))},pi.set=function(t,e){if("object"==typeof t)for(var i=function(t){var e=[];for(var i in t)e.push({unit:i,priority:O[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}(t=I(t)),o=0;o<i.length;o++)this[i[o].unit](t[i[o].unit]);else if(k(this[t=A(t)]))return this[t](e);return this},pi.startOf=function(t){var e;if(void 0===(t=A(t))||"millisecond"===t||!this.isValid())return this;var i=this._isUTC?ni:oi;switch(t){case"year":e=i(this.year(),0,1);break;case"quarter":e=i(this.year(),this.month()-this.month()%3,1);break;case"month":e=i(this.year(),this.month(),1);break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=i(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=ii(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=ii(e,6e4);break;case"second":e=this._d.valueOf(),e-=ii(e,1e3)}return this._d.setTime(e),d.updateOffset(this,!0),this},pi.subtract=Ke,pi.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},pi.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},pi.toDate=function(){return new Date(this.valueOf())},pi.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return i.year()<0||9999<i.year()?Y(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):k(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",Y(i,"Z")):Y(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},pi.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',o=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=e+'[")]';return this.format(i+o+"-MM-DD[T]HH:mm:ss.SSS"+n)},pi.toJSON=function(){return this.isValid()?this.toISOString():null},pi.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},pi.unix=function(){return Math.floor(this.valueOf()/1e3)},pi.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},pi.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},pi.year=Tt,pi.isLeapYear=function(){return xt(this.year())},pi.weekYear=function(t){return ai.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},pi.isoWeekYear=function(t){return ai.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},pi.quarter=pi.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},pi.month=Ot,pi.daysInMonth=function(){return Mt(this.year(),this.month())},pi.week=pi.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},pi.isoWeek=pi.isoWeeks=function(t){var e=jt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},pi.weeksInYear=function(){var t=this.localeData()._week;return Yt(this.year(),t.dow,t.doy)},pi.isoWeeksInYear=function(){return Yt(this.year(),1,4)},pi.date=ri,pi.day=pi.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e,i,o=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(e=t,i=this.localeData(),t="string"!=typeof e?e:isNaN(e)?"number"==typeof(e=i.weekdaysParse(e))?e:null:parseInt(e,10),this.add(t-o,"d")):o},pi.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},pi.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null==t)return this.day()||7;var e,i,o=(e=t,i=this.localeData(),"string"==typeof e?i.weekdaysParse(e)%7||7:isNaN(e)?null:e);return this.day(this.day()%7?o:o-7)},pi.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},pi.hour=pi.hours=ie,pi.minute=pi.minutes=li,pi.second=pi.seconds=ci,pi.millisecond=pi.milliseconds=di,pi.utcOffset=function(t,e,i){var o,n=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null==t)return this._isUTC?n:Be(this);if("string"==typeof t){if(null===(t=ze(st,t)))return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&e&&(o=Be(this)),this._offset=t,this._isUTC=!0,null!=o&&this.add(o,"m"),n!==t&&(!e||this._changeInProgress?qe(this,Ve(t-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,d.updateOffset(this,!0),this._changeInProgress=null)),this},pi.utc=function(t){return this.utcOffset(0,t)},pi.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Be(this),"m")),this},pi.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=ze(nt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},pi.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?ke(t).utcOffset():0,(this.utcOffset()-t)%60==0)},pi.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},pi.isLocal=function(){return!!this.isValid()&&!this._isUTC},pi.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},pi.isUtc=We,pi.isUTC=We,pi.zoneAbbr=function(){return this._isUTC?"UTC":""},pi.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},pi.dates=i("dates accessor is deprecated. Use date instead.",ri),pi.months=i("months accessor is deprecated. Use month instead",Ot),pi.years=i("years accessor is deprecated. Use year instead",Tt),pi.zone=i("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),pi.isDSTShifted=i("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!h(this._isDSTShifted))return this._isDSTShifted;var t={};if(w(t,this),(t=Te(t))._a){var e=t._isUTC?g(t._a):ke(t._a);this._isDSTShifted=this.isValid()&&0<a(t._a,e.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var mi=M.prototype;function gi(t,e,i,o){var n=ce(),s=g().set(o,e);return n[i](s,t)}function vi(t,e,i){if(c(t)&&(e=t,t=void 0),t=t||"",null!=e)return gi(t,e,i,"month");var o,n=[];for(o=0;o<12;o++)n[o]=gi(t,o,i,"month");return n}function yi(t,e,i,o){e=("boolean"==typeof t?c(e)&&(i=e,e=void 0):(e=t,t=!1,c(i=e)&&(i=e,e=void 0)),e||"");var n,s=ce(),a=t?s._week.dow:0;if(null!=i)return gi(e,(i+a)%7,o,"day");var r=[];for(n=0;n<7;n++)r[n]=gi(e,(n+a)%7,o,"day");return r}mi.calendar=function(t,e,i){var o=this._calendar[t]||this._calendar.sameElse;return k(o)?o.call(e,i):o},mi.longDateFormat=function(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])},mi.invalidDate=function(){return this._invalidDate},mi.ordinal=function(t){return this._ordinal.replace("%d",t)},mi.preparse=fi,mi.postformat=fi,mi.relativeTime=function(t,e,i,o){var n=this._relativeTime[i];return k(n)?n(t,e,i,o):n.replace(/%d/i,t)},mi.pastFuture=function(t,e){var i=this._relativeTime[0<t?"future":"past"];return k(i)?i(e):i.replace(/%s/i,e)},mi.set=function(t){var e,i;for(i in t)k(e=t[i])?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},mi.months=function(t,e){return t?r(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Lt).test(e)?"format":"standalone"][t.month()]:r(this._months)?this._months:this._months.standalone},mi.monthsShort=function(t,e){return t?r(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Lt.test(e)?"format":"standalone"][t.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},mi.monthsParse=function(t,e,i){var o,n,s;if(this._monthsParseExact)return function(t,e,i){var o,n,s,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],o=0;o<12;++o)s=g([2e3,o]),this._shortMonthsParse[o]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[o]=this.months(s,"").toLocaleLowerCase();return i?"MMM"===e?-1!==(n=St.call(this._shortMonthsParse,a))?n:null:-1!==(n=St.call(this._longMonthsParse,a))?n:null:"MMM"===e?-1!==(n=St.call(this._shortMonthsParse,a))?n:-1!==(n=St.call(this._longMonthsParse,a))?n:null:-1!==(n=St.call(this._longMonthsParse,a))?n:-1!==(n=St.call(this._shortMonthsParse,a))?n:null}.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),o=0;o<12;o++){if(n=g([2e3,o]),i&&!this._longMonthsParse[o]&&(this._longMonthsParse[o]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[o]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),i||this._monthsParse[o]||(s="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[o]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[o].test(t))return o;if(i&&"MMM"===e&&this._shortMonthsParse[o].test(t))return o;if(!i&&this._monthsParse[o].test(t))return o}},mi.monthsRegex=function(t){return this._monthsParseExact?(f(this,"_monthsRegex")||zt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(f(this,"_monthsRegex")||(this._monthsRegex=Ht),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},mi.monthsShortRegex=function(t){return this._monthsParseExact?(f(this,"_monthsRegex")||zt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(f(this,"_monthsShortRegex")||(this._monthsShortRegex=Ft),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},mi.week=function(t){return jt(t,this._week.dow,this._week.doy).week},mi.firstDayOfYear=function(){return this._week.doy},mi.firstDayOfWeek=function(){return this._week.dow},mi.weekdays=function(t,e){var i=r(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Vt(i,this._week.dow):t?i[t.day()]:i},mi.weekdaysMin=function(t){return!0===t?Vt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},mi.weekdaysShort=function(t){return!0===t?Vt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},mi.weekdaysParse=function(t,e,i){var o,n,s;if(this._weekdaysParseExact)return function(t,e,i){var o,n,s,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],o=0;o<7;++o)s=g([2e3,1]).day(o),this._minWeekdaysParse[o]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[o]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[o]=this.weekdays(s,"").toLocaleLowerCase();return i?"dddd"===e?-1!==(n=St.call(this._weekdaysParse,a))?n:null:"ddd"===e?-1!==(n=St.call(this._shortWeekdaysParse,a))?n:null:-1!==(n=St.call(this._minWeekdaysParse,a))?n:null:"dddd"===e?-1!==(n=St.call(this._weekdaysParse,a))?n:-1!==(n=St.call(this._shortWeekdaysParse,a))?n:-1!==(n=St.call(this._minWeekdaysParse,a))?n:null:"ddd"===e?-1!==(n=St.call(this._shortWeekdaysParse,a))?n:-1!==(n=St.call(this._weekdaysParse,a))?n:-1!==(n=St.call(this._minWeekdaysParse,a))?n:null:-1!==(n=St.call(this._minWeekdaysParse,a))?n:-1!==(n=St.call(this._weekdaysParse,a))?n:-1!==(n=St.call(this._shortWeekdaysParse,a))?n:null}.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),o=0;o<7;o++){if(n=g([2e3,1]).day(o),i&&!this._fullWeekdaysParse[o]&&(this._fullWeekdaysParse[o]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[o]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[o]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[o]||(s="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[o]=new RegExp(s.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[o].test(t))return o;if(i&&"ddd"===e&&this._shortWeekdaysParse[o].test(t))return o;if(i&&"dd"===e&&this._minWeekdaysParse[o].test(t))return o;if(!i&&this._weekdaysParse[o].test(t))return o}},mi.weekdaysRegex=function(t){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||Qt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(f(this,"_weekdaysRegex")||(this._weekdaysRegex=qt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},mi.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||Qt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(f(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Xt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},mi.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||Qt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(f(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Kt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},mi.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},mi.meridiem=function(t,e,i){return 11<t?i?"pm":"PM":i?"am":"AM"},le("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===x(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),d.lang=i("moment.lang is deprecated. Use moment.locale instead.",le),d.langData=i("moment.langData is deprecated. Use moment.localeData instead.",ce);var bi=Math.abs;function wi(t,e,i,o){var n=Ve(e,i);return t._milliseconds+=o*n._milliseconds,t._days+=o*n._days,t._months+=o*n._months,t._bubble()}function Ci(t){return t<0?Math.floor(t):Math.ceil(t)}function Ei(t){return 4800*t/146097}function _i(t){return 146097*t/4800}function xi(t){return function(){return this.as(t)}}var Si=xi("ms"),Ti=xi("s"),Ri=xi("m"),ki=xi("h"),Di=xi("d"),Mi=xi("w"),Li=xi("M"),Pi=xi("Q"),Ai=xi("y");function Ii(t){return function(){return this.isValid()?this._data[t]:NaN}}var Oi=Ii("milliseconds"),Fi=Ii("seconds"),Hi=Ii("minutes"),zi=Ii("hours"),Ni=Ii("days"),Bi=Ii("months"),Wi=Ii("years");var ji=Math.round,Yi={ss:44,s:45,m:45,h:22,d:26,M:11};var Vi=Math.abs;function Gi(t){return(0<t)-(t<0)||+t}function $i(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i=Vi(this._milliseconds)/1e3,o=Vi(this._days),n=Vi(this._months);e=_((t=_(i/60))/60),i%=60,t%=60;var s=_(n/12),a=n%=12,r=o,l=e,h=t,c=i?i.toFixed(3).replace(/\.?0+$/,""):"",u=this.asSeconds();if(!u)return"P0D";var d=u<0?"-":"",p=Gi(this._months)!==Gi(u)?"-":"",f=Gi(this._days)!==Gi(u)?"-":"",m=Gi(this._milliseconds)!==Gi(u)?"-":"";return d+"P"+(s?p+s+"Y":"")+(a?p+a+"M":"")+(r?f+r+"D":"")+(l||h||c?"T":"")+(l?m+l+"H":"")+(h?m+h+"M":"")+(c?m+c+"S":"")}var Ui=Ae.prototype;return Ui.isValid=function(){return this._isValid},Ui.abs=function(){var t=this._data;return this._milliseconds=bi(this._milliseconds),this._days=bi(this._days),this._months=bi(this._months),t.milliseconds=bi(t.milliseconds),t.seconds=bi(t.seconds),t.minutes=bi(t.minutes),t.hours=bi(t.hours),t.months=bi(t.months),t.years=bi(t.years),this},Ui.add=function(t,e){return wi(this,t,e,1)},Ui.subtract=function(t,e){return wi(this,t,e,-1)},Ui.as=function(t){if(!this.isValid())return NaN;var e,i,o=this._milliseconds;if("month"===(t=A(t))||"quarter"===t||"year"===t)switch(e=this._days+o/864e5,i=this._months+Ei(e),t){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(e=this._days+Math.round(_i(this._months)),t){case"week":return e/7+o/6048e5;case"day":return e+o/864e5;case"hour":return 24*e+o/36e5;case"minute":return 1440*e+o/6e4;case"second":return 86400*e+o/1e3;case"millisecond":return Math.floor(864e5*e)+o;default:throw new Error("Unknown unit "+t)}},Ui.asMilliseconds=Si,Ui.asSeconds=Ti,Ui.asMinutes=Ri,Ui.asHours=ki,Ui.asDays=Di,Ui.asWeeks=Mi,Ui.asMonths=Li,Ui.asQuarters=Pi,Ui.asYears=Ai,Ui.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*x(this._months/12):NaN},Ui._bubble=function(){var t,e,i,o,n,s=this._milliseconds,a=this._days,r=this._months,l=this._data;return 0<=s&&0<=a&&0<=r||s<=0&&a<=0&&r<=0||(s+=864e5*Ci(_i(r)+a),r=a=0),l.milliseconds=s%1e3,t=_(s/1e3),l.seconds=t%60,e=_(t/60),l.minutes=e%60,i=_(e/60),l.hours=i%24,r+=n=_(Ei(a+=_(i/24))),a-=Ci(_i(n)),o=_(r/12),r%=12,l.days=a,l.months=r,l.years=o,this},Ui.clone=function(){return Ve(this)},Ui.get=function(t){return t=A(t),this.isValid()?this[t+"s"]():NaN},Ui.milliseconds=Oi,Ui.seconds=Fi,Ui.minutes=Hi,Ui.hours=zi,Ui.days=Ni,Ui.weeks=function(){return _(this.days()/7)},Ui.months=Bi,Ui.years=Wi,Ui.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e,i,o,n,s,a,r,l,h,c,u,d=this.localeData(),p=(i=!t,o=d,n=Ve(e=this).abs(),s=ji(n.as("s")),a=ji(n.as("m")),r=ji(n.as("h")),l=ji(n.as("d")),h=ji(n.as("M")),c=ji(n.as("y")),(u=s<=Yi.ss&&["s",s]||s<Yi.s&&["ss",s]||a<=1&&["m"]||a<Yi.m&&["mm",a]||r<=1&&["h"]||r<Yi.h&&["hh",r]||l<=1&&["d"]||l<Yi.d&&["dd",l]||h<=1&&["M"]||h<Yi.M&&["MM",h]||c<=1&&["y"]||["yy",c])[2]=i,u[3]=0<+e,u[4]=o,function(t,e,i,o,n){return n.relativeTime(e||1,!!i,t,o)}.apply(null,u));return t&&(p=d.pastFuture(+this,p)),d.postformat(p)},Ui.toISOString=$i,Ui.toString=$i,Ui.toJSON=$i,Ui.locale=Ze,Ui.localeData=ti,Ui.toIsoString=i("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$i),Ui.lang=Je,j("X",0,0,"unix"),j("x",0,0,"valueOf"),lt("x",ot),lt("X",/[+-]?\d+(\.\d{1,3})?/),dt("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),dt("x",function(t,e,i){i._d=new Date(x(t))}),d.version="2.24.0",t=ke,d.fn=pi,d.min=function(){return Le("isBefore",[].slice.call(arguments,0))},d.max=function(){return Le("isAfter",[].slice.call(arguments,0))},d.now=function(){return Date.now?Date.now():+new Date},d.utc=g,d.unix=function(t){return ke(1e3*t)},d.months=function(t,e){return vi(t,e,"months")},d.isDate=u,d.locale=le,d.invalid=b,d.duration=Ve,d.isMoment=E,d.weekdays=function(t,e,i){return yi(t,e,i,"weekdays")},d.parseZone=function(){return ke.apply(null,arguments).parseZone()},d.localeData=ce,d.isDuration=Ie,d.monthsShort=function(t,e){return vi(t,e,"monthsShort")},d.weekdaysMin=function(t,e,i){return yi(t,e,i,"weekdaysMin")},d.defineLocale=he,d.updateLocale=function(t,e){if(null!=e){var i,o,n=oe;null!=(o=re(t))&&(n=o._config),(i=new M(e=D(n,e))).parentLocale=ne[t],ne[t]=i,le(t)}else null!=ne[t]&&(null!=ne[t].parentLocale?ne[t]=ne[t].parentLocale:null!=ne[t]&&delete ne[t]);return ne[t]},d.locales=function(){return o(ne)},d.weekdaysShort=function(t,e,i){return yi(t,e,i,"weekdaysShort")},d.normalizeUnits=A,d.relativeTimeRounding=function(t){return void 0===t?ji:"function"==typeof t&&(ji=t,!0)},d.relativeTimeThreshold=function(t,e){return void 0!==Yi[t]&&(void 0===e?Yi[t]:(Yi[t]=e,"s"===t&&(Yi.ss=e-1),!0))},d.calendarFormat=function(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},d.prototype=pi,d.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},d});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Tabulator=e()}(this,function(){"use strict";Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var o=arguments[1],n=0;n<i;){var s=e[n];if(t.call(o,s,n,e))return n;n++}return-1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var o=arguments[1],n=0;n<i;){var s=e[n];if(t.call(o,s,n,e))return s;n++}}});var t=function(t){this.table=t,this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.rowManager=null,this.columns=[],this.columnsByIndex=[],this.columnsByField=[],this.scrollLeft=0,this.element.insertBefore(this.headersElement,this.element.firstChild)};t.prototype.createHeadersElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-headers"),t},t.prototype.createHeaderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-header"),t},t.prototype.setRowManager=function(t){this.rowManager=t},t.prototype.getElement=function(){return this.element},t.prototype.getHeadersElement=function(){return this.headersElement},t.prototype.scrollHorizontal=function(t){var e=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=t,this.element.style.marginLeft=e<t?-(t-e)+"px":0,this.scrollLeft=t,this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()},t.prototype.setColumns=function(t,e){for(var i=this;i.headersElement.firstChild;)i.headersElement.removeChild(i.headersElement.firstChild);i.columns=[],i.columnsByIndex=[],i.columnsByField=[],i.table.modExists("frozenColumns")&&i.table.modules.frozenColumns.reset(),t.forEach(function(t,e){i._addColumn(t)}),i._reIndexColumns(),i.table.options.responsiveLayout&&i.table.modExists("responsiveLayout",!0)&&i.table.modules.responsiveLayout.initialize(),i.redraw(!0)},t.prototype._addColumn=function(t,e,i){var o=new l(t,this),n=o.getElement(),s=i?this.findColumnIndex(i):i;if(i&&-1<s){var a=this.columns.indexOf(i.getTopColumn()),r=i.getElement();e?(this.columns.splice(a,0,o),r.parentNode.insertBefore(n,r)):(this.columns.splice(a+1,0,o),r.parentNode.insertBefore(n,r.nextSibling))}else e?(this.columns.unshift(o),this.headersElement.insertBefore(o.getElement(),this.headersElement.firstChild)):(this.columns.push(o),this.headersElement.appendChild(o.getElement()));return o},t.prototype.registerColumnField=function(t){t.definition.field&&(this.columnsByField[t.definition.field]=t)},t.prototype.registerColumnPosition=function(t){this.columnsByIndex.push(t)},t.prototype._reIndexColumns=function(){this.columnsByIndex=[],this.columns.forEach(function(t){t.reRegisterPosition()})},t.prototype._verticalAlignHeaders=function(){var e=this,i=0;e.columns.forEach(function(t){var e;t.clearVerticalAlign(),e=t.getHeight(),i<e&&(i=e)}),e.columns.forEach(function(t){t.verticalAlign(e.table.options.columnVertAlign,i)}),e.rowManager.adjustTableSize()},t.prototype.findColumn=function(e){return"object"!=(void 0===e?"undefined":_typeof(e))?this.columnsByField[e]||!1:e instanceof l?e:e instanceof i?e._getSelf()||!1:e instanceof HTMLElement&&this.columns.find(function(t){return t.element===e})||!1},t.prototype.getColumnByField=function(t){return this.columnsByField[t]},t.prototype.getColumnByIndex=function(t){return this.columnsByIndex[t]},t.prototype.getColumns=function(){return this.columns},t.prototype.findColumnIndex=function(e){return this.columnsByIndex.findIndex(function(t){return e===t})},t.prototype.getRealColumns=function(){return this.columnsByIndex},t.prototype.traverse=function(i){this.columnsByIndex.forEach(function(t,e){i(t,e)})},t.prototype.getDefinitions=function(e){var i=[];return this.columnsByIndex.forEach(function(t){(!e||e&&t.visible)&&i.push(t.getDefinition())}),i},t.prototype.getDefinitionTree=function(){var e=[];return this.columns.forEach(function(t){e.push(t.getDefinition(!0))}),e},t.prototype.getComponents=function(t){var e=[];return(t?this.columns:this.columnsByIndex).forEach(function(t){e.push(t.getComponent())}),e},t.prototype.getWidth=function(){var e=0;return this.columnsByIndex.forEach(function(t){t.visible&&(e+=t.getWidth())}),e},t.prototype.moveColumn=function(t,e,i){this._moveColumnInArray(this.columns,t,e,i),this._moveColumnInArray(this.columnsByIndex,t,e,i,!0),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.options.columnMoved&&this.table.options.columnMoved.call(this.table,t.getComponent(),this.table.columnManager.getComponents()),this.table.options.persistentLayout&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.save("columns")},t.prototype._moveColumnInArray=function(t,e,i,o,n){var s,a=t.indexOf(e);-1<a&&(t.splice(a,1),-1<(s=t.indexOf(i))?o&&(s+=1):s=a,t.splice(s,0,e),n&&this.table.rowManager.rows.forEach(function(t){if(t.cells.length){var e=t.cells.splice(a,1)[0];t.cells.splice(s,0,e)}}))},t.prototype.scrollToColumn=function(i,o,n){var s=this,a=0,r=0,l=0,h=i.getElement();return new Promise(function(t,e){if(void 0===o&&(o=s.table.options.scrollToColumnPosition),void 0===n&&(n=s.table.options.scrollToColumnIfVisible),i.visible){switch(o){case"middle":case"center":l=-s.element.clientWidth/2;break;case"right":l=h.clientWidth-s.headersElement.clientWidth}if(!n&&0<(r=h.offsetLeft)&&r+h.offsetWidth<s.element.clientWidth)return!1;a=h.offsetLeft+s.element.scrollLeft+l,a=Math.max(Math.min(a,s.table.rowManager.element.scrollWidth-s.table.rowManager.element.clientWidth),0),s.table.rowManager.scrollHorizontal(a),s.scrollHorizontal(a),t()}else console.warn("Scroll Error - Column not visible"),e("Scroll Error - Column not visible")})},t.prototype.generateCells=function(e){var i=[];return this.columnsByIndex.forEach(function(t){i.push(t.generateCell(e))}),i},t.prototype.getFlexBaseWidth=function(){var n=this,s=n.table.element.clientWidth,a=0;return n.rowManager.element.scrollHeight>n.rowManager.element.clientHeight&&(s-=n.rowManager.element.offsetWidth-n.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(t){var e,i,o;t.visible&&(e=t.definition.width||0,i=void 0===t.minWidth?n.table.options.columnMinWidth:parseInt(t.minWidth),o="string"==typeof e?-1<e.indexOf("%")?s/100*parseInt(e):parseInt(e):e,a+=i<o?o:i)}),a},t.prototype.addColumn=function(t,e,i){var o=this._addColumn(t,e,i);this._reIndexColumns(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),this.redraw(),"fitColumns"!=this.table.modules.layout.getMode()&&o.reinitializeWidth(),this._verticalAlignHeaders(),this.table.rowManager.reinitialize()},t.prototype.deregisterColumn=function(t){var e,i=t.getField();i&&delete this.columnsByField[i],-1<(e=this.columnsByIndex.indexOf(t))&&this.columnsByIndex.splice(e,1),-1<(e=this.columns.indexOf(t))&&this.columns.splice(e,1),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.redraw()},t.prototype.redraw=function(t){t&&(w.prototype.helpers.elVisible(this.element)&&this._verticalAlignHeaders(),this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),"fitColumns"==this.table.modules.layout.getMode()?this.table.modules.layout.layout():t?this.table.modules.layout.layout():this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),t&&(this.table.options.persistentLayout&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.save("columns"),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.redraw()),this.table.footerManager.redraw()};var i=function(t){this._column=t,this.type="ColumnComponent"};i.prototype.getElement=function(){return this._column.getElement()},i.prototype.getDefinition=function(){return this._column.getDefinition()},i.prototype.getField=function(){return this._column.getField()},i.prototype.getCells=function(){var e=[];return this._column.cells.forEach(function(t){e.push(t.getComponent())}),e},i.prototype.getVisibility=function(){return this._column.visible},i.prototype.show=function(){this._column.isGroup?this._column.columns.forEach(function(t){t.show()}):this._column.show()},i.prototype.hide=function(){this._column.isGroup?this._column.columns.forEach(function(t){t.hide()}):this._column.hide()},i.prototype.toggle=function(){this._column.visible?this.hide():this.show()},i.prototype.delete=function(){this._column.delete()},i.prototype.getSubColumns=function(){var e=[];return this._column.columns.length&&this._column.columns.forEach(function(t){e.push(t.getComponent())}),e},i.prototype.getParentColumn=function(){return this._column.parent instanceof l&&this._column.parent.getComponent()},i.prototype._getSelf=function(){return this._column},i.prototype.scrollTo=function(){return this._column.table.columnManager.scrollToColumn(this._column)},i.prototype.getTable=function(){return this._column.table},i.prototype.headerFilterFocus=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterFocus(this._column)},i.prototype.reloadHeaderFilter=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.reloadHeaderFilter(this._column)},i.prototype.setHeaderFilterValue=function(t){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterValue(this._column,t)};var l=function o(t,e){var n=this;this.table=e.table,this.definition=t,this.parent=e,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.setField(this.definition.field),this.modules={},this.cellEvents={cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1},this.width=null,this.minWidth=null,this.widthFixed=!1,this.visible=!0,t.columns?(this.isGroup=!0,t.columns.forEach(function(t,e){var i=new o(t,n);n.attachColumn(i)}),n.checkColumnVisibility()):e.registerColumnField(this),t.rowHandle&&!1!==this.table.options.movableRows&&this.table.modExists("moveRow")&&this.table.modules.moveRow.setHandle(!0),this._buildHeader()};l.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-col"),t.setAttribute("role","columnheader"),t.setAttribute("aria-sort","none"),t},l.prototype.createGroupElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-col-group-cols"),t},l.prototype.setField=function(t){this.field=t,this.fieldStructure=t?this.table.options.nestedFieldSeparator?t.split(this.table.options.nestedFieldSeparator):[t]:[],this.getFieldValue=1<this.fieldStructure.length?this._getNestedData:this._getFlatData,this.setFieldValue=1<this.fieldStructure.length?this._setNesteData:this._setFlatData},l.prototype.registerColumnPosition=function(t){this.parent.registerColumnPosition(t)},l.prototype.registerColumnField=function(t){this.parent.registerColumnField(t)},l.prototype.reRegisterPosition=function(){this.isGroup?this.columns.forEach(function(t){t.reRegisterPosition()}):this.registerColumnPosition(this)},l.prototype.setTooltip=function(){var e=this,i=e.definition,t=i.headerTooltip||!1===i.tooltip?i.headerTooltip:e.table.options.tooltipsHeader;t?!0===t?i.field?e.table.modules.localize.bind("columns|"+i.field,function(t){e.element.setAttribute("title",t||i.title)}):e.element.setAttribute("title",i.title):("function"==typeof t&&!1===(t=t(e.getComponent()))&&(t=""),e.element.setAttribute("title",t)):e.element.setAttribute("title","")},l.prototype._buildHeader=function(){for(var e=this,t=e.definition;e.element.firstChild;)e.element.removeChild(e.element.firstChild);t.headerVertical&&(e.element.classList.add("tabulator-col-vertical"),"flip"===t.headerVertical&&e.element.classList.add("tabulator-col-vertical-flip")),e.contentElement=e._bindEvents(),e.contentElement=e._buildColumnHeaderContent(),e.element.appendChild(e.contentElement),e.isGroup?e._buildGroupHeader():e._buildColumnHeader(),e.setTooltip(),e.table.options.resizableColumns&&e.table.modExists("resizeColumns")&&e.table.modules.resizeColumns.initializeColumn("header",e,e.element),t.headerFilter&&e.table.modExists("filter")&&e.table.modExists("edit")&&(void 0!==t.headerFilterPlaceholder&&t.field&&e.table.modules.localize.setHeaderFilterColumnPlaceholder(t.field,t.headerFilterPlaceholder),e.table.modules.filter.initializeColumn(e)),e.table.modExists("frozenColumns")&&e.table.modules.frozenColumns.initializeColumn(e),e.table.options.movableColumns&&!e.isGroup&&e.table.modExists("moveColumn")&&e.table.modules.moveColumn.initializeColumn(e),(t.topCalc||t.bottomCalc)&&e.table.modExists("columnCalcs")&&e.table.modules.columnCalcs.initializeColumn(e),e.element.addEventListener("mouseenter",function(t){e.setTooltip()})},l.prototype._bindEvents=function(){var e,i,o,n=this,s=n.definition;"function"==typeof s.headerClick&&n.element.addEventListener("click",function(t){s.headerClick(t,n.getComponent())}),"function"==typeof s.headerDblClick&&n.element.addEventListener("dblclick",function(t){s.headerDblClick(t,n.getComponent())}),"function"==typeof s.headerContext&&n.element.addEventListener("contextmenu",function(t){s.headerContext(t,n.getComponent())}),"function"==typeof s.headerTap&&(o=!1,n.element.addEventListener("touchstart",function(t){o=!0}),n.element.addEventListener("touchend",function(t){o&&s.headerTap(t,n.getComponent()),o=!1})),"function"==typeof s.headerDblTap&&(e=null,n.element.addEventListener("touchend",function(t){e?(clearTimeout(e),e=null,s.headerDblTap(t,n.getComponent())):e=setTimeout(function(){clearTimeout(e),e=null},300)})),"function"==typeof s.headerTapHold&&(i=null,n.element.addEventListener("touchstart",function(t){clearTimeout(i),i=setTimeout(function(){clearTimeout(i),i=null,o=!1,s.headerTapHold(t,n.getComponent())},1e3)}),n.element.addEventListener("touchend",function(t){clearTimeout(i),i=null})),"function"==typeof s.cellClick&&(n.cellEvents.cellClick=s.cellClick),"function"==typeof s.cellDblClick&&(n.cellEvents.cellDblClick=s.cellDblClick),"function"==typeof s.cellContext&&(n.cellEvents.cellContext=s.cellContext),"function"==typeof s.cellTap&&(n.cellEvents.cellTap=s.cellTap),"function"==typeof s.cellDblTap&&(n.cellEvents.cellDblTap=s.cellDblTap),"function"==typeof s.cellTapHold&&(n.cellEvents.cellTapHold=s.cellTapHold),"function"==typeof s.cellEdited&&(n.cellEvents.cellEdited=s.cellEdited),"function"==typeof s.cellEditing&&(n.cellEvents.cellEditing=s.cellEditing),"function"==typeof s.cellEditCancelled&&(n.cellEvents.cellEditCancelled=s.cellEditCancelled)},l.prototype._buildColumnHeader=function(){var e=this,t=e.definition,i=e.table;(i.modExists("sort")&&i.modules.sort.initializeColumn(e,e.contentElement),i.modExists("format")&&i.modules.format.initializeColumn(e),void 0!==t.editor&&i.modExists("edit")&&i.modules.edit.initializeColumn(e),void 0!==t.validator&&i.modExists("validate")&&i.modules.validate.initializeColumn(e),i.modExists("mutator")&&i.modules.mutator.initializeColumn(e),i.modExists("accessor")&&i.modules.accessor.initializeColumn(e),_typeof(i.options.responsiveLayout)&&i.modExists("responsiveLayout")&&i.modules.responsiveLayout.initializeColumn(e),void 0!==t.visible&&(t.visible?e.show(!0):e.hide(!0)),t.cssClass)&&t.cssClass.split(" ").forEach(function(t){e.element.classList.add(t)});t.field&&this.element.setAttribute("tabulator-field",t.field),e.setMinWidth(void 0===t.minWidth?e.table.options.columnMinWidth:t.minWidth),e.reinitializeWidth(),e.tooltip=e.definition.tooltip||!1===e.definition.tooltip?e.definition.tooltip:e.table.options.tooltips,e.hozAlign=void 0===e.definition.align?"":e.definition.align},l.prototype._buildColumnHeaderContent=function(){this.definition,this.table;var t=document.createElement("div");return t.classList.add("tabulator-col-content"),t.appendChild(this._buildColumnHeaderTitle()),t},l.prototype._buildColumnHeaderTitle=function(){var e=this,i=e.definition,t=e.table,o=document.createElement("div");if(o.classList.add("tabulator-col-title"),i.editableTitle){var n=document.createElement("input");n.classList.add("tabulator-title-editor"),n.addEventListener("click",function(t){t.stopPropagation(),n.focus()}),n.addEventListener("change",function(){i.title=n.value,t.options.columnTitleChanged.call(e.table,e.getComponent())}),o.appendChild(n),i.field?t.modules.localize.bind("columns|"+i.field,function(t){n.value=t||i.title||"&nbsp"}):n.value=i.title||"&nbsp"}else i.field?t.modules.localize.bind("columns|"+i.field,function(t){e._formatColumnHeaderTitle(o,t||i.title||"&nbsp")}):e._formatColumnHeaderTitle(o,i.title||"&nbsp");return o},l.prototype._formatColumnHeaderTitle=function(t,e){var i,o,n,s;if(this.definition.titleFormatter&&this.table.modExists("format"))switch(i=this.table.modules.format.getFormatter(this.definition.titleFormatter),s={getValue:function(){return e},getElement:function(){return t}},n="function"==typeof(n=this.definition.titleFormatterParams||{})?n():n,void 0===(o=i.call(this.table.modules.format,s,n))?"undefined":_typeof(o)){case"object":o instanceof Node?this.element.appendChild(o):(this.element.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",o));break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=o}else t.innerHTML=e},l.prototype._buildGroupHeader=function(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.element.appendChild(this.groupElement)},l.prototype._getFlatData=function(t){return t[this.field]},l.prototype._getNestedData=function(t){for(var e,i=t,o=this.fieldStructure,n=o.length,s=0;s<n&&(e=i=i[o[s]]);s++);return e},l.prototype._setFlatData=function(t,e){this.field&&(t[this.field]=e)},l.prototype._setNesteData=function(t,e){for(var i=t,o=this.fieldStructure,n=o.length,s=0;s<n;s++)s==n-1?i[o[s]]=e:(i[o[s]]||(i[o[s]]={}),i=i[o[s]])},l.prototype.attachColumn=function(t){this.groupElement?(this.columns.push(t),this.groupElement.appendChild(t.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")},l.prototype.verticalAlign=function(e,t){var i=this.parent.isGroup?this.parent.getGroupElement().clientHeight:t||this.parent.getHeadersElement().clientHeight;this.element.style.height=i+"px",this.isGroup&&(this.groupElement.style.minHeight=i-this.contentElement.offsetHeight+"px"),this.isGroup||"top"===e||(this.element.style.paddingTop="bottom"===e?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(t){t.verticalAlign(e)})},l.prototype.clearVerticalAlign=function(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(t){t.clearVerticalAlign()})},l.prototype.getElement=function(){return this.element},l.prototype.getGroupElement=function(){return this.groupElement},l.prototype.getField=function(){return this.field},l.prototype.getFirstColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this},l.prototype.getLastColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this},l.prototype.getColumns=function(){return this.columns},l.prototype.getCells=function(){return this.cells},l.prototype.getTopColumn=function(){return this.parent.isGroup?this.parent.getTopColumn():this},l.prototype.getDefinition=function(t){var e=[];return this.isGroup&&t&&(this.columns.forEach(function(t){e.push(t.getDefinition(!0))}),this.definition.columns=e),this.definition},l.prototype.checkColumnVisibility=function(){var e=!1;this.columns.forEach(function(t){t.visible&&(e=!0)}),e?(this.show(),this.parent.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1)):this.hide()},l.prototype.show=function(t,e){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(t){t.show()}),this.isGroup||null!==this.width||this.reinitializeWidth(),this.table.columnManager._verticalAlignHeaders(),this.table.options.persistentLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.persistence.save("columns"),!e&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),t||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!0))},l.prototype.hide=function(t,e){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager._verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(t){t.hide()}),this.table.options.persistentLayout&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.save("columns"),!e&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),t||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1))},l.prototype.matchChildWidths=function(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(t){e+=t.getWidth()}),this.contentElement.style.maxWidth=e-1+"px")},l.prototype.setWidth=function(t){this.widthFixed=!0,this.setWidthActual(t)},l.prototype.setWidthActual=function(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.width=e,this.element.style.width=e?e+"px":"",this.isGroup||this.cells.forEach(function(t){t.setWidth(e)}),this.parent.isGroup&&this.parent.matchChildWidths(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()},l.prototype.checkCellHeights=function(){var e=[];this.cells.forEach(function(t){t.row.heightInitialized&&(null!==t.row.getElement().offsetParent?(e.push(t.row),t.row.clearCellHeight()):t.row.heightInitialized=!1)}),e.forEach(function(t){t.calcHeight()}),e.forEach(function(t){t.setCellHeight()})},l.prototype.getWidth=function(){return this.width},l.prototype.getHeight=function(){return this.element.offsetHeight},l.prototype.setMinWidth=function(e){this.minWidth=e,this.element.style.minWidth=e?e+"px":"",this.cells.forEach(function(t){t.setMinWidth(e)})},l.prototype.delete=function(){this.isGroup&&this.columns.forEach(function(t){t.delete()});for(var t=this.cells.length,e=0;e<t;e++)this.cells[0].delete();this.element.parentNode.removeChild(this.element),this.table.columnManager.deregisterColumn(this)},l.prototype.generateCell=function(t){var e=new a(this,t);return this.cells.push(e),e},l.prototype.reinitializeWidth=function(t){this.widthFixed=!1,void 0===this.definition.width||t||this.setWidth(this.definition.width),this.table.modExists("filter")&&this.table.modules.filter.hideHeaderFilterElements(),this.fitToData(),this.table.modExists("filter")&&this.table.modules.filter.showHeaderFilterElements()},l.prototype.fitToData=function(){this.widthFixed||(this.element.style.width="",this.cells.forEach(function(t){t.setWidth("")}));var i=this.element.offsetWidth;this.width&&this.widthFixed||(this.cells.forEach(function(t){var e=t.getWidth();i<e&&(i=e)}),i&&this.setWidthActual(i+1))},l.prototype.deleteCell=function(t){var e=this.cells.indexOf(t);-1<e&&this.cells.splice(e,1)},l.prototype.getComponent=function(){return new i(this)};var o=function(t){this.table=t,this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.columnManager=null,this.height=0,this.firstRender=!1,this.renderMode="classic",this.rows=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]};o.prototype.createHolderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-tableHolder"),t.setAttribute("tabindex",0),t},o.prototype.createTableElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-table"),t},o.prototype.getElement=function(){return this.element},o.prototype.getTableElement=function(){return this.tableElement},o.prototype.getRowPosition=function(t,e){return e?this.activeRows.indexOf(t):this.rows.indexOf(t)},o.prototype.setColumnManager=function(t){this.columnManager=t},o.prototype.initialize=function(){var i=this;i.setRenderMode(),i.element.appendChild(i.tableElement),i.firstRender=!0,i.element.addEventListener("scroll",function(){var t=i.element.scrollLeft;i.scrollLeft!=t&&(i.columnManager.scrollHorizontal(t),i.table.options.groupBy&&i.table.modules.groupRows.scrollHeaders(t),i.table.modExists("columnCalcs")&&i.table.modules.columnCalcs.scrollHorizontal(t)),i.scrollLeft=t}),"virtual"===this.renderMode&&i.element.addEventListener("scroll",function(){var t=i.element.scrollTop,e=i.scrollTop>t;i.scrollTop!=t?(i.scrollTop=t,i.scrollVertical(e),"scroll"==i.table.options.ajaxProgressiveLoad&&i.table.modules.ajax.nextPage(i.element.scrollHeight-i.element.clientHeight-t)):i.scrollTop=t})},o.prototype.findRow=function(e){var i=this;if("object"==(void 0===e?"undefined":_typeof(e))){if(e instanceof c)return e;if(e instanceof n)return e._getSelf()||!1;if(e instanceof HTMLElement)return i.rows.find(function(t){return t.element===e})||!1}else{return null!=e&&(i.rows.find(function(t){return t.data[i.table.options.index]==e})||!1)}return!1},o.prototype.getRowFromPosition=function(t,e){return e?this.activeRows[t]:this.rows[t]},o.prototype.scrollToRow=function(t,i,o){var n,s=this,a=this.getDisplayRows().indexOf(t),r=t.getElement(),l=0;return new Promise(function(t,e){if(-1<a){if(void 0===i&&(i=s.table.options.scrollToRowPosition),void 0===o&&(o=s.table.options.scrollToRowIfVisible),"nearest"===i)switch(s.renderMode){case"classic":n=w.prototype.helpers.elOffset(r).top,i=Math.abs(s.element.scrollTop-n)>Math.abs(s.element.scrollTop+s.element.clientHeight-n)?"bottom":"top";break;case"virtual":i=Math.abs(s.vDomTop-a)>Math.abs(s.vDomBottom-a)?"bottom":"top"}if(!o&&w.prototype.helpers.elVisible(r)&&0<(l=w.prototype.helpers.elOffset(r).top-w.prototype.helpers.elOffset(s.element).top)&&l<s.element.clientHeight-r.offsetHeight)return!1;switch(s.renderMode){case"classic":s.element.scrollTop=w.prototype.helpers.elOffset(r).top-w.prototype.helpers.elOffset(s.element).top+s.element.scrollTop;break;case"virtual":s._virtualRenderFill(a,!0)}switch(i){case"middle":case"center":s.element.scrollTop=s.element.scrollTop-s.element.clientHeight/2;break;case"bottom":s.element.scrollTop=s.element.scrollTop-s.element.clientHeight+r.offsetHeight}t()}else console.warn("Scroll Error - Row not visible"),e("Scroll Error - Row not visible")})},o.prototype.setData=function(i,o){var n=this,s=this;return new Promise(function(t,e){o&&n.getDisplayRows().length?s.table.options.pagination?s._setDataActual(i,!0):n.reRenderInPosition(function(){s._setDataActual(i)}):(n.resetScroll(),n._setDataActual(i)),t()})},o.prototype._setDataActual=function(t,e){var o=this;o.table.options.dataLoading.call(this.table,t),o.rows.forEach(function(t){t.wipe()}),o.rows=[],this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.clear(),Array.isArray(t)?(this.table.modExists("selectRow")&&this.table.modules.selectRow.clearSelectionData(),t.forEach(function(t,e){if(t&&"object"===(void 0===t?"undefined":_typeof(t))){var i=new c(t,o);o.rows.push(i)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",t)}),o.table.options.dataLoaded.call(this.table,t),o.refreshActiveData(!1,!1,e)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",void 0===t?"undefined":_typeof(t),"\nData:     ",t)},o.prototype.deleteRow=function(i){var t=this.rows.indexOf(i),e=this.activeRows.indexOf(i);-1<e&&this.activeRows.splice(e,1),-1<t&&this.rows.splice(t,1),this.setActiveRows(this.activeRows),this.displayRowIterator(function(t){var e=t.indexOf(i);-1<e&&t.splice(e,1)}),this.reRenderInPosition(),this.table.options.rowDeleted.call(this.table,i.getComponent()),this.table.options.dataEdited.call(this.table,this.getData()),this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.updateGroupRows(!0):this.table.options.pagination&&this.table.modExists("page")?this.refreshActiveData(!1,!1,!0):this.table.options.pagination&&this.table.modExists("page")&&this.refreshActiveData("page")},o.prototype.addRow=function(t,e,i,o){var n=this.addRowActual(t,e,i,o);return this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowAdd",n,{data:t,pos:e,index:i}),n},o.prototype.addRows=function(i,o,n){var s=this,a=this,r=[];return new Promise(function(t,e){o=s.findAddRowPos(o),Array.isArray(i)||(i=[i]),i.length-1,(void 0===n&&o||void 0!==n&&!o)&&i.reverse(),i.forEach(function(t,e){var i=a.addRow(t,o,n,!0);r.push(i)}),s.table.options.groupBy&&s.table.modExists("groupRows")?s.table.modules.groupRows.updateGroupRows(!0):s.table.options.pagination&&s.table.modExists("page")?s.refreshActiveData(!1,!1,!0):s.reRenderInPosition(),s.table.modExists("columnCalcs")&&s.table.modules.columnCalcs.recalc(s.table.rowManager.activeRows),t(r)})},o.prototype.findAddRowPos=function(t){return void 0===t&&(t=this.table.options.addRowPos),"pos"===t&&(t=!0),"bottom"===t&&(t=!1),t},o.prototype.addRowActual=function(t,e,i,o){var n,s=t instanceof c?t:new c(t||{},this),a=this.findAddRowPos(e);if(!i&&this.table.options.pagination&&"page"==this.table.options.paginationAddRow&&(n=this.getDisplayRows(),a?n.length?i=n[0]:this.activeRows.length&&(i=this.activeRows[this.activeRows.length-1],a=!1):n.length&&(i=n[n.length-1],a=!(n.length<this.table.modules.page.getPageSize()))),i&&(i=this.findRow(i)),this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.assignRowToGroup(s);var r=s.getGroup().rows;1<r.length&&(!i||i&&-1==r.indexOf(i)?a?r[0]!==s&&(i=r[0],this._moveRowInArray(s.getGroup().rows,s,i,a)):r[r.length-1]!==s&&(i=r[r.length-1],this._moveRowInArray(s.getGroup().rows,s,i,a)):this._moveRowInArray(s.getGroup().rows,s,i,a))}if(i){var l=this.rows.indexOf(i),h=this.activeRows.indexOf(i);this.displayRowIterator(function(t){var e=t.indexOf(i);-1<e&&t.splice(a?e:e+1,0,s)}),-1<h&&this.activeRows.splice(a?h:h+1,0,s),-1<l&&this.rows.splice(a?l:l+1,0,s)}else a?(this.displayRowIterator(function(t){t.unshift(s)}),this.activeRows.unshift(s),this.rows.unshift(s)):(this.displayRowIterator(function(t){t.push(s)}),this.activeRows.push(s),this.rows.push(s));return this.setActiveRows(this.activeRows),this.table.options.rowAdded.call(this.table,s.getComponent()),this.table.options.dataEdited.call(this.table,this.getData()),o||this.reRenderInPosition(),s},o.prototype.moveRow=function(t,e,i){this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowMove",t,{pos:this.getRowPosition(t),to:e,after:i}),this.moveRowActual(t,e,i),this.table.options.rowMoved.call(this.table,t.getComponent())},o.prototype.moveRowActual=function(e,i,o){var n=this;if(this._moveRowInArray(this.rows,e,i,o),this._moveRowInArray(this.activeRows,e,i,o),this.displayRowIterator(function(t){n._moveRowInArray(t,e,i,o)}),this.table.options.groupBy&&this.table.modExists("groupRows")){var t=i.getGroup(),s=e.getGroup();t===s?this._moveRowInArray(t.rows,e,i,o):(s&&s.removeRow(e),t.insertRow(e,i,o))}},o.prototype._moveRowInArray=function(t,e,i,o){var n,s,a;if(e!==i&&(-1<(n=t.indexOf(e))&&(t.splice(n,1),-1<(s=t.indexOf(i))?o?t.splice(s+1,0,e):t.splice(s,0,e):t.splice(n,0,e)),t===this.getDisplayRows())){a=n<s?s:n+1;for(var r=n<s?n:s;r<=a;r++)t[r]&&this.styleRow(t[r],r)}},o.prototype.clearData=function(){this.setData([])},o.prototype.getRowIndex=function(t){return this.findRowIndex(t,this.rows)},o.prototype.getDisplayRowIndex=function(t){var e=this.getDisplayRows().indexOf(t);return-1<e&&e},o.prototype.nextDisplayRow=function(t,e){var i=this.getDisplayRowIndex(t),o=!1;return!1!==i&&i<this.displayRowsCount-1&&(o=this.getDisplayRows()[i+1]),!o||o instanceof c&&"row"==o.type?o:this.nextDisplayRow(o,e)},o.prototype.prevDisplayRow=function(t,e){var i=this.getDisplayRowIndex(t),o=!1;return i&&(o=this.getDisplayRows()[i-1]),!o||o instanceof c&&"row"==o.type?o:this.prevDisplayRow(o,e)},o.prototype.findRowIndex=function(t,e){var i;return!!((t=this.findRow(t))&&-1<(i=e.indexOf(t)))&&i},o.prototype.getData=function(t,e){var i=[];return(t?this.activeRows:this.rows).forEach(function(t){i.push(t.getData(e||"data"))}),i},o.prototype.getHtml=function(t){var e=this.getData(t),n=[],i="",s="";return this.table.columnManager.getColumns().forEach(function(t){var e=t.getDefinition();t.visible&&!e.hideInHtml&&(i+="<th>"+(e.title||"")+"</th>",n.push(t))}),e.forEach(function(i){var o="";n.forEach(function(t){var e=t.getFieldValue(i);null==e&&(e=":"),o+="<td>"+e+"</td>"}),s+="<tr>"+o+"</tr>"}),"<table>\n\n\t\t\t<thead>\n\n\t\t\t<tr>"+i+"</tr>\n\n\t\t\t</thead>\n\n\t\t\t<tbody>"+s+"</tbody>\n\n\t\t\t</table>"},o.prototype.getComponents=function(t){var e=[];return(t?this.activeRows:this.rows).forEach(function(t){e.push(t.getComponent())}),e},o.prototype.getDataCount=function(t){return t?this.rows.length:this.activeRows.length},o.prototype._genRemoteRequest=function(){var e=this,t=e.table,i=t.options,o={};if(t.modExists("page")){if(i.ajaxSorting){var n=e.table.modules.sort.getSort();n.forEach(function(t){delete t.column}),o[e.table.modules.page.paginationDataSentNames.sorters]=n}if(i.ajaxFiltering){var s=e.table.modules.filter.getFilters(!0,!0);o[e.table.modules.page.paginationDataSentNames.filters]=s}e.table.modules.ajax.setParams(o,!0)}t.modules.ajax.sendRequest().then(function(t){e.setData(t)}).catch(function(t){})},o.prototype.filterRefresh=function(){var t=this.table,e=t.options,i=this.scrollLeft;e.ajaxFiltering?"remote"==e.pagination&&t.modExists("page")?(t.modules.page.reset(!0),t.modules.page.setPage(1).then(function(){}).catch(function(){})):e.ajaxProgressiveLoad?t.modules.ajax.loadData().then(function(){}).catch(function(){}):this._genRemoteRequest():this.refreshActiveData("filter"),this.scrollHorizontal(i)},o.prototype.sorterRefresh=function(){var t=this.table,e=this.table.options,i=this.scrollLeft;e.ajaxSorting?("remote"==e.pagination||e.progressiveLoad)&&t.modExists("page")?(t.modules.page.reset(!0),t.modules.page.setPage(1).then(function(){}).catch(function(){})):e.ajaxProgressiveLoad?t.modules.ajax.loadData().then(function(){}).catch(function(){}):this._genRemoteRequest():this.refreshActiveData("sort"),this.scrollHorizontal(i)},o.prototype.scrollHorizontal=function(t){this.scrollLeft=t,this.element.scrollLeft=t,this.table.options.groupBy&&this.table.modules.groupRows.scrollHeaders(t),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.scrollHorizontal(t)},o.prototype.refreshActiveData=function(t,e,i){var o,n=this,s=this.table;switch(t||(t="all"),s.options.selectable&&!s.options.selectablePersistence&&s.modExists("selectRow")&&s.modules.selectRow.deselectRows(),t){case"all":case"filter":e?e=!1:s.modExists("filter")?n.setActiveRows(s.modules.filter.filter(n.rows)):n.setActiveRows(n.rows.slice(0));case"sort":e?e=!1:s.modExists("sort")&&s.modules.sort.sort();case"display":this.resetDisplayRows();case"freeze":e?e=!1:this.table.modExists("frozenRows")&&s.modules.frozenRows.isFrozen()&&(s.modules.frozenRows.getDisplayIndex()||s.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex()),o=s.modules.frozenRows.getDisplayIndex(),!0!==(o=n.setDisplayRows(s.modules.frozenRows.getRows(this.getDisplayRows(o-1)),o))&&s.modules.frozenRows.setDisplayIndex(o));case"group":e?e=!1:s.options.groupBy&&s.modExists("groupRows")&&(s.modules.groupRows.getDisplayIndex()||s.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex()),o=s.modules.groupRows.getDisplayIndex(),!0!==(o=n.setDisplayRows(s.modules.groupRows.getRows(this.getDisplayRows(o-1)),o))&&s.modules.groupRows.setDisplayIndex(o));case"tree":e?e=!1:s.options.dataTree&&s.modExists("dataTree")&&(s.modules.dataTree.getDisplayIndex()||s.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex()),o=s.modules.dataTree.getDisplayIndex(),!0!==(o=n.setDisplayRows(s.modules.dataTree.getRows(this.getDisplayRows(o-1)),o))&&s.modules.dataTree.setDisplayIndex(o)),s.options.pagination&&s.modExists("page")&&!i&&"local"==s.modules.page.getMode()&&s.modules.page.reset();case"page":e?e=!1:s.options.pagination&&s.modExists("page")&&(s.modules.page.getDisplayIndex()||s.modules.page.setDisplayIndex(this.getNextDisplayIndex()),o=s.modules.page.getDisplayIndex(),"local"==s.modules.page.getMode()&&s.modules.page.setMaxRows(this.getDisplayRows(o-1).length),!0!==(o=n.setDisplayRows(s.modules.page.getRows(this.getDisplayRows(o-1)),o))&&s.modules.page.setDisplayIndex(o))}w.prototype.helpers.elVisible(n.element)&&(i?n.reRenderInPosition():(n.renderTable(),s.options.layoutColumnsOnNewData&&n.table.columnManager.redraw(!0))),s.modExists("columnCalcs")&&s.modules.columnCalcs.recalc(this.activeRows)},o.prototype.setActiveRows=function(t){this.activeRows=t,this.activeRowsCount=this.activeRows.length},o.prototype.resetDisplayRows=function(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length,this.table.modExists("frozenRows")&&this.table.modules.frozenRows.setDisplayIndex(0),this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.setDisplayIndex(0),this.table.options.pagination&&this.table.modExists("page")&&this.table.modules.page.setDisplayIndex(0)},o.prototype.getNextDisplayIndex=function(){return this.displayRows.length},o.prototype.setDisplayRows=function(t,e){var i=!0;return i=e&&void 0!==this.displayRows[e]?(this.displayRows[e]=t,!0):(this.displayRows.push(t),e=this.displayRows.length-1),e==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),i},o.prototype.getDisplayRows=function(t){return void 0===t?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[t]||[]},o.prototype.displayRowIterator=function(t){this.displayRows.forEach(t),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length},o.prototype.getRows=function(){return this.rows},o.prototype.reRenderInPosition=function(t){if("virtual"==this.getRenderMode()){for(var e=this.element.scrollTop,i=!1,o=!1,n=this.scrollLeft,s=this.getDisplayRows(),a=this.vDomTop;a<=this.vDomBottom;a++)if(s[a]){var r=e-s[a].getElement().offsetTop;if(!(!1===o||Math.abs(r)<o))break;o=r,i=a}t&&t(),this._virtualRenderFill(!1===i?this.displayRowsCount-1:i,!0,o||0),this.scrollHorizontal(n)}else this.renderTable()},o.prototype.setRenderMode=function(){(this.table.element.clientHeight||this.table.options.height)&&this.table.options.virtualDom?this.renderMode="virtual":this.renderMode="classic"},o.prototype.getRenderMode=function(){return this.renderMode},o.prototype.renderTable=function(){var t=this;switch(t.table.options.renderStarted.call(this.table),t.element.scrollTop=0,t.renderMode){case"classic":t._simpleRender();break;case"virtual":t._virtualRenderFill()}t.firstRender&&(t.displayRowsCount?(t.firstRender=!1,t.table.modules.layout.layout()):t.renderEmptyScroll()),t.table.modExists("frozenColumns")&&t.table.modules.frozenColumns.layout(),t.displayRowsCount||t.table.options.placeholder&&(this.renderMode&&t.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),t.getElement().appendChild(t.table.options.placeholder)),t.table.options.renderComplete.call(this.table)},o.prototype._simpleRender=function(){this._clearVirtualDom(),this.displayRowsCount?this.checkClassicModeGroupHeaderWidth():this.renderEmptyScroll()},o.prototype.checkClassicModeGroupHeaderWidth=function(){var i=this,o=this.tableElement,n=!0;i.getDisplayRows().forEach(function(t,e){i.styleRow(t,e),o.appendChild(t.getElement()),t.initialize(!0),"group"!==t.type&&(n=!1)}),o.style.minWidth=n?i.table.columnManager.getWidth()+"px":""},o.prototype.renderEmptyScroll=function(){this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px",this.tableElement.style.minHeight="1px",this.tableElement.style.visibility="hidden"},o.prototype._clearVirtualDom=function(){var t=this.tableElement;for(this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);t.firstChild;)t.removeChild(t.firstChild);t.style.paddingTop="",t.style.paddingBottom="",t.style.minWidth="",t.style.minHeight="",t.style.visibility="",this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0},o.prototype.styleRow=function(t,e){var i=t.getElement();e%2?(i.classList.add("tabulator-row-even"),i.classList.remove("tabulator-row-odd")):(i.classList.add("tabulator-row-odd"),i.classList.remove("tabulator-row-even"))},o.prototype._virtualRenderFill=function(t,e,i){var o=this,n=o.tableElement,s=o.element,a=0,r=0,l=0,h=0,c=!0,u=o.getDisplayRows();if(i=i||0,t=t||0){for(;n.firstChild;)n.removeChild(n.firstChild);var d=(o.displayRowsCount-t+1)*o.vDomRowHeight;d<o.height&&(t-=Math.ceil((o.height-d)/o.vDomRowHeight))<0&&(t=0),t-=a=Math.min(Math.max(Math.floor(o.vDomWindowBuffer/o.vDomRowHeight),o.vDomWindowMinMarginRows),t)}else o._clearVirtualDom();if(o.displayRowsCount&&w.prototype.helpers.elVisible(o.element)){for(o.vDomTop=t,o.vDomBottom=t-1;(r<=o.height+o.vDomWindowBuffer||h<o.vDomWindowMinTotalRows)&&o.vDomBottom<o.displayRowsCount-1;){var p=o.vDomBottom+1,f=u[p];o.styleRow(f,p),n.appendChild(f.getElement()),f.initialized?f.heightInitialized||f.normalizeHeight(!0):f.initialize(!0),h<a?l+=f.getHeight():r+=f.getHeight(),"group"!==f.type&&(c=!1),o.vDomBottom++,h++}t?(o.vDomTopPad=e?o.vDomRowHeight*this.vDomTop+i:o.scrollTop-l,o.vDomBottomPad=o.vDomBottom==o.displayRowsCount-1?0:Math.max(o.vDomScrollHeight-o.vDomTopPad-r-l,0)):(this.vDomTopPad=0,o.vDomRowHeight=Math.floor((r+l)/h),o.vDomBottomPad=o.vDomRowHeight*(o.displayRowsCount-o.vDomBottom-1),o.vDomScrollHeight=l+r+o.vDomBottomPad-o.height),n.style.paddingTop=o.vDomTopPad+"px",n.style.paddingBottom=o.vDomBottomPad+"px",e&&(this.scrollTop=o.vDomTopPad+l+i-(this.element.scrollWidth>this.element.clientWidth?this.element.offsetHeight-this.element.clientHeight:0)),this.scrollTop=Math.min(this.scrollTop,this.element.scrollHeight-this.height),this.element.scrollWidth>this.element.offsetWidth&&e&&(this.scrollTop+=this.element.offsetHeight-this.element.clientHeight),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,s.scrollTop=this.scrollTop,n.style.minWidth=c?o.table.columnManager.getWidth()+"px":"",o.table.options.groupBy&&"fitDataFill"!=o.table.modules.layout.getMode()&&o.displayRowsCount==o.table.modules.groupRows.countGroups()&&(o.tableElement.style.minWidth=o.table.columnManager.getWidth())}else this.renderEmptyScroll()},o.prototype.scrollVertical=function(t){var e=this.scrollTop-this.vDomScrollPosTop,i=this.scrollTop-this.vDomScrollPosBottom,o=2*this.vDomWindowBuffer;if(o<-e||o<i){var n=this.scrollLeft;this._virtualRenderFill(Math.floor(this.element.scrollTop/this.element.scrollHeight*this.displayRowsCount)),this.scrollHorizontal(n)}else t?(e<0&&this._addTopRow(-e),e<0&&this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer&&this._removeBottomRow(-i)):(0<=e&&this.scrollTop>this.vDomWindowBuffer&&this._removeTopRow(e),0<=i&&this._addBottomRow(i))},o.prototype._addTopRow=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.tableElement,o=this.getDisplayRows();if(this.vDomTop){var n=this.vDomTop-1,s=o[n],a=s.getHeight()||this.vDomRowHeight;a<=t&&(this.styleRow(s,n),i.insertBefore(s.getElement(),i.firstChild),s.initialized&&s.heightInitialized||(this.vDomTopNewRows.push(s),s.heightInitialized||s.clearCellHeight()),s.initialize(),this.vDomTopPad-=a,this.vDomTopPad<0&&(this.vDomTopPad=n*this.vDomRowHeight),n||(this.vDomTopPad=0),i.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=a,this.vDomTop--),t=-(this.scrollTop-this.vDomScrollPosTop),e<this.vDomMaxRenderChain&&this.vDomTop&&t>=(o[this.vDomTop-1].getHeight()||this.vDomRowHeight)?this._addTopRow(t,e+1):this._quickNormalizeRowHeight(this.vDomTopNewRows)}},o.prototype._removeTopRow=function(t){var e=this.tableElement,i=this.getDisplayRows()[this.vDomTop],o=i.getHeight()||this.vDomRowHeight;if(o<=t){var n=i.getElement();n.parentNode.removeChild(n),this.vDomTopPad+=o,e.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?o:o+this.vDomWindowBuffer,this.vDomTop++,t=this.scrollTop-this.vDomScrollPosTop,this._removeTopRow(t)}},o.prototype._addBottomRow=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.tableElement,o=this.getDisplayRows();if(this.vDomBottom<this.displayRowsCount-1){var n=this.vDomBottom+1,s=o[n],a=s.getHeight()||this.vDomRowHeight;a<=t&&(this.styleRow(s,n),i.appendChild(s.getElement()),s.initialized&&s.heightInitialized||(this.vDomBottomNewRows.push(s),s.heightInitialized||s.clearCellHeight()),s.initialize(),this.vDomBottomPad-=a,(this.vDomBottomPad<0||n==this.displayRowsCount-1)&&(this.vDomBottomPad=0),i.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=a,this.vDomBottom++),t=this.scrollTop-this.vDomScrollPosBottom,e<this.vDomMaxRenderChain&&this.vDomBottom<this.displayRowsCount-1&&t>=(o[this.vDomBottom+1].getHeight()||this.vDomRowHeight)?this._addBottomRow(t,e+1):this._quickNormalizeRowHeight(this.vDomBottomNewRows)}},o.prototype._removeBottomRow=function(t){var e=this.tableElement,i=this.getDisplayRows()[this.vDomBottom],o=i.getHeight()||this.vDomRowHeight;if(o<=t){var n=i.getElement();n.parentNode&&n.parentNode.removeChild(n),this.vDomBottomPad+=o,this.vDomBottomPad<0&&(this.vDomBottomPad=0),e.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=o,this.vDomBottom--,t=-(this.scrollTop-this.vDomScrollPosBottom),this._removeBottomRow(t)}},o.prototype._quickNormalizeRowHeight=function(t){t.forEach(function(t){t.calcHeight()}),t.forEach(function(t){t.setCellHeight()}),t.length=0},o.prototype.normalizeHeight=function(){this.activeRows.forEach(function(t){t.normalizeHeight()})},o.prototype.adjustTableSize=function(){if("virtual"===this.renderMode){this.height=this.element.clientHeight,this.vDomWindowBuffer=this.table.options.virtualDomBuffer||this.height;var t=this.columnManager.getElement().offsetHeight+(this.table.footerManager&&!this.table.footerManager.external?this.table.footerManager.getElement().offsetHeight:0);this.element.style.minHeight="calc(100% - "+t+"px)",this.element.style.height="calc(100% - "+t+"px)",this.element.style.maxHeight="calc(100% - "+t+"px)"}},o.prototype.reinitialize=function(){this.rows.forEach(function(t){t.reinitialize()})},o.prototype.redraw=function(t){var e=this.scrollLeft;this.adjustTableSize(),t?this.renderTable():("classic"==self.renderMode?self.table.options.groupBy?self.refreshActiveData("group",!1,!1):this._simpleRender():(this.reRenderInPosition(),this.scrollHorizontal(e)),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))},o.prototype.resetScroll=function(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var t=document.createEvent("Event");t.initEvent("scroll",!1,!0),this.element.dispatchEvent(t)}else this.element.dispatchEvent(new Event("scroll"))};var n=function(t){this._row=t};n.prototype.getData=function(t){return this._row.getData(t)},n.prototype.getElement=function(){return this._row.getElement()},n.prototype.getCells=function(){var e=[];return this._row.getCells().forEach(function(t){e.push(t.getComponent())}),e},n.prototype.getCell=function(t){var e=this._row.getCell(t);return!!e&&e.getComponent()},n.prototype.getIndex=function(){return this._row.getData("data")[this._row.table.options.index]},n.prototype.getPosition=function(t){return this._row.table.rowManager.getRowPosition(this._row,t)},n.prototype.delete=function(){return this._row.delete()},n.prototype.scrollTo=function(){return this._row.table.rowManager.scrollToRow(this._row)},n.prototype.update=function(t){return this._row.updateData(t)},n.prototype.normalizeHeight=function(){this._row.normalizeHeight(!0)},n.prototype.select=function(){this._row.table.modules.selectRow.selectRows(this._row)},n.prototype.deselect=function(){this._row.table.modules.selectRow.deselectRows(this._row)},n.prototype.toggleSelect=function(){this._row.table.modules.selectRow.toggleRow(this._row)},n.prototype.isSelected=function(){return this._row.table.modules.selectRow.isRowSelected(this._row)},n.prototype._getSelf=function(){return this._row},n.prototype.freeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.freezeRow(this._row)},n.prototype.unfreeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.unfreezeRow(this._row)},n.prototype.treeCollapse=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.collapseRow(this._row)},n.prototype.treeExpand=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.expandRow(this._row)},n.prototype.treeToggle=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.toggleRow(this._row)},n.prototype.getTreeParent=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeParent(this._row)},n.prototype.getTreeChildren=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeChildren(this._row)},n.prototype.reformat=function(){return this._row.reinitialize()},n.prototype.getGroup=function(){return this._row.getGroup().getComponent()},n.prototype.getTable=function(){return this._row.table},n.prototype.getNextRow=function(){return this._row.nextRow()},n.prototype.getPrevRow=function(){return this._row.prevRow()};var c=function(t,e){this.table=e.table,this.parent=e,this.data={},this.type="row",this.element=this.createElement(),this.modules={},this.cells=[],this.height=0,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.setData(t),this.generateElement()};c.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.setAttribute("role","row"),t},c.prototype.getElement=function(){return this.element},c.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},c.prototype.generateElement=function(){var e,i,o,n=this;!1!==n.table.options.selectable&&n.table.modExists("selectRow")&&n.table.modules.selectRow.initializeRow(this),!1!==n.table.options.movableRows&&n.table.modExists("moveRow")&&n.table.modules.moveRow.initializeRow(this),!1!==n.table.options.dataTree&&n.table.modExists("dataTree")&&n.table.modules.dataTree.initializeRow(this),n.table.options.rowClick&&n.element.addEventListener("click",function(t){n.table.options.rowClick(t,n.getComponent())}),n.table.options.rowDblClick&&n.element.addEventListener("dblclick",function(t){n.table.options.rowDblClick(t,n.getComponent())}),n.table.options.rowContext&&n.element.addEventListener("contextmenu",function(t){n.table.options.rowContext(t,n.getComponent())}),n.table.options.rowTap&&(o=!1,n.element.addEventListener("touchstart",function(t){o=!0}),n.element.addEventListener("touchend",function(t){o&&n.table.options.rowTap(t,n.getComponent()),o=!1})),n.table.options.rowDblTap&&(e=null,n.element.addEventListener("touchend",function(t){e?(clearTimeout(e),e=null,n.table.options.rowDblTap(t,n.getComponent())):e=setTimeout(function(){clearTimeout(e),e=null},300)})),n.table.options.rowTapHold&&(i=null,n.element.addEventListener("touchstart",function(t){clearTimeout(i),i=setTimeout(function(){clearTimeout(i),i=null,o=!1,n.table.options.rowTapHold(t,n.getComponent())},1e3)}),n.element.addEventListener("touchend",function(t){clearTimeout(i),i=null}))},c.prototype.generateCells=function(){this.cells=this.table.columnManager.generateCells(this)},c.prototype.initialize=function(t){var e=this;if(!e.initialized||t){for(e.deleteCells();e.element.firstChild;)e.element.removeChild(e.element.firstChild);this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutRow(this),this.generateCells(),e.cells.forEach(function(t){e.element.appendChild(t.getElement()),t.cellRendered()}),t&&e.normalizeHeight(),e.table.options.dataTree&&e.table.modExists("dataTree")&&e.table.modules.dataTree.layoutRow(this),"collapse"===e.table.options.responsiveLayout&&e.table.modExists("responsiveLayout")&&e.table.modules.responsiveLayout.layoutRow(this),e.table.options.rowFormatter&&e.table.options.rowFormatter(e.getComponent()),e.table.options.resizableRows&&e.table.modExists("resizeRows")&&e.table.modules.resizeRows.initializeRow(e),e.initialized=!0}},c.prototype.reinitializeHeight=function(){this.heightInitialized=!1,null!==this.element.offsetParent&&this.normalizeHeight(!0)},c.prototype.reinitialize=function(){this.initialized=!1,this.heightInitialized=!1,this.height=0,null!==this.element.offsetParent&&this.initialize(!0)},c.prototype.calcHeight=function(){var i=0,t=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(t){var e=t.getHeight();i<e&&(i=e)}),this.height=Math.max(i,t),this.outerHeight=this.element.offsetHeight},c.prototype.setCellHeight=function(){var e=this.height;this.cells.forEach(function(t){t.setHeight(e)}),this.heightInitialized=!0},c.prototype.clearCellHeight=function(){this.cells.forEach(function(t){t.clearHeight()})},c.prototype.normalizeHeight=function(t){t&&this.clearCellHeight(),this.calcHeight(),this.setCellHeight()},c.prototype.setHeight=function(t){this.height=t,this.setCellHeight()},c.prototype.setHeight=function(t,e){(this.height!=t||e)&&(this.height=t,this.setCellHeight(),this.outerHeight=this.element.offsetHeight)},c.prototype.getHeight=function(){return this.outerHeight},c.prototype.getWidth=function(){return this.element.offsetWidth},c.prototype.deleteCell=function(t){var e=this.cells.indexOf(t);-1<e&&this.cells.splice(e,1)},c.prototype.setData=function(t){this.table.modExists("mutator")?this.data=this.table.modules.mutator.transformRow(t,"data"):this.data=t},c.prototype.updateData=function(n){var s=this,a=this,r=w.prototype.helpers.elVisible(this.element);return new Promise(function(t,e){for(var i in"string"==typeof n&&(n=JSON.parse(n)),a.table.modExists("mutator")&&(n=a.table.modules.mutator.transformRow(n,"data",!0)),n)a.data[i]=n[i];for(var i in n){var o=s.getCell(i);o&&o.getValue()!=n[i]&&(o.setValueProcessData(n[i]),r&&o.cellRendered())}r?(a.normalizeHeight(),a.table.options.rowFormatter&&a.table.options.rowFormatter(a.getComponent())):(s.initialized=!1,s.height=0),a.table.options.rowUpdated.call(s.table,a.getComponent()),t()})},c.prototype.getData=function(t){return t?this.table.modExists("accessor")?this.table.modules.accessor.transformRow(this.data,t):void 0:this.data},c.prototype.getCell=function(e){return e=this.table.columnManager.findColumn(e),this.cells.find(function(t){return t.column===e})},c.prototype.getCellIndex=function(e){return this.cells.findIndex(function(t){return t===e})},c.prototype.findNextEditableCell=function(t){var e=!1;if(t<this.cells.length-1)for(var i=t+1;i<this.cells.length;i++){var o=this.cells[i];if(o.column.modules.edit&&w.prototype.helpers.elVisible(o.getElement())){var n=!0;if("function"==typeof o.column.modules.edit.check&&(n=o.column.modules.edit.check(o.getComponent())),n){e=o;break}}}return e},c.prototype.findPrevEditableCell=function(t){var e=!1;if(0<t)for(var i=t-1;0<=i;i--){var o=this.cells[i],n=!0;if(o.column.modules.edit&&w.prototype.helpers.elVisible(o.getElement())&&("function"==typeof o.column.modules.edit.check&&(n=o.column.modules.edit.check(o.getComponent())),n)){e=o;break}}return e},c.prototype.getCells=function(){return this.cells},c.prototype.nextRow=function(){var t=this.table.rowManager.nextDisplayRow(this,!0);return!!t&&t.getComponent()},c.prototype.prevRow=function(){var t=this.table.rowManager.prevDisplayRow(this,!0);return!!t&&t.getComponent()},c.prototype.delete=function(){var o=this;return new Promise(function(t,e){var i=o.table.rowManager.getRowIndex(o);o.deleteActual(),o.table.options.history&&o.table.modExists("history")&&(i&&(i=o.table.rowManager.rows[i-1]),o.table.modules.history.action("rowDelete",o,{data:o.getData(),pos:!i,index:i})),t()})},c.prototype.deleteActual=function(){this.table.rowManager.getRowIndex(this);this.table.modExists("selectRow")&&this.table.modules.selectRow._deselectRow(this,!0),this.table.rowManager.deleteRow(this),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.modules.group&&this.modules.group.removeRow(this),this.table.modExists("columnCalcs")&&(this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.columnCalcs.recalcRowGroup(this):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows))},c.prototype.deleteCells=function(){for(var t=this.cells.length,e=0;e<t;e++)this.cells[0].delete()},c.prototype.wipe=function(){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)},c.prototype.getGroup=function(){return this.modules.group||!1},c.prototype.getComponent=function(){return new n(this)};var s=function(t){this._cell=t};s.prototype.getValue=function(){return this._cell.getValue()},s.prototype.getOldValue=function(){return this._cell.getOldValue()},s.prototype.getElement=function(){return this._cell.getElement()},s.prototype.getRow=function(){return this._cell.row.getComponent()},s.prototype.getData=function(){return this._cell.row.getData()},s.prototype.getField=function(){return this._cell.column.getField()},s.prototype.getColumn=function(){return this._cell.column.getComponent()},s.prototype.setValue=function(t,e){void 0===e&&(e=!0),this._cell.setValue(t,e)},s.prototype.restoreOldValue=function(){this._cell.setValueActual(this._cell.getOldValue())},s.prototype.edit=function(t){return this._cell.edit(t)},s.prototype.cancelEdit=function(){this._cell.cancelEdit()},s.prototype.nav=function(){return this._cell.nav()},s.prototype.checkHeight=function(){this._cell.checkHeight()},s.prototype.getTable=function(){return this._cell.table},s.prototype._getSelf=function(){return this._cell};var a=function(t,e){this.table=t.table,this.column=t,this.row=e,this.element=null,this.value=null,this.oldValue=null,this.height=null,this.width=null,this.minWidth=null,this.build()};a.prototype.build=function(){this.generateElement(),this.setWidth(this.column.width),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data))},a.prototype.generateElement=function(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element},a.prototype._configureCell=function(){var i,o,n,s=this,a=s.column.cellEvents,e=s.element,t=this.column.getField();(e.style.textAlign=s.column.hozAlign,t&&e.setAttribute("tabulator-field",t),s.column.definition.cssClass)&&s.column.definition.cssClass.split(" ").forEach(function(t){e.classList.add(t)});(a.cellClick||s.table.options.cellClick)&&s.element.addEventListener("click",function(t){var e=s.getComponent();a.cellClick&&a.cellClick.call(s.table,t,e),s.table.options.cellClick&&s.table.options.cellClick.call(s.table,t,e)}),(a.cellDblClick||this.table.options.cellDblClick)&&e.addEventListener("dblclick",function(t){var e=s.getComponent();a.cellDblClick&&a.cellDblClick.call(s.table,t,e),s.table.options.cellDblClick&&s.table.options.cellDblClick.call(s.table,t,e)}),(a.cellContext||this.table.options.cellContext)&&e.addEventListener("contextmenu",function(t){var e=s.getComponent();a.cellContext&&a.cellContext.call(s.table,t,e),s.table.options.cellContext&&s.table.options.cellContext.call(s.table,t,e)}),"hover"===this.table.options.tooltipGenerationMode&&e.addEventListener("mouseenter",function(t){s._generateTooltip()}),(a.cellTap||this.table.options.cellTap)&&(n=!1,e.addEventListener("touchstart",function(t){n=!0}),e.addEventListener("touchend",function(t){if(n){var e=s.getComponent();a.cellTap&&a.cellTap.call(s.table,t,e),s.table.options.cellTap&&s.table.options.cellTap.call(s.table,t,e)}n=!1})),(a.cellDblTap||this.table.options.cellDblTap)&&(i=null,e.addEventListener("touchend",function(t){if(i){clearTimeout(i),i=null;var e=s.getComponent();a.cellDblTap&&a.cellDblTap.call(s.table,t,e),s.table.options.cellDblTap&&s.table.options.cellDblTap.call(s.table,t,e)}else i=setTimeout(function(){clearTimeout(i),i=null},300)})),(a.cellTapHold||this.table.options.cellTapHold)&&(o=null,e.addEventListener("touchstart",function(e){clearTimeout(o),o=setTimeout(function(){clearTimeout(o),o=null,n=!1;var t=s.getComponent();a.cellTapHold&&a.cellTapHold.call(s.table,e,t),s.table.options.cellTapHold&&s.table.options.cellTapHold.call(s.table,e,t)},1e3)}),e.addEventListener("touchend",function(t){clearTimeout(o),o=null})),s.column.modules.edit&&s.table.modules.edit.bindEditor(s),s.column.definition.rowHandle&&!1!==s.table.options.movableRows&&s.table.modExists("moveRow")&&s.table.modules.moveRow.initializeCell(s),s.column.visible||s.hide()},a.prototype._generateContents=function(){var t;switch(void 0===(t=this.table.modExists("format")?this.table.modules.format.formatValue(this):this.element.innerHTML=this.value)?"undefined":_typeof(t)){case"object":if(t instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(t)}else this.element.innerHTML="",null!=t&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",t);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=t}},a.prototype.cellRendered=function(){this.table.modExists("format")&&this.table.modules.format.cellRendered&&this.table.modules.format.cellRendered(this)},a.prototype._generateTooltip=function(){var t=this.column.tooltip;t?(!0===t?t=this.value:"function"==typeof t&&!1===(t=t(this.getComponent()))&&(t=""),void 0===t&&(t=""),this.element.setAttribute("title",t)):this.element.setAttribute("title","")},a.prototype.getElement=function(){return this.element},a.prototype.getValue=function(){return this.value},a.prototype.getOldValue=function(){return this.oldValue},a.prototype.setValue=function(t,e){var i;this.setValueProcessData(t,e)&&(this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("cellEdit",this,{oldValue:this.oldValue,newValue:this.value}),i=this.getComponent(),this.column.cellEvents.cellEdited&&this.column.cellEvents.cellEdited.call(this.table,i),this.table.options.cellEdited.call(this.table,i),this.table.options.dataEdited.call(this.table,this.table.rowManager.getData())),this.table.modExists("columnCalcs")&&(this.column.definition.topCalc||this.column.definition.bottomCalc)&&(this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.columnCalcs.recalcRowGroup(this.row):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows))},a.prototype.setValueProcessData=function(t,e){var i=!1;return this.value!=t&&(i=!0,e&&this.column.modules.mutate&&(t=this.table.modules.mutator.transformCell(this,t))),this.setValueActual(t),i},a.prototype.setValueActual=function(t){this.oldValue=this.value,this.value=t,this.column.setFieldValue(this.row.data,t),this._generateContents(),this._generateTooltip(),this.table.options.resizableColumns&&this.table.modExists("resizeColumns")&&this.table.modules.resizeColumns.initializeColumn("cell",this.column,this.element),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutElement(this.element,this.column)},a.prototype.setWidth=function(t){this.width=t,this.element.style.width=t?t+"px":""},a.prototype.getWidth=function(){return this.width||this.element.offsetWidth},a.prototype.setMinWidth=function(t){this.minWidth=t,this.element.style.minWidth=t?t+"px":""},a.prototype.checkHeight=function(){this.row.reinitializeHeight()},a.prototype.clearHeight=function(){this.element.style.height="",this.height=null},a.prototype.setHeight=function(t){this.height=t,this.element.style.height=t?t+"px":""},a.prototype.getHeight=function(){return this.height||this.element.offsetHeight},a.prototype.show=function(){this.element.style.display=""},a.prototype.hide=function(){this.element.style.display="none"},a.prototype.edit=function(t){if(this.table.modExists("edit",!0))return this.table.modules.edit.editCell(this,t)},a.prototype.cancelEdit=function(){if(this.table.modExists("edit",!0)){var t=this.table.modules.edit.getCurrentCell();t&&t._getSelf()===this?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}},a.prototype.delete=function(){this.element.parentNode.removeChild(this.element),this.column.deleteCell(this),this.row.deleteCell(this)},a.prototype.nav=function(){var i=this,t=!1,e=this.row.getCellIndex(this);return{next:function(){var t,e=this.right();return!!e||!(!(t=i.table.rowManager.nextDisplayRow(i.row,!0))||!(e=t.findNextEditableCell(-1)))&&(e.edit(),!0)},prev:function(){var t,e=this.left();return!!e||!(!(t=i.table.rowManager.prevDisplayRow(i.row,!0))||!(e=t.findPrevEditableCell(t.cells.length)))&&(e.edit(),!0)},left:function(){return!!(t=i.row.findPrevEditableCell(e))&&(t.edit(),!0)},right:function(){return!!(t=i.row.findNextEditableCell(e))&&(t.edit(),!0)},up:function(){var t=i.table.rowManager.prevDisplayRow(i.row,!0);t&&t.cells[e].edit()},down:function(){var t=i.table.rowManager.nextDisplayRow(i.row,!0);t&&t.cells[e].edit()}}},a.prototype.getIndex=function(){this.row.getCellIndex(this)},a.prototype.getComponent=function(){return new s(this)};var r=function(t){this.table=t,this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this._initialize()};r.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-footer"),t},r.prototype._initialize=function(t){if(this.table.options.footerElement)switch(_typeof(this.table.options.footerElement)){case"string":"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement}},r.prototype.getElement=function(){return this.element},r.prototype.append=function(t,e){this.activate(e),this.element.appendChild(t),this.table.rowManager.adjustTableSize()},r.prototype.prepend=function(t,e){this.activate(e),this.element.insertBefore(t,this.element.firstChild),this.table.rowManager.adjustTableSize()},r.prototype.remove=function(t){t.parentNode.removeChild(t),this.deactivate()},r.prototype.deactivate=function(t){this.element.firstChild&&!t||(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)},r.prototype.activate=function(t){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),t&&this.links.push(t)},r.prototype.redraw=function(){this.links.forEach(function(t){t.footerRedraw()})};var w=function t(e,i){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.browser="",this.browserSlow=!1,this.modules={},this.initializeElement(e),this.initializeOptions(i||{}),this._create(),t.prototype.comms.register(this)};w.prototype.defaultOptions={height:!1,layout:"fitData",layoutColumnsOnNewData:!1,columnMinWidth:40,columnVertAlign:"top",resizableColumns:!0,resizableRows:!1,autoResize:!0,columns:[],data:[],nestedFieldSeparator:".",tooltips:!1,tooltipsHeader:!1,tooltipGenerationMode:"load",initialSort:!1,initialFilter:!1,columnHeaderSortMulti:!0,sortOrderReverse:!1,footerElement:!1,index:"id",keybindings:[],clipboard:!1,clipboardCopyStyled:!0,clipboardCopySelector:"active",clipboardCopyFormatter:"table",clipboardPasteParser:"table",clipboardPasteAction:"insert",clipboardCopyConfig:!1,clipboardCopied:function(){},clipboardPasted:function(){},clipboardPasteError:function(){},downloadDataFormatter:!1,downloadReady:function(t,e){return e},downloadComplete:!1,downloadConfig:!1,dataTree:!1,dataTreeBranchElement:!0,dataTreeChildIndent:9,dataTreeChildField:"_children",dataTreeCollapseElement:!1,dataTreeExpandElement:!1,dataTreeStartExpanded:!1,dataTreeRowExpanded:function(){},dataTreeRowCollapsed:function(){},addRowPos:"bottom",selectable:"highlight",selectableRangeMode:"drag",selectableRollingSelection:!0,selectablePersistence:!0,selectableCheck:function(t,e){return!0},headerFilterPlaceholder:!1,history:!1,locale:!1,langs:{},virtualDom:!0,persistentLayout:!1,persistentSort:!1,persistentFilter:!1,persistenceID:"",persistenceMode:!0,responsiveLayout:!1,responsiveLayoutCollapseStartOpen:!0,responsiveLayoutCollapseUseFormatters:!0,responsiveLayoutCollapseFormatter:!1,pagination:!1,paginationSize:!1,paginationButtonCount:5,paginationElement:!1,paginationDataSent:{},paginationDataReceived:{},paginationAddRow:"page",ajaxURL:!1,ajaxURLGenerator:!1,ajaxParams:{},ajaxConfig:"get",ajaxContentType:"form",ajaxRequestFunc:!1,ajaxLoader:!0,ajaxLoaderLoading:!1,ajaxLoaderError:!1,ajaxFiltering:!1,ajaxSorting:!1,ajaxProgressiveLoad:!1,ajaxProgressiveLoadDelay:0,ajaxProgressiveLoadScrollMargin:0,groupBy:!1,groupStartOpen:!0,groupValues:!1,groupHeader:!1,movableColumns:!1,movableRows:!1,movableRowsConnectedTables:!1,movableRowsSender:!1,movableRowsReceiver:"insert",movableRowsSendingStart:function(){},movableRowsSent:function(){},movableRowsSentFailed:function(){},movableRowsSendingStop:function(){},movableRowsReceivingStart:function(){},movableRowsReceived:function(){},movableRowsReceivedFailed:function(){},movableRowsReceivingStop:function(){},scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,placeholder:!1,tableBuilding:function(){},tableBuilt:function(){},renderStarted:function(){},renderComplete:function(){},rowClick:!1,rowDblClick:!1,rowContext:!1,rowTap:!1,rowDblTap:!1,rowTapHold:!1,rowAdded:function(){},rowDeleted:function(){},rowMoved:function(){},rowUpdated:function(){},rowSelectionChanged:function(){},rowSelected:function(){},rowDeselected:function(){},rowResized:function(){},cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellEditing:function(){},cellEdited:function(){},cellEditCancelled:function(){},columnMoved:!1,columnResized:function(){},columnTitleChanged:function(){},columnVisibilityChanged:function(){},htmlImporting:function(){},htmlImported:function(){},dataLoading:function(){},dataLoaded:function(){},dataEdited:function(){},ajaxRequesting:function(){},ajaxResponse:!1,ajaxError:function(){},dataFiltering:!1,dataFiltered:!1,dataSorting:function(){},dataSorted:function(){},groupToggleElement:"arrow",groupClosedShowCalcs:!1,dataGrouping:function(){},dataGrouped:!1,groupVisibilityChanged:function(){},groupClick:!1,groupDblClick:!1,groupContext:!1,groupTap:!1,groupDblTap:!1,groupTapHold:!1,columnCalcs:!0,pageLoaded:function(){},localized:function(){},validationFailed:function(){},historyUndo:function(){},historyRedo:function(){}},w.prototype.initializeOptions=function(t){for(var e in this.defaultOptions)e in t?this.options[e]=t[e]:Array.isArray(this.defaultOptions[e])?this.options[e]=[]:"object"===_typeof(this.defaultOptions[e])?this.options[e]={}:this.options[e]=this.defaultOptions[e]},w.prototype.initializeElement=function(t){return t instanceof HTMLElement?(this.element=t,!0):"string"==typeof t?(this.element=document.querySelector(t),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",t),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",t),!1)},w.prototype._mapDepricatedFunctionality=function(){},w.prototype._create=function(){this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.bindModules(),"TABLE"===this.element.tagName&&this.modExists("htmlTableImport",!0)&&this.modules.htmlTableImport.parseTable(),this.columnManager=new t(this),this.rowManager=new o(this),this.footerManager=new r(this),this.columnManager.setRowManager(this.rowManager),this.rowManager.setColumnManager(this.columnManager),this._buildElement(),this._loadInitialData()},w.prototype._clearObjectPointers=function(){this.options.columns=this.options.columns.slice(0),this.options.data=this.options.data.slice(0)},w.prototype._buildElement=function(){var t=this.element,e=this.modules,i=this.options;for(i.tableBuilding.call(this),t.classList.add("tabulator"),t.setAttribute("role","grid");t.firstChild;)t.removeChild(t.firstChild);for(var o in i.height&&(i.height=isNaN(i.height)?i.height:i.height+"px",t.style.height=i.height),this.rowManager.initialize(),this._detectBrowser(),this.modExists("layout",!0)&&e.layout.initialize(i.layout),!1!==i.headerFilterPlaceholder&&e.localize.setHeaderFilterPlaceholder(i.headerFilterPlaceholder),i.langs)e.localize.installLang(o,i.langs[o]);if(e.localize.setLocale(i.locale),"string"==typeof i.placeholder){var n=document.createElement("div");n.classList.add("tabulator-placeholder");var s=document.createElement("span");s.innerHTML=i.placeholder,n.appendChild(s),i.placeholder=n}if(t.appendChild(this.columnManager.getElement()),t.appendChild(this.rowManager.getElement()),i.footerElement&&this.footerManager.activate(),i.dataTree&&this.modExists("dataTree",!0)&&e.dataTree.initialize(),(i.persistentLayout||i.persistentSort||i.persistentFilter)&&this.modExists("persistence",!0)&&e.persistence.initialize(i.persistenceMode,i.persistenceID),i.persistentLayout&&this.modExists("persistence",!0)&&(i.columns=e.persistence.load("columns",i.columns)),i.movableRows&&this.modExists("moveRow")&&e.moveRow.initialize(),this.modExists("columnCalcs")&&e.columnCalcs.initialize(),this.columnManager.setColumns(i.columns),this.modExists("frozenRows")&&this.modules.frozenRows.initialize(),(i.persistentSort||i.initialSort)&&this.modExists("sort",!0)){var a=[];i.persistentSort&&this.modExists("persistence",!0)?!1===(a=e.persistence.load("sort"))&&i.initialSort&&(a=i.initialSort):i.initialSort&&(a=i.initialSort),e.sort.setSort(a)}if((i.persistentFilter||i.initialFilter)&&this.modExists("filter",!0)){var r=[];i.persistentFilter&&this.modExists("persistence",!0)?!1===(r=e.persistence.load("filter"))&&i.initialFilter&&(r=i.initialFilter):i.initialFilter&&(r=i.initialFilter),e.filter.setFilter(r)}this.modExists("ajax")&&e.ajax.initialize(),i.pagination&&this.modExists("page",!0)&&e.page.initialize(),i.groupBy&&this.modExists("groupRows",!0)&&e.groupRows.initialize(),this.modExists("keybindings")&&e.keybindings.initialize(),this.modExists("selectRow")&&e.selectRow.clearSelectionData(!0),i.autoResize&&this.modExists("resizeTable")&&e.resizeTable.initialize(),this.modExists("clipboard")&&e.clipboard.initialize(),i.tableBuilt.call(this)},w.prototype._loadInitialData=function(){var t=this;t.options.pagination&&t.modExists("page")?(t.modules.page.reset(!0),"local"==t.options.pagination?t.options.data.length?t.rowManager.setData(t.options.data):(t.options.ajaxURL||t.options.ajaxURLGenerator)&&t.modExists("ajax")?t.modules.ajax.loadData().then(function(){}).catch(function(){}):t.rowManager.setData(t.options.data):t.options.ajaxURL?t.modules.page.setPage(1).then(function(){}).catch(function(){}):t.rowManager.setData([])):t.options.data.length?t.rowManager.setData(t.options.data):(t.options.ajaxURL||t.options.ajaxURLGenerator)&&t.modExists("ajax")?t.modules.ajax.loadData().then(function(){}).catch(function(){}):t.rowManager.setData(t.options.data)},w.prototype.destroy=function(){var t=this.element;for(w.prototype.comms.deregister(this),this.rowManager.rows.forEach(function(t){t.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[],this.options.autoResize&&this.modExists("resizeTable")&&this.modules.resizeTable.clearBindings(),this.modExists("keybindings")&&this.modules.keybindings.clearBindings();t.firstChild;)t.removeChild(t.firstChild);t.classList.remove("tabulator")},w.prototype._detectBrowser=function(){var t=navigator.userAgent;-1<t.indexOf("Trident")?(this.browser="ie",this.browserSlow=!0):-1<t.indexOf("Edge")?(this.browser="edge",this.browserSlow=!0):(-1<t.indexOf("Firefox")?this.browser="firefox":this.browser="other",this.browserSlow=!1)},w.prototype.setData=function(t,e,i){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(t,e,i)},w.prototype._setData=function(t,e,i,o){var n=this;return"string"!=typeof t?t?n.rowManager.setData(t,o):n.modExists("ajax")&&(n.modules.ajax.getUrl||n.options.ajaxURLGenerator)?"remote"==n.options.pagination&&n.modExists("page",!0)?(n.modules.page.reset(!0),n.modules.page.setPage(1)):n.modules.ajax.loadData(o):n.rowManager.setData([],o):0==t.indexOf("{")||0==t.indexOf("[")?n.rowManager.setData(JSON.parse(t),o):n.modExists("ajax",!0)?(e&&n.modules.ajax.setParams(e),i&&n.modules.ajax.setConfig(i),n.modules.ajax.setUrl(t),"remote"==n.options.pagination&&n.modExists("page",!0)?(n.modules.page.reset(!0),n.modules.page.setPage(1)):n.modules.ajax.loadData(o)):void 0},w.prototype.clearData=function(){this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this.rowManager.clearData()},w.prototype.getData=function(t){return this.rowManager.getData(t)},w.prototype.getDataCount=function(t){return this.rowManager.getDataCount(t)},w.prototype.searchRows=function(t,e,i){if(this.modExists("filter",!0))return this.modules.filter.search("rows",t,e,i)},w.prototype.searchData=function(t,e,i){if(this.modExists("filter",!0))return this.modules.filter.search("data",t,e,i)},w.prototype.getHtml=function(t){return this.rowManager.getHtml(t)},w.prototype.getAjaxUrl=function(){if(this.modExists("ajax",!0))return this.modules.ajax.getUrl()},w.prototype.replaceData=function(t,e,i){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(t,e,i,!0)},w.prototype.updateData=function(e){var o=this,n=this,s=0;return new Promise(function(i,t){o.modExists("ajax")&&o.modules.ajax.blockActiveRequest(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(function(t){var e=n.rowManager.findRow(t[n.options.index]);e&&(s++,e.updateData(t).then(function(){--s||i()}))}):(console.warn("Update Error - No data provided"),t("Update Error - No data provided"))})},w.prototype.addData=function(e,o,n){var s=this;return new Promise(function(i,t){s.modExists("ajax")&&s.modules.ajax.blockActiveRequest(),"string"==typeof e&&(e=JSON.parse(e)),e?s.rowManager.addRows(e,o,n).then(function(t){var e=[];t.forEach(function(t){e.push(t.getComponent())}),i(e)}):(console.warn("Update Error - No data provided"),t("Update Error - No data provided"))})},w.prototype.updateOrAddData=function(e){var o=this,n=this,s=[],a=0;return new Promise(function(i,t){o.modExists("ajax")&&o.modules.ajax.blockActiveRequest(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(function(t){var e=n.rowManager.findRow(t[n.options.index]);a++,e?e.updateData(t).then(function(){a--,s.push(e.getComponent()),a||i(s)}):n.rowManager.addRows(t).then(function(t){a--,s.push(t[0].getComponent()),a||i(s)})}):(console.warn("Update Error - No data provided"),t("Update Error - No data provided"))})},w.prototype.getRow=function(t){var e=this.rowManager.findRow(t);return e?e.getComponent():(console.warn("Find Error - No matching row found:",t),!1)},w.prototype.getRowFromPosition=function(t,e){var i=this.rowManager.getRowFromPosition(t,e);return i?i.getComponent():(console.warn("Find Error - No matching row found:",t),!1)},w.prototype.deleteRow=function(o){var n=this;return new Promise(function(t,e){var i=n.rowManager.findRow(o);i?i.delete().then(function(){t()}).catch(function(t){e(t)}):(console.warn("Delete Error - No matching row found:",o),e("Delete Error - No matching row found"))})},w.prototype.addRow=function(i,o,n){var s=this;return new Promise(function(e,t){"string"==typeof i&&(i=JSON.parse(i)),s.rowManager.addRows(i,o,n).then(function(t){s.modExists("columnCalcs")&&s.modules.columnCalcs.recalc(s.rowManager.activeRows),e(t[0].getComponent())})})},w.prototype.updateOrAddRow=function(o,n){var s=this;return new Promise(function(e,i){var t=s.rowManager.findRow(o);"string"==typeof n&&(n=JSON.parse(n)),t?t.updateData(n).then(function(){s.modExists("columnCalcs")&&s.modules.columnCalcs.recalc(s.rowManager.activeRows),e(t.getComponent())}).catch(function(t){i(t)}):t=s.rowManager.addRows(n).then(function(t){s.modExists("columnCalcs")&&s.modules.columnCalcs.recalc(s.rowManager.activeRows),e(t[0].getComponent())}).catch(function(t){i(t)})})},w.prototype.updateRow=function(o,n){var s=this;return new Promise(function(t,e){var i=s.rowManager.findRow(o);"string"==typeof n&&(n=JSON.parse(n)),i?i.updateData(n).then(function(){t(i.getComponent())}).catch(function(t){e(t)}):(console.warn("Update Error - No matching row found:",o),e("Update Error - No matching row found"))})},w.prototype.scrollToRow=function(o,n,s){var a=this;return new Promise(function(t,e){var i=a.rowManager.findRow(o);i?a.rowManager.scrollToRow(i,n,s).then(function(){t()}).catch(function(t){e(t)}):(console.warn("Scroll Error - No matching row found:",o),e("Scroll Error - No matching row found"))})},w.prototype.getRows=function(t){return this.rowManager.getComponents(t)},w.prototype.getRowPosition=function(t,e){var i=this.rowManager.findRow(t);return i?this.rowManager.getRowPosition(i,e):(console.warn("Position Error - No matching row found:",t),!1)},w.prototype.copyToClipboard=function(t,e,i,o){this.modExists("clipboard",!0)&&this.modules.clipboard.copy(t,e,i,o)},w.prototype.setColumns=function(t){this.columnManager.setColumns(t)},w.prototype.getColumns=function(t){return this.columnManager.getComponents(t)},w.prototype.getColumn=function(t){var e=this.columnManager.findColumn(t);return e?e.getComponent():(console.warn("Find Error - No matching column found:",t),!1)},w.prototype.getColumnDefinitions=function(){return this.columnManager.getDefinitionTree()},w.prototype.getColumnLayout=function(){if(this.modExists("persistence",!0))return this.modules.persistence.parseColumns(this.columnManager.getColumns())},w.prototype.setColumnLayout=function(t){return!!this.modExists("persistence",!0)&&(this.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns,t)),!0)},w.prototype.showColumn=function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Show Error - No matching column found:",t),!1;e.show(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update()},w.prototype.hideColumn=function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Hide Error - No matching column found:",t),!1;e.hide(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update()},w.prototype.toggleColumn=function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Visibility Toggle Error - No matching column found:",t),!1;e.visible?e.hide():e.show()},w.prototype.addColumn=function(t,e,i){var o=this.columnManager.findColumn(i);this.columnManager.addColumn(t,e,o)},w.prototype.deleteColumn=function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Delete Error - No matching column found:",t),!1;e.delete()},w.prototype.scrollToColumn=function(o,n,s){var a=this;return new Promise(function(t,e){var i=a.columnManager.findColumn(o);i?a.columnManager.scrollToColumn(i,n,s).then(function(){t()}).catch(function(t){e(t)}):(console.warn("Scroll Error - No matching column found:",o),e("Scroll Error - No matching column found"))})},w.prototype.setLocale=function(t){this.modules.localize.setLocale(t)},w.prototype.getLocale=function(){return this.modules.localize.getLocale()},w.prototype.getLang=function(t){return this.modules.localize.getLang(t)},w.prototype.redraw=function(t){this.columnManager.redraw(t),this.rowManager.redraw(t)},w.prototype.setHeight=function(t){this.options.height=isNaN(t)?t:t+"px",this.element.style.height=this.options.height,this.rowManager.redraw()},w.prototype.setSort=function(t,e){this.modExists("sort",!0)&&(this.modules.sort.setSort(t,e),this.rowManager.sorterRefresh())},w.prototype.getSorters=function(){if(this.modExists("sort",!0))return this.modules.sort.getSort()},w.prototype.clearSort=function(){this.modExists("sort",!0)&&(this.modules.sort.clear(),this.rowManager.sorterRefresh())},w.prototype.setFilter=function(t,e,i){this.modExists("filter",!0)&&(this.modules.filter.setFilter(t,e,i),this.rowManager.filterRefresh())},w.prototype.addFilter=function(t,e,i){this.modExists("filter",!0)&&(this.modules.filter.addFilter(t,e,i),this.rowManager.filterRefresh())},w.prototype.getFilters=function(t){if(this.modExists("filter",!0))return this.modules.filter.getFilters(t)},w.prototype.setHeaderFilterFocus=function(t){if(this.modExists("filter",!0)){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Filter Focus Error - No matching column found:",t),!1;this.modules.filter.setHeaderFilterFocus(e)}},w.prototype.setHeaderFilterValue=function(t,e){if(this.modExists("filter",!0)){var i=this.columnManager.findColumn(t);if(!i)return console.warn("Column Filter Error - No matching column found:",t),!1;this.modules.filter.setHeaderFilterValue(i,e)}},w.prototype.getHeaderFilters=function(){if(this.modExists("filter",!0))return this.modules.filter.getHeaderFilters()},w.prototype.removeFilter=function(t,e,i){this.modExists("filter",!0)&&(this.modules.filter.removeFilter(t,e,i),this.rowManager.filterRefresh())},w.prototype.clearFilter=function(t){this.modExists("filter",!0)&&(this.modules.filter.clearFilter(t),this.rowManager.filterRefresh())},w.prototype.clearHeaderFilter=function(){this.modExists("filter",!0)&&(this.modules.filter.clearHeaderFilter(),this.rowManager.filterRefresh())},w.prototype.selectRow=function(t){this.modExists("selectRow",!0)&&this.modules.selectRow.selectRows(t)},w.prototype.deselectRow=function(t){this.modExists("selectRow",!0)&&this.modules.selectRow.deselectRows(t)},w.prototype.toggleSelectRow=function(t){this.modExists("selectRow",!0)&&this.modules.selectRow.toggleRow(t)},w.prototype.getSelectedRows=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedRows()},w.prototype.getSelectedData=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedData()},w.prototype.setMaxPage=function(t){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.setMaxPage(t)},w.prototype.setPage=function(t){return this.options.pagination&&this.modExists("page")?this.modules.page.setPage(t):new Promise(function(t,e){e()})},w.prototype.setPageSize=function(t){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.setPageSize(t),this.modules.page.setPage(1).then(function(){}).catch(function(){})},w.prototype.getPageSize=function(){if(this.options.pagination&&this.modExists("page",!0))return this.modules.page.getPageSize()},w.prototype.previousPage=function(){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.previousPage()},w.prototype.nextPage=function(){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.nextPage()},w.prototype.getPage=function(){return!(!this.options.pagination||!this.modExists("page"))&&this.modules.page.getPage()},w.prototype.getPageMax=function(){return!(!this.options.pagination||!this.modExists("page"))&&this.modules.page.getPageMax()},w.prototype.setGroupBy=function(t){if(!this.modExists("groupRows",!0))return!1;this.options.groupBy=t,this.modules.groupRows.initialize(),this.rowManager.refreshActiveData("display")},w.prototype.setGroupStartOpen=function(t){if(!this.modExists("groupRows",!0))return!1;this.options.groupStartOpen=t,this.modules.groupRows.initialize(),this.options.groupBy?this.rowManager.refreshActiveData("group"):console.warn("Grouping Update - cant refresh view, no groups have been set")},w.prototype.setGroupHeader=function(t){if(!this.modExists("groupRows",!0))return!1;this.options.groupHeader=t,this.modules.groupRows.initialize(),this.options.groupBy?this.rowManager.refreshActiveData("group"):console.warn("Grouping Update - cant refresh view, no groups have been set")},w.prototype.getGroups=function(t){return!!this.modExists("groupRows",!0)&&this.modules.groupRows.getGroups(!0)},w.prototype.getGroupedData=function(){if(this.modExists("groupRows",!0))return this.options.groupBy?this.modules.groupRows.getGroupedData():this.getData()},w.prototype.getCalcResults=function(){return!!this.modExists("columnCalcs",!0)&&this.modules.columnCalcs.getResults()},w.prototype.navigatePrev=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().prev())},w.prototype.navigateNext=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().next())},w.prototype.navigateLeft=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().left())},w.prototype.navigateRight=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().right())},w.prototype.navigateUp=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().up())},w.prototype.navigateDown=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().dpwn())},w.prototype.undo=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.undo()},w.prototype.redo=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.redo()},w.prototype.getHistoryUndoSize=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.getHistoryUndoSize()},w.prototype.getHistoryRedoSize=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.getHistoryRedoSize()},w.prototype.download=function(t,e,i){this.modExists("download",!0)&&this.modules.download.download(t,e,i)},w.prototype.tableComms=function(t,e,i,o){this.modules.comms.receive(t,e,i,o)},w.prototype.moduleBindings={},w.prototype.extendModule=function(t,e,i){if(w.prototype.moduleBindings[t]){var o=w.prototype.moduleBindings[t].prototype[e];if(o)if("object"==(void 0===i?"undefined":_typeof(i)))for(var n in i)o[n]=i[n];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",e)}else console.warn("Module Error - module does not exist:",t)},w.prototype.registerModule=function(t,e){w.prototype.moduleBindings[t]=e},w.prototype.bindModules=function(){for(var t in this.modules={},w.prototype.moduleBindings)this.modules[t]=new w.prototype.moduleBindings[t](this)},w.prototype.modExists=function(t,e){return!!this.modules[t]||(e&&console.error("Tabulator Module Not Installed: "+t),!1)},w.prototype.helpers={elVisible:function(t){return!(t.offsetWidth<=0&&t.offsetHeight<=0)},elOffset:function(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}},deepClone:function(t){var e=Array.isArray(t)?[]:{};for(var i in t)null!=t[i]&&"object"===_typeof(t[i])?t[i]instanceof Date?e[i]=new Date(t[i]):e[i]=this.deepClone(t[i]):e[i]=t[i];return e}},w.prototype.comms={tables:[],register:function(t){w.prototype.comms.tables.push(t)},deregister:function(t){var e=w.prototype.comms.tables.indexOf(t);-1<e&&w.prototype.comms.tables.splice(e,1)},lookupTable:function(t){var e,i,o=[];if("string"==typeof t){if((e=document.querySelectorAll(t)).length)for(var n=0;n<e.length;n++)(i=w.prototype.comms.matchElement(e[n]))&&o.push(i)}else t instanceof HTMLElement||t instanceof w?(i=w.prototype.comms.matchElement(t))&&o.push(i):Array.isArray(t)?t.forEach(function(t){o=o.concat(w.prototype.comms.lookupTable(t))}):console.warn("Table Connection Error - Invalid Selector",t);return o},matchElement:function(e){return w.prototype.comms.tables.find(function(t){return e instanceof w?t===e:t.element===e})}};var h=function(t){this.table=t,this.mode=null};h.prototype.initialize=function(t){this.modes[t]?this.mode=t:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+t),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)},h.prototype.getMode=function(){return this.mode},h.prototype.layout=function(){this.modes[this.mode].call(this,this.table.columnManager.columnsByIndex)},h.prototype.modes={fitData:function(t){t.forEach(function(t){t.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:function(t){t.forEach(function(t){t.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(t){var e,i,o=this.table.element.clientWidth,n=0,s=0,a=0,r=[],l=[],h=0,c=0;function p(t){return"string"==typeof t?-1<t.indexOf("%")?o/100*parseInt(t):parseInt(t):t}function f(t,e,i,o){var n=[],s=0,a=0,r=0,l=0,h=0,c=[];function u(t){return i*(t.column.definition.widthGrow||1)}function d(t){return p(t.width)-i*(t.column.definition.widthShrink||0)}return t.forEach(function(t,e){var i=o?d(t):u(t);t.column.minWidth>=i?n.push(t):(c.push(t),h+=o?t.column.definition.widthShrink||1:t.column.definition.widthGrow||1)}),n.length?(n.forEach(function(t){s+=o?t.width-t.column.minWidth:t.column.minWidth,t.width=t.column.minWidth}),l=(a=e-s)-(r=h?Math.floor(a/h):a)*h,l+=f(c,a,r,o)):(l=h?e-Math.floor(e/h)*h:e,c.forEach(function(t){t.width=o?d(t):u(t)})),l}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(o-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),t.forEach(function(t){var e,i,o;t.visible&&(e=t.definition.width,i=parseInt(t.minWidth),e?(o=p(e),n+=i<o?o:i,t.definition.widthShrink&&(l.push({column:t,width:i<o?o:i}),h+=t.definition.widthShrink)):(r.push({column:t,width:0}),a+=t.definition.widthGrow||1))}),s=o-n,e=Math.floor(s/a);c=f(r,s,e,!1);r.length&&0<c&&(r[r.length-1].width+=+c),r.forEach(function(t){s-=t.width}),0<(i=Math.abs(c)+s)&&h&&(c=f(l,i,Math.floor(i/h),!0)),l.length&&(l[l.length-1].width-=c),r.forEach(function(t){t.column.setWidth(t.width)}),l.forEach(function(t){t.column.setWidth(t.width)})}},w.prototype.registerModule("layout",h);var u=function(t){this.table=t,this.locale="default",this.lang=!1,this.bindings={}};u.prototype.setHeaderFilterPlaceholder=function(t){this.langs.default.headerFilters.default=t},u.prototype.setHeaderFilterColumnPlaceholder=function(t,e){this.langs.default.headerFilters.columns[t]=e,this.lang&&!this.lang.headerFilters.columns[t]&&(this.lang.headerFilters.columns[t]=e)},u.prototype.installLang=function(t,e){this.langs[t]?this._setLangProp(this.langs[t],e):this.langs[t]=e},u.prototype._setLangProp=function(t,e){for(var i in e)t[i]&&"object"==_typeof(t[i])?this._setLangProp(t[i],e[i]):t[i]=e[i]},u.prototype.setLocale=function(t){var e=this;if(!0===(t=t||"default")&&navigator.language&&(t=navigator.language.toLowerCase()),t&&!e.langs[t]){var i=t.split("-")[0];t=e.langs[i]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",t,i),i):(console.warn("Localization Error - Matching locale not found, using default: ",t),"default")}e.locale=t,e.lang=w.prototype.helpers.deepClone(e.langs.default||{}),"default"!=t&&function t(e,i){for(var o in e)"object"==_typeof(e[o])?(i[o]||(i[o]={}),t(e[o],i[o])):i[o]=e[o]}(e.langs[t],e.lang),e.table.options.localized.call(e.table,e.locale,e.lang),e._executeBindings()},u.prototype.getLocale=function(t){return self.locale},u.prototype.getLang=function(t){return t?this.langs[t]:this.lang},u.prototype.getText=function(t,e){var i=(t=e?t+"|"+e:t).split("|");return this._getLangElement(i,this.locale)||""},u.prototype._getLangElement=function(t,e){var i=this.lang;return t.forEach(function(t){var e;i&&(e=i[t],i=void 0!==e&&e)}),i},u.prototype.bind=function(t,e){this.bindings[t]||(this.bindings[t]=[]),this.bindings[t].push(e),e(this.getText(t),this.lang)},u.prototype._executeBindings=function(){var i=this,t=function(e){i.bindings[e].forEach(function(t){t(i.getText(e),i.lang)})};for(var e in i.bindings)t(e)},u.prototype.langs={default:{groups:{item:"item",items:"items"},columns:{},ajax:{loading:"Loading",error:"Error"},pagination:{first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page"},headerFilters:{default:"filter column...",columns:{}}}},w.prototype.registerModule("localize",u);var d=function(t){this.table=t};d.prototype.getConnections=function(t){var e=this,i=[];return w.prototype.comms.lookupTable(t).forEach(function(t){e.table!==t&&i.push(t)}),i},d.prototype.send=function(t,e,i,o){var n=this,s=this.getConnections(t);s.forEach(function(t){t.tableComms(n.table.element,e,i,o)}),!s.length&&t&&console.warn("Table Connection Error - No tables matching selector found",t)},d.prototype.receive=function(t,e,i,o){if(this.table.modExists(e))return this.table.modules[e].commsReceived(t,i,o);console.warn("Inter-table Comms Error - no such module:",e)},w.prototype.registerModule("comms",d);var p=function(t){this.table=t,this.allowedTypes=["","data","download","clipboard"]};p.prototype.initializeColumn=function(o){var n=this,s=!1,a={};this.allowedTypes.forEach(function(t){var e,i="accessor"+(t.charAt(0).toUpperCase()+t.slice(1));o.definition[i]&&(e=n.lookupAccessor(o.definition[i]))&&(s=!0,a[i]={accessor:e,params:o.definition[i+"Params"]||{}})}),s&&(o.modules.accessor=a)},p.prototype.lookupAccessor=function(t){var e=!1;switch(void 0===t?"undefined":_typeof(t)){case"string":this.accessors[t]?e=this.accessors[t]:console.warn("Accessor Error - No such accessor found, ignoring: ",t);break;case"function":e=t}return e},p.prototype.transformRow=function(t,s){var a="accessor"+(s.charAt(0).toUpperCase()+s.slice(1)),r=w.prototype.helpers.deepClone(t||{});return this.table.columnManager.traverse(function(t){var e,i,o,n;t.modules.accessor&&(i=t.modules.accessor[a]||t.modules.accessor.accessor||!1)&&"undefined"!=(e=t.getFieldValue(r))&&(n=t.getComponent(),o="function"==typeof i.params?i.params(e,r,s,n):i.params,t.setFieldValue(r,i.accessor(e,r,s,o,n)))}),r},p.prototype.accessors={},w.prototype.registerModule("accessor",p);var f=function(t){this.table=t,this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=!1,this.errorElement=!1,this.loaderPromise=!1,this.progressiveLoad=!1,this.loading=!1,this.requestOrder=0};f.prototype.initialize=function(){var t;this.loaderElement.appendChild(this.msgElement),this.table.options.ajaxLoaderLoading&&("string"==typeof this.table.options.ajaxLoaderLoading?((t=document.createElement("template")).innerHTML=this.table.options.ajaxLoaderLoading.trim(),this.loadingElement=t.content.firstChild):this.loadingElement=this.table.options.ajaxLoaderLoading),this.loaderPromise=this.table.options.ajaxRequestFunc||this.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||this.defaultURLGenerator,this.table.options.ajaxLoaderError&&(this.errorElement=this.table.options.ajaxLoaderError),this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.table.options.ajaxProgressiveLoad&&(this.table.options.pagination?(this.progressiveLoad=!1,console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time")):this.table.modExists("page")?(this.progressiveLoad=this.table.options.ajaxProgressiveLoad,this.table.modules.page.initializeProgressive(this.progressiveLoad)):console.error("Pagination plugin is required for progressive ajax loading"))},f.prototype.createLoaderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-loader"),t},f.prototype.createMsgElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-loader-msg"),t.setAttribute("role","alert"),t},f.prototype.setParams=function(t,e){if(e)for(var i in this.params=this.params||{},t)this.params[i]=t[i];else this.params=t},f.prototype.getParams=function(){return this.params||{}},f.prototype.setConfig=function(t){if(this._loadDefaultConfig(),"string"==typeof t)this.config.method=t;else for(var e in t)this.config[e]=t[e]},f.prototype._loadDefaultConfig=function(t){if(!this.config||t)for(var e in this.config={},this.defaultConfig)this.config[e]=this.defaultConfig[e]},f.prototype.setUrl=function(t){this.url=t},f.prototype.getUrl=function(){return this.url},f.prototype.loadData=function(t){return this.progressiveLoad?this._loadDataProgressive():this._loadDataStandard(t)},f.prototype.nextPage=function(t){this.loading||t<(this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.getElement().clientHeight)&&this.table.modules.page.nextPage().then(function(){}).catch(function(){})},f.prototype.blockActiveRequest=function(){this.requestOrder++},f.prototype._loadDataProgressive=function(){return this.table.rowManager.setData([]),this.table.modules.page.setPage(1)},f.prototype._loadDataStandard=function(o){var n=this;return new Promise(function(e,i){n.sendRequest(o).then(function(t){n.table.rowManager.setData(t,o).then(function(){e()}).catch(function(t){i(t)})}).catch(function(t){i(t)})})},f.prototype.generateParamsList=function(t,i){var o=this,n=[];if(i=i||"",Array.isArray(t))t.forEach(function(t,e){n=n.concat(o.generateParamsList(t,i?i+"["+e+"]":e))});else if("object"===(void 0===t?"undefined":_typeof(t)))for(var e in t)n=n.concat(o.generateParamsList(t[e],i?i+"["+e+"]":e));else n.push({key:i,value:t});return n},f.prototype.serializeParams=function(t){var e=this.generateParamsList(t),i=[];return e.forEach(function(t){i.push(encodeURIComponent(t.key)+"="+encodeURIComponent(t.value))}),i.join("&")},f.prototype.sendRequest=function(t){var o,n=this,s=this,a=s.url;return s.requestOrder++,o=s.requestOrder,s._loadDefaultConfig(),new Promise(function(e,i){!1!==s.table.options.ajaxRequesting.call(n.table,s.url,s.params)?(s.loading=!0,t||s.showLoader(),n.loaderPromise(a,s.config,s.params).then(function(t){o===s.requestOrder?(s.table.options.ajaxResponse&&(t=s.table.options.ajaxResponse.call(s.table,s.url,s.params,t)),e(t)):console.warn("Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made"),s.hideLoader(),s.loading=!1}).catch(function(t){console.error("Ajax Load Error: ",t),s.table.options.ajaxError.call(s.table,t),s.showError(),setTimeout(function(){s.hideLoader()},3e3),s.loading=!1,i()})):i()})},f.prototype.showLoader=function(){if("function"==typeof this.table.options.ajaxLoader?this.table.options.ajaxLoader():this.table.options.ajaxLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|loading"),this.table.element.appendChild(this.loaderElement)}},f.prototype.showError=function(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|error"),this.table.element.appendChild(this.loaderElement)},f.prototype.hideLoader=function(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)},f.prototype.defaultConfig={method:"GET"},f.prototype.defaultURLGenerator=function(t,e,i){return t&&i&&Object.keys(i).length&&(e.method&&"get"!=e.method.toLowerCase()||(e.method="get",t+="?"+this.serializeParams(i))),t},f.prototype.defaultLoaderPromise=function(o,n,s){var a,r=this;return new Promise(function(e,i){if(o=r.urlGenerator(o,n,s),"get"!=n.method)if(a="object"===_typeof(r.table.options.ajaxContentType)?r.table.options.ajaxContentType:r.contentTypeFormatters[r.table.options.ajaxContentType]){for(var t in a.headers)n.headers||(n.headers={}),void 0===n.headers[t]&&(n.headers[t]=a.headers[t]);n.body=a.body.call(r,o,n,s)}else console.warn("Ajax Error - Invalid ajaxContentType value:",r.table.options.ajaxContentType);o?(void 0===n.credentials&&(n.credentials="include"),void 0===n.headers&&(n.headers={}),void 0===n.headers.Accept&&(n.headers.Accept="application/json"),void 0===n.headers["X-Requested-With"]&&(n.headers["X-Requested-With"]="XMLHttpRequest"),fetch(o,n).then(function(t){t.ok?t.json().then(function(t){e(t)}).catch(function(t){i(t),console.warn("Ajax Load Error - Invalid JSON returned",t)}):(console.error("Ajax Load Error - Connection Error: "+t.status,t.statusText),i(t))}).catch(function(t){console.error("Ajax Load Error - Connection Error: ",t),i(t)})):(console.warn("Ajax Load Error - No URL Set"),e([]))})},f.prototype.contentTypeFormatters={json:{headers:{"Content-Type":"application/json"},body:function(t,e,i){return JSON.stringify(i)}},form:{headers:{},body:function(t,e,i){var o=this.generateParamsList(i),n=new FormData;return o.forEach(function(t){n.append(t.key,t.value)}),n}}},w.prototype.registerModule("ajax",f);var m=function(t){this.table=t,this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.initialize()};m.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-calcs-holder"),t},m.prototype.initialize=function(){this.genColumn=new l({field:"value"},this)},m.prototype.registerColumnField=function(){},m.prototype.initializeColumn=function(t){var e=t.definition,i={topCalcParams:e.topCalcParams||{},botCalcParams:e.bottomCalcParams||{}};if(e.topCalc){switch(_typeof(e.topCalc)){case"string":this.calculations[e.topCalc]?i.topCalc=this.calculations[e.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",e.topCalc);break;case"function":i.topCalc=e.topCalc}i.topCalc&&(t.modules.columnCalcs=i,this.topCalcs.push(t),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(e.bottomCalc){switch(_typeof(e.bottomCalc)){case"string":this.calculations[e.bottomCalc]?i.botCalc=this.calculations[e.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",e.bottomCalc);break;case"function":i.botCalc=e.bottomCalc}i.botCalc&&(t.modules.columnCalcs=i,this.botCalcs.push(t),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}},m.prototype.removeCalcs=function(){var t=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),t=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),t=!0),t&&this.table.rowManager.adjustTableSize()},m.prototype.initializeTopRow=function(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)},m.prototype.initializeBottomRow=function(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)},m.prototype.scrollHorizontal=function(t){this.table.columnManager.getElement().scrollWidth,this.table.element.clientWidth;this.botInitialized&&(this.botRow.getElement().style.marginLeft=-t+"px")},m.prototype.recalc=function(t){var e;if(this.topInitialized||this.botInitialized){if(this.rowsToData(t),this.topInitialized){for(e=this.generateRow("top",this.rowsToData(t)),this.topRow=e;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(e.getElement()),e.initialize(!0)}if(this.botInitialized){for(e=this.generateRow("bottom",this.rowsToData(t)),this.botRow=e;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(e.getElement()),e.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}},m.prototype.recalcRowGroup=function(t){this.recalcGroup(this.table.modules.groupRows.getRowGroup(t))},m.prototype.recalcGroup=function(t){var e,i;t&&t.calcs&&(t.calcs.bottom&&(e=this.rowsToData(t.rows),i=this.generateRowData("bottom",e),t.calcs.bottom.updateData(i),t.calcs.bottom.reinitialize()),t.calcs.top&&(e=this.rowsToData(t.rows),i=this.generateRowData("top",e),t.calcs.top.updateData(i),t.calcs.top.reinitialize()))},m.prototype.generateTopRow=function(t){return this.generateRow("top",this.rowsToData(t))},m.prototype.generateBottomRow=function(t){return this.generateRow("bottom",this.rowsToData(t))},m.prototype.rowsToData=function(t){var e=[];return t.forEach(function(t){e.push(t.getData())}),e},m.prototype.generateRow=function(o,t){var n,s=this,e=this.generateRowData(o,t);return s.table.modExists("mutator")&&s.table.modules.mutator.disable(),n=new c(e,this),s.table.modExists("mutator")&&s.table.modules.mutator.enable(),n.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+o),n.type="calc",n.generateCells=function(){var i=[];s.table.columnManager.columnsByIndex.forEach(function(t){if(t.visible){s.genColumn.setField(t.getField()),s.genColumn.hozAlign=t.hozAlign,t.definition[o+"CalcFormatter"]&&s.table.modExists("format")?s.genColumn.modules.format={formatter:s.table.modules.format.getFormatter(t.definition[o+"CalcFormatter"]),params:t.definition[o+"CalcFormatterParams"]}:s.genColumn.modules.format={formatter:s.table.modules.format.getFormatter("plaintext"),params:{}},s.genColumn.definition.cssClass=t.definition.cssClass;var e=new a(s.genColumn,n);e.column=t,e.setWidth(t.width),t.cells.push(e),i.push(e)}}),this.cells=i},n},m.prototype.generateRowData=function(t,o){var n,s,a={},e="top"==t?this.topCalcs:this.botCalcs,r="top"==t?"topCalc":"botCalc";return e.forEach(function(e){var i=[];e.modules.columnCalcs&&e.modules.columnCalcs[r]&&(o.forEach(function(t){i.push(e.getFieldValue(t))}),s=r+"Params",n="function"==typeof e.modules.columnCalcs[s]?e.modules.columnCalcs[s](value,o):e.modules.columnCalcs[s],e.setFieldValue(a,e.modules.columnCalcs[r](i,o,n)))}),a},m.prototype.hasTopCalcs=function(){return!!this.topCalcs.length},m.prototype.hasBottomCalcs=function(){return!!this.botCalcs.length},m.prototype.redraw=function(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)},m.prototype.getResults=function(){var e=this,i={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(function(t){i[t.getKey()]=e.getGroupResults(t)}):i={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},i},m.prototype.getGroupResults=function(t){var e=this,i=t._getSelf(),o=t.getSubGroups(),n={};return o.forEach(function(t){n[t.getKey()]=e.getGroupResults(t)}),{top:i.calcs.top?i.calcs.top.getData():{},bottom:i.calcs.bottom?i.calcs.bottom.getData():{},groups:n}},m.prototype.calculations={avg:function(t,e,i){var o=0,n=void 0!==i.precision?i.precision:2;return t.length&&(o=t.reduce(function(t,e){return t+(e=Number(e))}),o/=t.length,o=!1!==n?o.toFixed(n):o),parseFloat(o).toString()},max:function(t,e,i){var o=null,n=void 0!==i.precision&&i.precision;return t.forEach(function(t){t=Number(t),(o<t||null===o)&&(o=t)}),null!==o?!1!==n?o.toFixed(n):o:""},min:function(t,e,i){var o=null,n=void 0!==i.precision&&i.precision;return t.forEach(function(t){((t=Number(t))<o||null===o)&&(o=t)}),null!==o?!1!==n?o.toFixed(n):o:""},sum:function(t,e,i){var o=0,n=void 0!==i.precision&&i.precision;return t.length&&t.forEach(function(t){t=Number(t),o+=isNaN(t)?0:Number(t)}),!1!==n?o.toFixed(n):o},concat:function(t,e,i){var o=0;return t.length&&(o=t.reduce(function(t,e){return String(t)+String(e)})),o},count:function(t,e,i){var o=0;return t.length&&t.forEach(function(t){t&&o++}),o}},w.prototype.registerModule("columnCalcs",m);var g=function(t){this.table=t,this.mode=!0,this.copySelector=!1,this.copySelectorParams={},this.copyFormatter=!1,this.copyFormatterParams={},this.pasteParser=function(){},this.pasteAction=function(){},this.htmlElement=!1,this.config={},this.blocked=!0};g.prototype.initialize=function(){var i=this;this.mode=this.table.options.clipboard,!0!==this.mode&&"copy"!==this.mode||this.table.element.addEventListener("copy",function(t){var e;i.processConfig(),i.blocked||(t.preventDefault(),e=i.generateContent(),window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",e):t.clipboardData&&t.clipboardData.setData?(t.clipboardData.setData("text/plain",e),i.htmlElement&&t.clipboardData.setData("text/html",i.htmlElement.outerHTML)):t.originalEvent&&t.originalEvent.clipboardData.setData&&(t.originalEvent.clipboardData.setData("text/plain",e),i.htmlElement&&t.originalEvent.clipboardData.setData("text/html",i.htmlElement.outerHTML)),i.table.options.clipboardCopied.call(this.table,e),i.reset())}),!0!==this.mode&&"paste"!==this.mode||this.table.element.addEventListener("paste",function(t){i.paste(t)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction)},g.prototype.processConfig=function(){var t={columnHeaders:"groups",rowGroups:!0};if(void 0!==this.table.options.clipboardCopyHeader&&(t.columnHeaders=this.table.options.clipboardCopyHeader,console.warn("DEPRECATION WANRING - clipboardCopyHeader option has been depricated, please use the columnHeaders property on the clipboardCopyConfig option")),this.table.options.clipboardCopyConfig)for(var e in this.table.options.clipboardCopyConfig)t[e]=this.table.options.clipboardCopyConfig[e];t.rowGroups&&this.table.options.groupBy&&this.table.modExists("groupRows")&&(this.config.rowGroups=!0),t.columnHeaders?"groups"!==t.columnHeaders&&!0!==t||this.table.columnManager.columns.length==this.table.columnManager.columnsByIndex.length?this.config.columnHeaders="columns":this.config.columnHeaders="groups":this.config.columnHeaders=!1},g.prototype.reset=function(){this.blocked=!1,this.originalSelectionText=""},g.prototype.setPasteAction=function(t){switch(void 0===t?"undefined":_typeof(t)){case"string":this.pasteAction=this.pasteActions[t],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",t);break;case"function":this.pasteAction=t}},g.prototype.setPasteParser=function(t){switch(void 0===t?"undefined":_typeof(t)){case"string":this.pasteParser=this.pasteParsers[t],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",t);break;case"function":this.pasteParser=t}},g.prototype.paste=function(t){var e,i,o;this.checkPaseOrigin(t)&&(e=this.getPasteData(t),(i=this.pasteParser.call(this,e))?(t.preventDefault(),this.table.modExists("mutator")&&(i=this.mutateData(i)),o=this.pasteAction.call(this,i),this.table.options.clipboardPasted.call(this.table,e,i,o)):this.table.options.clipboardPasteError.call(this.table,e))},g.prototype.mutateData=function(t){var e=this,i=[];return Array.isArray(t)?t.forEach(function(t){i.push(e.table.modules.mutator.transformRow(t,"clipboard"))}):i=t,i},g.prototype.checkPaseOrigin=function(t){var e=!0;return("DIV"!=t.target.tagName||this.table.modules.edit.currentCell)&&(e=!1),e},g.prototype.getPasteData=function(t){var e;return window.clipboardData&&window.clipboardData.getData?e=window.clipboardData.getData("Text"):t.clipboardData&&t.clipboardData.getData?e=t.clipboardData.getData("text/plain"):t.originalEvent&&t.originalEvent.clipboardData.getData&&(e=t.originalEvent.clipboardData.getData("text/plain")),e},g.prototype.copy=function(t,e,i,o,n){var s,a;!(this.blocked=!1)!==this.mode&&"copy"!==this.mode||(void 0!==window.getSelection&&void 0!==document.createRange?((s=document.createRange()).selectNodeContents(this.table.element),(a=window.getSelection()).toString()&&n&&(t="userSelection",i="raw",e=a.toString()),a.removeAllRanges(),a.addRange(s)):void 0!==document.selection&&void 0!==document.body.createTextRange&&(textRange=document.body.createTextRange(),textRange.moveToElementText(this.table.element),textRange.select()),this.setSelector(t),this.copySelectorParams=void 0!==e&&null!=e?e:this.config.columnHeaders,this.setFormatter(i),this.copyFormatterParams=void 0!==o&&null!=o?o:{},document.execCommand("copy"),a&&a.removeAllRanges())},g.prototype.setSelector=function(t){switch(void 0===(t=t||this.table.options.clipboardCopySelector)?"undefined":_typeof(t)){case"string":this.copySelectors[t]?this.copySelector=this.copySelectors[t]:console.warn("Clipboard Error - No such selector found:",t);break;case"function":this.copySelector=t}},g.prototype.setFormatter=function(t){switch(void 0===(t=t||this.table.options.clipboardCopyFormatter)?"undefined":_typeof(t)){case"string":this.copyFormatters[t]?this.copyFormatter=this.copyFormatters[t]:console.warn("Clipboard Error - No such formatter found:",t);break;case"function":this.copyFormatter=t}},g.prototype.generateContent=function(){var t;return this.htmlElement=!1,t=this.copySelector.call(this,this.config,this.copySelectorParams),this.copyFormatter.call(this,t,this.config,this.copyFormatterParams)},g.prototype.generateSimpleHeaders=function(t){var e=[];return t.forEach(function(t){e.push(t.definition.title)}),e},g.prototype.generateColumnGroupHeaders=function(t){var i=this,o=[];return this.table.columnManager.columns.forEach(function(t){var e=i.processColumnGroup(t);e&&o.push(e)}),o},g.prototype.processColumnGroup=function(t){var i=this,e=t.columns,o={type:"group",title:t.definition.title,column:t};if(e.length){if(o.subGroups=[],o.width=0,e.forEach(function(t){var e=i.processColumnGroup(t);e&&(o.width+=e.width,o.subGroups.push(e))}),!o.width)return!1}else{if(!t.field||!t.visible)return!1;o.width=1}return o},g.prototype.groupHeadersToRows=function(t){var i=[];function n(t,e){var o;void 0===i[e]&&(i[e]=[]),i[e].push(t.title),t.subGroups?t.subGroups.forEach(function(t){n(t,e+1)}):(o=0,i.forEach(function(t){var e=t.length;o<e&&(o=e)}),i.forEach(function(t){var e=t.length;if(e<o)for(var i=e;i<o;i++)t.push("")}))}return t.forEach(function(t){n(t,0)}),i},g.prototype.rowsToData=function(t,e,i){var n=this.table.columnManager.columnsByIndex,s=[];return t.forEach(function(t){var i=[],o=t.getData("clipboard");n.forEach(function(t){var e=t.getFieldValue(o);switch(void 0===e?"undefined":_typeof(e)){case"object":e=JSON.stringify(e);break;case"undefined":case"null":e="";break;default:e=e}i.push(e)}),s.push(i)}),s},g.prototype.buildComplexRows=function(t){var e=this,i=[];return this.table.modules.groupRows.getGroups().forEach(function(t){i.push(e.processGroupData(t))}),i},g.prototype.processGroupData=function(t){var e=this,i=t.getSubGroups(),o={type:"group",key:t.key};return i.length?(o.subGroups=[],i.forEach(function(t){o.subGroups.push(e.processGroupData(t))})):o.rows=t.getRows(!0),o},g.prototype.buildOutput=function(t,e,i){var o=this,n=[],s=this.table.columnManager.columnsByIndex;return e.columnHeaders&&("groups"==e.columnHeaders?(s=this.generateColumnGroupHeaders(this.table.columnManager.columns),n=n.concat(this.groupHeadersToRows(s))):n.push(this.generateSimpleHeaders(s))),this.table.options.clipboardCopyStyled&&this.generateHTML(t,s,e,i),e.rowGroups?t.forEach(function(t){n=n.concat(o.parseRowGroupData(t,e,i))}):n=n.concat(this.rowsToData(t,e,i)),n},g.prototype.parseRowGroupData=function(t,e,i){var o=this,n=[];return n.push([t.key]),t.subGroups?t.subGroups.forEach(function(t){n=n.concat(o.parseRowGroupData(t,e,i))}):n=n.concat(this.rowsToData(t.rows,e,i)),n},g.prototype.generateHTML=function(t,a,e,i){var r,o,l,h,c,n,s,u,d,p,f=this,m=[];function g(t){t.forEach(function(t,e){var n=document.createElement("tr"),s=t.getData("clipboard"),i=h;a.forEach(function(t,e){var i=document.createElement("td"),o=t.getFieldValue(s);switch(void 0===o?"undefined":_typeof(o)){case"object":o=JSON.stringify(o);break;case"undefined":case"null":o="";break;default:o=o}i.innerHTML=o,t.definition.align&&(i.style.textAlign=t.definition.align),a.length,c&&f.mapElementStyles(c,i,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),n.appendChild(i)}),e%2||!o||(i=o),e%2&&l&&(i=l),i&&f.mapElementStyles(i,n,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),r.appendChild(n)})}this.htmlElement=document.createElement("table"),f.mapElementStyles(this.table.element,this.htmlElement,["border-top","border-left","border-right","border-bottom"]),e.columnHeaders&&("groups"==e.columnHeaders?(a.forEach(function(t){!function e(t,i){void 0===m[i]&&(m[i]=[]),m[i].push({title:t.title,width:t.width,height:1,children:!!t.subGroups,element:t.column.getElement()}),t.subGroups&&t.subGroups.forEach(function(t){e(t,i+1)})}(t,0)}),m.forEach(function(t,e){t.forEach(function(t){t.children||(t.height=m.length-e)})}),d=m,p=document.createElement("thead"),d.forEach(function(t){var i=document.createElement("tr");t.forEach(function(t){var e=document.createElement("th");1<t.width&&(e.colSpan=t.width),1<t.height&&(e.rowSpan=t.height),e.innerHTML=t.title,f.mapElementStyles(t.element,e,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),i.appendChild(e)}),f.mapElementStyles(f.table.columnManager.getHeadersElement(),i,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),p.appendChild(i)}),f.htmlElement.appendChild(p)):(u=document.createElement("tr"),a.forEach(function(t){var e=document.createElement("th");e.innerHTML=t.definition.title,f.mapElementStyles(t.getElement(),e,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),u.appendChild(e)}),f.mapElementStyles(f.table.columnManager.getHeadersElement(),u,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),f.htmlElement.appendChild(document.createElement("thead").appendChild(u)))),a=this.table.columnManager.columnsByIndex,r=document.createElement("tbody"),window.getComputedStyle&&(o=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),l=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),h=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),n=this.table.element.getElementsByClassName("tabulator-group")[0],h&&(s=h.getElementsByClassName("tabulator-cell"),c=s[0],s[s.length-1])),e.rowGroups?t.forEach(function(t){!function e(t){var i=document.createElement("tr"),o=document.createElement("td");o.colSpan=a.length,o.innerHTML=t.key,i.appendChild(o),r.appendChild(i),f.mapElementStyles(n,i,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),t.subGroups?t.subGroups.forEach(function(t){e(t)}):g(t.rows)}(t)}):g(t),this.htmlElement.appendChild(r)},g.prototype.mapElementStyles=function(t,e,i){var o={"background-color":"backgroundColor",color:"fontColor","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom"};if(window.getComputedStyle){var n=window.getComputedStyle(t);i.forEach(function(t){e.style[o[t]]=n.getPropertyValue(t)})}},g.prototype.copySelectors={userSelection:function(t,e){return e},selected:function(t,e){var i=[];return this.table.modExists("selectRow",!0)&&(i=this.table.modules.selectRow.getSelectedRows()),t.rowGroups&&console.warn("Clipboard Warning - select coptSelector does not support row groups"),this.buildOutput(i,t,e)},table:function(t,e){return t.rowGroups&&console.warn("Clipboard Warning - table coptSelector does not support row groups"),this.buildOutput(this.table.rowManager.getComponents(),t,e)},active:function(t,e){var i;return i=t.rowGroups?this.buildComplexRows(t):this.table.rowManager.getComponents(!0),this.buildOutput(i,t,e)}},g.prototype.copyFormatters={raw:function(t,e){return t},table:function(t,e){var i=[];return t.forEach(function(t){t.forEach(function(t){void 0===t&&(t=""),(t=null==t?"":t.toString()).match(/\r|\n/)&&(t='"'+(t=t.split('"').join('""'))+'"')}),i.push(t.join("\t"))}),i.join("\n")}},g.prototype.pasteParsers={table:function(t){var e=[],i=!0,o=this.table.columnManager.columns,n=[],s=[];return(t=t.split("\n")).forEach(function(t){e.push(t.split("\t"))}),!(!e.length||1===e.length&&e[0].length<2)&&(!0,e[0].forEach(function(e){var t=o.find(function(t){return e&&t.definition.title&&e.trim()&&t.definition.title.trim()===e.trim()});t?n.push(t):i=!1}),i||(i=!0,n=[],e[0].forEach(function(e){var t=o.find(function(t){return e&&t.field&&e.trim()&&t.field.trim()===e.trim()});t?n.push(t):i=!1}),i||(n=this.table.columnManager.columnsByIndex)),i&&e.shift(),e.forEach(function(t){var i={};t.forEach(function(t,e){n[e]&&(i[n[e].field]=t)}),s.push(i)}),s)}},g.prototype.pasteActions={replace:function(t){return this.table.setData(t)},update:function(t){return this.table.updateOrAddData(t)},insert:function(t){return this.table.addData(t)}},w.prototype.registerModule("clipboard",g);var v=function(t){this.table=t,this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.startOpen=function(){},this.displayIndex=0};v.prototype.initialize=function(){var t=null,i=this.table.options;switch(this.field=i.dataTreeChildField,this.indent=i.dataTreeChildIndent,i.dataTreeBranchElement&&(!0===i.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof i.dataTreeBranchElement?((t=document.createElement("div")).innerHTML=i.dataTreeBranchElement,this.branchEl=t.firstChild):this.branchEl=i.dataTreeBranchElement),i.dataTreeCollapseElement?"string"==typeof i.dataTreeCollapseElement?((t=document.createElement("div")).innerHTML=i.dataTreeCollapseElement,this.collapseEl=t.firstChild):this.collapseEl=i.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),i.dataTreeExpandElement?"string"==typeof i.dataTreeExpandElement?((t=document.createElement("div")).innerHTML=i.dataTreeExpandElement,this.expandEl=t.firstChild):this.expandEl=i.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),_typeof(i.dataTreeStartExpanded)){case"boolean":this.startOpen=function(t,e){return i.dataTreeStartExpanded};break;case"function":this.startOpen=i.dataTreeStartExpanded;break;default:this.startOpen=function(t,e){return i.dataTreeStartExpanded[e]}}},v.prototype.initializeRow=function(t){var e=void 0!==t.getData()[this.field];t.modules.dataTree={index:0,open:!!e&&this.startOpen(t.getComponent(),0),controlEl:!1,branchEl:!1,parent:!1,children:e}},v.prototype.layoutRow=function(t){var e=t.getCells()[0].getElement(),i=t.modules.dataTree;e.style.paddingLeft=parseInt(window.getComputedStyle(e,null).getPropertyValue("padding-left"))+i.index*this.indent+"px",i.branchEl&&i.branchEl.parentNode.removeChild(i.branchEl),this.generateControlElement(t,e),i.index&&this.branchEl&&(i.branchEl=this.branchEl.cloneNode(!0),e.insertBefore(i.branchEl,e.firstChild),e.style.paddingLeft=parseInt(e.style.paddingLeft)+(i.branchEl.offsetWidth+i.branchEl.style.marginRight)*(i.index-1)+"px")},v.prototype.generateControlElement=function(e,t){var i=this,o=e.modules.dataTree,n=(t=t||e.getCells()[0].getElement(),o.controlEl);!1!==o.children&&(o.open?(o.controlEl=this.collapseEl.cloneNode(!0),o.controlEl.addEventListener("click",function(t){t.stopPropagation(),i.collapseRow(e)})):(o.controlEl=this.expandEl.cloneNode(!0),o.controlEl.addEventListener("click",function(t){t.stopPropagation(),i.expandRow(e)})),o.controlEl.addEventListener("mousedown",function(t){t.stopPropagation()}),n&&n.parentNode===t?n.parentNode.replaceChild(o.controlEl,n):t.insertBefore(o.controlEl,t.firstChild))},v.prototype.setDisplayIndex=function(t){this.displayIndex=t},v.prototype.getDisplayIndex=function(){return this.displayIndex},v.prototype.getRows=function(t){var o=this,n=[];return t.forEach(function(t,e){var i;n.push(t),t instanceof c&&((i=t.modules.dataTree.children).index||!1===i.children||o.getChildren(t).forEach(function(t){n.push(t)}))}),n},v.prototype.getChildren=function(t){var e=this,i=t.modules.dataTree,o=[];return!1!==i.children&&i.open&&(Array.isArray(i.children)||(i.children=this.generateChildren(t)),i.children.forEach(function(t){o.push(t),e.getChildren(t).forEach(function(t){o.push(t)})})),o},v.prototype.generateChildren=function(i){var o=this,n=[];return i.getData()[this.field].forEach(function(t){var e=new c(t||{},o.table.rowManager);e.modules.dataTree.index=i.modules.dataTree.index+1,e.modules.dataTree.parent=i,e.modules.dataTree.open=o.startOpen(i,e.modules.dataTree.index),n.push(e)}),n},v.prototype.expandRow=function(t,e){var i=t.modules.dataTree;!1!==i.children&&(i.open=!0,t.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowExpanded(t.getComponent(),t.modules.dataTree.index))},v.prototype.collapseRow=function(t){var e=t.modules.dataTree;!1!==e.children&&(e.open=!1,t.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowCollapsed(t.getComponent(),t.modules.dataTree.index))},v.prototype.toggleRow=function(t){var e=t.modules.dataTree;!1!==e.children&&(e.open?this.collapseRow(t):this.expandRow(t))},v.prototype.getTreeParent=function(t){return!!t.modules.dataTree.parent&&t.modules.dataTree.parent.getComponent()},v.prototype.getTreeChildren=function(t){var e=t.modules.dataTree,i=[];return e.children&&(Array.isArray(e.children)||(e.children=this.generateChildren(t)),e.children.forEach(function(t){t instanceof c&&i.push(t.getComponent())})),i},v.prototype.checkForRestyle=function(t){t.row.cells.indexOf(t)||!1!==t.row.modules.dataTree.children&&t.row.reinitialize()},w.prototype.registerModule("dataTree",v);var y=function(t){this.table=t,this.fields={},this.columnsByIndex=[],this.columnsByField={},this.config={}};y.prototype.download=function(i,o,t,n){var s=this,e=!1;this.processConfig(),"function"==typeof i?e=i:s.downloaders[i]?e=s.downloaders[i]:console.warn("Download Error - No such download type found: ",i),this.processColumns(),e&&e.call(this,s.processDefinitions(),s.processData(),t||{},function(t,e){n?n(t):s.triggerDownload(t,e,i,o)},this.config)},y.prototype.processConfig=function(){var t={columnGroups:!0,rowGroups:!0};if(this.table.options.downloadConfig)for(var e in this.table.options.downloadConfig)t[e]=this.table.options.downloadConfig[e];t.rowGroups&&this.table.options.groupBy&&this.table.modExists("groupRows")&&(this.config.rowGroups=!0),t.columnGroups&&this.table.columnManager.columns.length!=this.table.columnManager.columnsByIndex.length&&(this.config.columnGroups=!0)},y.prototype.processColumns=function(){var e=this;e.columnsByIndex=[],e.columnsByField={},e.table.columnManager.columnsByIndex.forEach(function(t){t.field&&t.visible&&!1!==t.definition.download&&(e.columnsByIndex.push(t),e.columnsByField[t.field]=t)})},y.prototype.processDefinitions=function(){var i=this,o=[];return this.config.columnGroups?i.table.columnManager.columns.forEach(function(t){var e=i.processColumnGroup(t);e&&o.push(e)}):i.columnsByIndex.forEach(function(t){!1!==t.download&&o.push(i.processDefinition(t))}),o},y.prototype.processColumnGroup=function(t){var i=this,e=t.columns,o={type:"group",title:t.definition.title};if(e.length){if(o.subGroups=[],o.width=0,e.forEach(function(t){var e=i.processColumnGroup(t);e&&(o.width+=e.width,o.subGroups.push(e))}),!o.width)return!1}else{if(!t.field||!t.visible||!1===t.definition.download)return!1;o.width=1,o.definition=this.processDefinition(t)}return o},y.prototype.processDefinition=function(t){var e={};for(var i in t.definition)e[i]=t.definition[i];return void 0!==t.definition.downloadTitle&&(e.title=t.definition.downloadTitle),e},y.prototype.processData=function(){var e=this,i=[];return this.config.rowGroups?this.table.modules.groupRows.getGroups().forEach(function(t){i.push(e.processGroupData(t))}):i=this.table.rowManager.getData(!0,"download"),"function"==typeof this.table.options.downloadDataFormatter&&(i=this.table.options.downloadDataFormatter(i)),i},y.prototype.processGroupData=function(t){var e=this,i=t.getSubGroups(),o={type:"group",key:t.key};return i.length?(o.subGroups=[],i.forEach(function(t){o.subGroups.push(e.processGroupData(t))})):o.rows=t.getData(!0,"download"),o},y.prototype.triggerDownload=function(t,e,i,o){var n=document.createElement("a"),s=new Blob([t],{type:e});o=o||"Tabulator."+("function"==typeof i?"txt":i);(s=this.table.options.downloadReady.call(this.table,t,s))&&(navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(s,o):(n.setAttribute("href",window.URL.createObjectURL(s)),n.setAttribute("download",o),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)),this.table.options.downloadComplete&&this.table.options.downloadComplete())},y.prototype.getFieldValue=function(t,e){var i=this.columnsByField[t];return!!i&&i.getFieldValue(e)},y.prototype.commsReceived=function(t,e,i){switch(e){case"intercept":this.download(i.type,"",i.options,i.intercept)}},y.prototype.downloaders={csv:function(t,e,i,o,n){var s,a=this,r=[],l=[],h=i&&i.delimiter?i.delimiter:",";function c(t){t.forEach(function(i){var o=[];l.forEach(function(t){var e=a.getFieldValue(t,i);switch(void 0===e?"undefined":_typeof(e)){case"object":e=JSON.stringify(e);break;case"undefined":case"null":e="";break;default:e=e}o.push('"'+String(e).split('"').join('""')+'"')}),s.push(o.join(h))})}n.columnGroups?(console.warn("Download Warning - CSV downloader cannot process column groups"),t.forEach(function(t){!function e(t,i){t.subGroups?t.subGroups.forEach(function(t){e(t,i+1)}):(r.push('"'+String(t.title).split('"').join('""')+'"'),l.push(t.definition.field))}(t,0)})):t.forEach(function(t){r.push('"'+String(t.title).split('"').join('""')+'"'),l.push(t.field)}),s=[r.join(h)],n.rowGroups?(console.warn("Download Warning - CSV downloader cannot process row groups"),e.forEach(function(t){!function e(t){t.subGroups?t.subGroups.forEach(function(t){e(t)}):c(t.rows)}(t)})):c(e),o(s.join("\n"),"text/csv")},json:function(t,e,i,o,n){o(JSON.stringify(e,null,"\t"),"application/json")},pdf:function(t,e,i,o,n){var s=this,a=[],r=[],l=[],h=[],c={},u={},d=i.jsPDF||{},p=i&&i.title?i.title:"";function f(t){switch(void 0===t?"undefined":_typeof(t)){case"object":t=JSON.stringify(t);break;case"undefined":case"null":t="";break;default:t=t}return t}function m(t){t.forEach(function(i){var o=[];a.forEach(function(t){var e=s.getFieldValue(t,i);o.push(f(e))}),l.push(o)})}d.orientation||(d.orientation=i.orientation||"landscape"),d.unit||(d.unit="pt"),n.columnGroups?(console.warn("Download Warning - PDF downloader cannot process column groups"),t.forEach(function(t){!function e(t,i){t.subGroups?t.subGroups.forEach(function(t){e(t,i+1)}):(r.push(t.title||""),a.push(t.definition.field))}(t,0)})):t.forEach(function(t){t.field&&(r.push(t.title||""),a.push(t.field))}),n.rowGroups?e.forEach(function(t){!function e(t){var i=[];i.push(f(t.key)),h.push(l.length),l.push(i),t.subGroups?t.subGroups.forEach(function(t){e(t)}):m(t.rows)}(t)}):m(e);var g=new jsPDF(d);if(i&&i.autoTable&&(c="function"==typeof i.autoTable?i.autoTable(g)||{}:i.autoTable),n.rowGroups){var v=function(t,e){if(-1<h.indexOf(e.row.index))for(var i in u)t.styles[i]=u[i]};if(u=i.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},c.createdCell){var y=c.createdCell;c.createdCell=function(t,e){v(t,e),y(t,e)}}else c.createdCell=v}p&&(c.addPageContent=function(t){g.text(p,40,30)}),g.autoTable(r,l,c),o(g.output("arraybuffer"),"application/pdf")},xlsx:function(t,e,i,o,r){var l=this,n=i.sheetName||"Sheet1",s={SheetNames:[],Sheets:{}},h=[],c=[];function a(){var n=[],s=[],a=[];function i(t,e){var o;void 0===n[e]&&(n[e]=[]),void 0===c[e]&&(c[e]=[]),1<t.width&&c[e].push({type:"hoz",start:n[e].length,end:n[e].length+t.width-1}),n[e].push(t.title),t.subGroups?t.subGroups.forEach(function(t){i(t,e+1)}):(s.push(t.definition.field),s.length,o=0,n.forEach(function(t){var e=t.length;o<e&&(o=e)}),n.forEach(function(t){var e=t.length;if(e<o)for(var i=e;i<o;i++)t.push("")}),c[e].push({type:"vert",start:s.length-1}))}function o(t){t.forEach(function(i){var o=[];s.forEach(function(t){var e=l.getFieldValue(t,i);o.push("object"===(void 0===e?"undefined":_typeof(e))?JSON.stringify(e):e)}),a.push(o)})}return r.columnGroups?(t.forEach(function(t){i(t,0)}),n.forEach(function(t){a.push(t)})):(t.forEach(function(t){n.push(t.title),s.push(t.field)}),a.push(n)),r.rowGroups?e.forEach(function(t){!function e(t){var i=[];i.push(t.key),h.push(a.length),a.push(i),t.subGroups?t.subGroups.forEach(function(t){e(t)}):o(t.rows)}(t)}):o(e),function(){var t={},e={s:{c:0,r:0},e:{c:s.length,r:a.length}};XLSX.utils.sheet_add_aoa(t,a),t["!ref"]=XLSX.utils.encode_range(e);var i,o=(i=[],h.forEach(function(t){i.push({s:{r:t,c:0},e:{r:t,c:s.length-1}})}),c.forEach(function(t,e){t.forEach(function(t){"hoz"===t.type?i.push({s:{r:e,c:t.start},e:{r:e,c:t.end}}):e!=n.length-1&&i.push({s:{r:e,c:t.start},e:{r:n.length-1,c:t.start}})})}),i);return o.length&&(t["!merges"]=o),t}()}if(i.sheetOnly)o(a());else{if(i.sheets)for(var u in i.sheets)!0===i.sheets[u]?(s.SheetNames.push(u),s.Sheets[u]=a()):(s.SheetNames.push(u),this.table.modules.comms.send(i.sheets[u],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},intercept:function(t){s.Sheets[u]=t}}));else s.SheetNames.push(n),s.Sheets[n]=a();o(function(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),o=0;o!=t.length;++o)i[o]=255&t.charCodeAt(o);return e}(XLSX.write(s,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}}},w.prototype.registerModule("download",y);var b=function(t){this.table=t,this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1};b.prototype.initializeColumn=function(t){var e={editor:!1,blocked:!1,check:t.definition.editable,params:t.definition.editorParams||{}};switch(_typeof(t.definition.editor)){case"string":"tick"===t.definition.editor&&(t.definition.editor="tickCross",console.warn("DEPRECATION WANRING - the tick editor has been depricated, please use the tickCross editor")),this.editors[t.definition.editor]?e.editor=this.editors[t.definition.editor]:console.warn("Editor Error - No such editor found: ",t.definition.editor);break;case"function":e.editor=t.definition.editor;break;case"boolean":!0===t.definition.editor&&("function"!=typeof t.definition.formatter?("tick"===t.definition.formatter&&(t.definition.formatter="tickCross",console.warn("DEPRECATION WANRING - the tick editor has been depricated, please use the tickCross editor")),this.editors[t.definition.formatter]?e.editor=this.editors[t.definition.formatter]:e.editor=this.editors.input):console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",t.definition.formatter))}e.editor&&(t.modules.edit=e)},b.prototype.getCurrentCell=function(){return!!this.currentCell&&this.currentCell.getComponent()},b.prototype.clearEditor=function(){var t,e=this.currentCell;if(this.invalidEdit=!1,e){for(this.currentCell=!1,(t=e.getElement()).classList.remove("tabulator-validation-fail"),t.classList.remove("tabulator-editing");t.firstChild;)t.removeChild(t.firstChild);e.row.getElement().classList.remove("tabulator-row-editing")}},b.prototype.cancelEdit=function(){if(this.currentCell){var t=this.currentCell,e=this.currentCell.getComponent();this.clearEditor(),t.setValueActual(t.getValue()),t.column.cellEvents.cellEditCancelled&&t.column.cellEvents.cellEditCancelled.call(this.table,e),this.table.options.cellEditCancelled.call(this.table,e)}},b.prototype.bindEditor=function(e){var i=this,o=e.getElement();o.setAttribute("tabindex",0),o.addEventListener("click",function(t){o.classList.contains("tabulator-editing")||o.focus()}),o.addEventListener("mousedown",function(t){i.mouseClick=!0}),o.addEventListener("focus",function(t){i.recursionBlock||i.edit(e,t,!1)})},b.prototype.focusCellNoEvent=function(t){this.recursionBlock=!0,t.getElement().focus(),this.recursionBlock=!1},b.prototype.editCell=function(t,e){this.focusCellNoEvent(t),this.edit(t,!1,e)},b.prototype.edit=function(i,t,e){var o,n,s,a=this,r=!0,l=function(){},h=i.getElement();if(!this.currentCell){if(i.column.modules.edit.blocked)return this.mouseClick=!1,h.blur(),!1;switch(t&&t.stopPropagation(),_typeof(i.column.modules.edit.check)){case"function":r=i.column.modules.edit.check(i.getComponent());break;case"boolean":r=i.column.modules.edit.check}if(r||e){if(a.cancelEdit(),n=(a.currentCell=i).getComponent(),this.mouseClick&&(this.mouseClick=!1,i.column.cellEvents.cellClick&&i.column.cellEvents.cellClick.call(this.table,t,n)),i.column.cellEvents.cellEditing&&i.column.cellEvents.cellEditing.call(this.table,n),a.table.options.cellEditing.call(this.table,n),s="function"==typeof i.column.modules.edit.params?i.column.modules.edit.params(n):i.column.modules.edit.params,!1===(o=i.column.modules.edit.editor.call(a,n,function(t){l=t},function(t){if(a.currentCell===i){var e=!0;i.column.modules.validate&&a.table.modExists("validate")&&(e=a.table.modules.validate.validate(i.column.modules.validate,i.getComponent(),t)),!0===e?(a.clearEditor(),i.setValue(t,!0),a.table.options.dataTree&&a.table.modExists("dataTree")&&a.table.modules.dataTree.checkForRestyle(i)):(a.invalidEdit=!0,h.classList.add("tabulator-validation-fail"),a.focusCellNoEvent(i),l(),a.table.options.validationFailed.call(a.table,i.getComponent(),t,e))}},function(){a.currentCell===i&&(a.cancelEdit(),a.table.options.dataTree&&a.table.modExists("dataTree")&&a.table.modules.dataTree.checkForRestyle(i))},s)))return h.blur(),!1;if(!(o instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",o),h.blur(),!1;for(h.classList.add("tabulator-editing"),i.row.getElement().classList.add("tabulator-row-editing");h.firstChild;)h.removeChild(h.firstChild);h.appendChild(o),l();for(var c=h.children,u=0;u<c.length;u++)c[u].addEventListener("click",function(t){t.stopPropagation()});return!0}return this.mouseClick=!1,h.blur(),!1}this.invalidEdit||this.cancelEdit()},b.prototype.editors={input:function(t,e,i,o,n){var s=t.getValue(),a=document.createElement("input");function r(t){null==s&&""!==a.value||a.value!=s?i(a.value):o()}return a.setAttribute("type","text"),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",a.value=void 0!==s?s:"",e(function(){a.focus(),a.style.height="100%"}),a.addEventListener("change",r),a.addEventListener("blur",r),a.addEventListener("keydown",function(t){switch(t.keyCode){case 13:i(a.value);break;case 27:o()}}),a},textarea:function(e,t,i,o,n){var s=e.getValue(),a=String(null!==s&&"undefined"!==s?s:""),r=((a.match(/(?:\r\n|\r|\n)/g)||[]).length,document.createElement("textarea")),l=0;function h(t){null==s&&""!==r.value||r.value!=s?(i(r.value),setTimeout(function(){e.getRow().normalizeHeight()},300)):o()}return r.style.display="block",r.style.padding="2px",r.style.height="100%",r.style.width="100%",r.style.boxSizing="border-box",r.style.whiteSpace="pre-wrap",r.style.resize="none",r.value=a,t(function(){r.focus(),r.style.height="100%"}),r.addEventListener("change",h),r.addEventListener("blur",h),r.addEventListener("keyup",function(){r.style.height="";var t=r.scrollHeight;r.style.height=t+"px",t!=l&&(l=t,e.getRow().normalizeHeight())}),r.addEventListener("keydown",function(t){27==t.keyCode&&o()}),r},number:function(t,e,i,o,n){var s=t.getValue(),a=document.createElement("input");function r(){var t=a.value;isNaN(t)||""===t||(t=Number(t)),t!=s?i(t):o()}return a.setAttribute("type","number"),void 0!==n.max&&a.setAttribute("max",n.max),void 0!==n.min&&a.setAttribute("min",n.min),void 0!==n.step&&a.setAttribute("step",n.step),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",a.value=s,e(function(){a.focus(),a.style.height="100%",a.addEventListener("blur",function(t){r()})}),a.addEventListener("keydown",function(t){switch(t.keyCode){case 13:case 9:r();break;case 27:o()}}),a},range:function(t,e,i,o,n){var s=t.getValue(),a=document.createElement("input");function r(){var t=a.value;isNaN(t)||""===t||(t=Number(t)),t!=s?i(t):o()}return a.setAttribute("type","range"),void 0!==n.max&&a.setAttribute("max",n.max),void 0!==n.min&&a.setAttribute("min",n.min),void 0!==n.step&&a.setAttribute("step",n.step),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",a.value=s,e(function(){a.focus(),a.style.height="100%"}),a.addEventListener("blur",function(t){r()}),a.addEventListener("keydown",function(t){switch(t.keyCode){case 13:case 9:r();break;case 27:o()}}),a},select:function(r,t,e,i,l){var n=this,s=r.getElement(),a=r.getValue(),o=document.createElement("input"),h=document.createElement("div"),c=[],u=[],d={},p=!0;function f(t,i){var o=[],n=[];function s(t){return(t={label:l.listItemFormatter?l.listItemFormatter(t.value,t.label):t.label,value:t.value,element:!1}).value===i&&m(t),o.push(t),n.push(t),t}if("function"==typeof t&&(t=t(r)),Array.isArray(t))t.forEach(function(t){var e;"object"===(void 0===t?"undefined":_typeof(t))?t.options?(e={label:t.label,group:!0,element:!1},n.push(e),t.options.forEach(function(t){s(t)})):s(t):((e={label:l.listItemFormatter?l.listItemFormatter(t,t):t,value:t,element:!1}).value===i&&m(e),o.push(e),n.push(e))});else for(var e in t){var a={label:l.listItemFormatter?l.listItemFormatter(e,t[e]):t[e],value:e,element:!1};a.value===i&&m(a),o.push(a),n.push(a)}c=o,u=n,function(){for(;h.firstChild;)h.removeChild(h.firstChild);u.forEach(function(t){var e=t.element;e||(t.group?((e=document.createElement("div")).classList.add("tabulator-edit-select-list-group"),e.tabIndex=0,e.innerHTML=""===t.label?"&nbsp;":t.label):((e=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),e.tabIndex=0,e.innerHTML=""===t.label?"&nbsp;":t.label,e.addEventListener("click",function(){m(t),g()}),t===d&&e.classList.add("active")),e.addEventListener("mousedown",function(){p=!1,setTimeout(function(){p=!0},10)}),t.element=e),h.appendChild(e)})}()}function m(t){d&&d.element&&d.element.classList.remove("active"),d=t,o.value="&nbsp;"===t.label?"":t.label,t.element&&t.element.classList.add("active")}function g(){b(),a!==d.value?(a=d.value,e(d.value)):i()}function v(){b(),i()}function y(){if(!h.parentNode){!0===l.values?f((i={},o=r.getColumn()._getSelf(),n.table.getData().forEach(function(t){var e=o.getFieldValue(t);null!=e&&""!==e&&(i[e]=!0)}),Object.keys(i)),a):f(l.values||[],a);var t=w.prototype.helpers.elOffset(s);h.style.minWidth=s.offsetWidth+"px",h.style.top=t.top+s.offsetHeight+"px",h.style.left=t.left+"px",document.body.appendChild(h)}var i,o}function b(){h.parentNode&&h.parentNode.removeChild(h)}return(Array.isArray(l)||!Array.isArray(l)&&"object"===(void 0===l?"undefined":_typeof(l))&&!l.values)&&(console.warn("DEPRECATION WANRING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),l={values:l}),o.setAttribute("type","text"),o.style.padding="4px",o.style.width="100%",o.style.boxSizing="border-box",o.readOnly=!0,o.addEventListener("keydown",function(t){var e;switch(t.keyCode){case 38:t.stopImmediatePropagation(),t.stopPropagation(),0<(e=c.indexOf(d))&&m(c[e-1]);break;case 40:t.stopImmediatePropagation(),t.stopPropagation(),(e=c.indexOf(d))<c.length-1&&m(-1==e?c[0]:c[e+1]);break;case 13:g();break;case 27:v()}}),o.addEventListener("blur",function(t){p&&v()}),o.addEventListener("focus",function(t){y()}),(h=document.createElement("div")).classList.add("tabulator-edit-select-list"),t(function(){o.style.height="100%",o.focus()}),o},autocomplete:function(e,t,i,o,s){var n=this,a=e.getElement(),r=e.getValue(),l=document.createElement("input"),h=document.createElement("div"),c=[],u=[],d=[],p={},f=!0;function m(e,t){var i=[];s.searchFunc?i=s.searchFunc(e,d):""===e?s.showListOnEmpty&&c.forEach(function(t){i.push(t)}):c.forEach(function(t){null===t.value&&void 0===t.value||(-1<String(t.value).toLowerCase().indexOf(String(e).toLowerCase())||-1<String(t.title).toLowerCase().indexOf(String(e).toLowerCase()))&&i.push(t)}),u=i,function(i){var o=!1;for(;h.firstChild;)h.removeChild(h.firstChild);u.forEach(function(t){var e=t.element;e||((e=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),e.tabIndex=0,e.innerHTML=t.title,e.addEventListener("click",function(){g(t),v()}),e.addEventListener("mousedown",function(){f=!1,setTimeout(function(){f=!0},10)}),t.element=e,i&&t.value==r&&(l.value=t.title,t.element.classList.add("active"),o=!0),t===p&&(t.element.classList.add("active"),o=!0)),h.appendChild(e)}),o||g(!1)}(t)}function g(t,e){p&&p.element&&p.element.classList.remove("active"),(p=t)&&t.element&&t.element.classList.add("active")}function v(){b(),p?r!==p.value?(r=p.value,l.value=p.value,i(l.value)):o():s.freetext?(r=l.value,i(l.value)):s.allowEmpty&&""===l.value?(r=l.value,i(l.value)):o()}function y(){if(!h.parentNode){for(;h.firstChild;)h.removeChild(h.firstChild);(function(t,i){var o=[];if(Array.isArray(t))t.forEach(function(t){var e={title:s.listItemFormatter?s.listItemFormatter(t,t):t,value:t,element:!1};e.value===i&&g(e),o.push(e)});else for(var e in t){var n={title:s.listItemFormatter?s.listItemFormatter(e,t[e]):t[e],value:e,element:!1};n.value===i&&g(n),o.push(n)}c=o})(d=!0===s.values?(i={},o=e.getColumn()._getSelf(),n.table.getData().forEach(function(t){var e=o.getFieldValue(t);null!=e&&""!==e&&(i[e]=!0)}),Object.keys(i)):s.values||[],r);var t=w.prototype.helpers.elOffset(a);h.style.minWidth=a.offsetWidth+"px",h.style.top=t.top+a.offsetHeight+"px",h.style.left=t.left+"px",document.body.appendChild(h)}var i,o}function b(){h.parentNode&&h.parentNode.removeChild(h)}return l.setAttribute("type","text"),l.style.padding="4px",l.style.width="100%",l.style.boxSizing="border-box",l.addEventListener("keydown",function(t){var e;switch(t.keyCode){case 38:t.stopImmediatePropagation(),t.stopPropagation(),g(0<(e=u.indexOf(p))&&u[e-1]);break;case 40:t.stopImmediatePropagation(),t.stopPropagation(),(e=u.indexOf(p))<u.length-1&&g(-1==e?u[0]:u[e+1]);break;case 13:v();break;case 27:b(),o()}}),l.addEventListener("keyup",function(t){switch(t.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:m(l.value)}}),l.addEventListener("blur",function(t){f&&v()}),l.addEventListener("focus",function(t){y(),m(l.value=r,!0)}),(h=document.createElement("div")).classList.add("tabulator-edit-select-list"),t(function(){l.style.height="100%",l.focus()}),l},star:function(t,e,i,o,n){var s=this,a=t.getElement(),r=t.getValue(),l=a.getElementsByTagName("svg").length||5,h=a.getElementsByTagName("svg")[0]?a.getElementsByTagName("svg")[0].getAttribute("width"):14,c=[],u=document.createElement("div"),d=document.createElementNS("http://www.w3.org/2000/svg","svg");function p(i){c.forEach(function(t,e){e<i?("ie"==s.table.browser?t.setAttribute("class","tabulator-star-active"):t.classList.replace("tabulator-star-inactive","tabulator-star-active"),t.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==s.table.browser?t.setAttribute("class","tabulator-star-inactive"):t.classList.replace("tabulator-star-active","tabulator-star-inactive"),t.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function f(e){var t=d.cloneNode(!0);c.push(t),t.addEventListener("mouseover",function(t){t.stopPropagation(),p(e)}),t.addEventListener("click",function(t){t.stopPropagation(),i(e)}),u.appendChild(t)}function m(t){p(r=t)}a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.textOverflow="ellipsis",u.style.verticalAlign="middle",u.style.display="inline-block",u.style.padding="4px",d.setAttribute("width",h),d.setAttribute("height",h),d.setAttribute("viewBox","0 0 512 512"),d.setAttribute("xml:space","preserve"),d.style.padding="0 1px";for(var g=1;g<=l;g++)f(g);return p(r=Math.min(parseInt(r),l)),u.addEventListener("mouseover",function(t){p(0)}),u.addEventListener("click",function(t){i(0)}),a.addEventListener("blur",function(t){o()}),a.addEventListener("keydown",function(t){switch(t.keyCode){case 39:m(r+1);break;case 37:m(r-1);break;case 13:i(r);break;case 27:o()}}),u},progress:function(t,e,i,o,n){var s,a,r=t.getElement(),l=void 0===n.max?r.getElementsByTagName("div")[0].getAttribute("max")||100:n.max,h=void 0===n.min?r.getElementsByTagName("div")[0].getAttribute("min")||0:n.min,c=(l-h)/100,u=t.getValue()||0,d=document.createElement("div"),p=document.createElement("div");function f(){var t=c*Math.round(p.offsetWidth/(r.clientWidth/100))+h;i(t),r.setAttribute("aria-valuenow",t),r.setAttribute("aria-label",u)}return d.style.position="absolute",d.style.right="0",d.style.top="0",d.style.bottom="0",d.style.width="5px",d.classList.add("tabulator-progress-handle"),p.style.display="inline-block",p.style.position="absolute",p.style.top="8px",p.style.bottom="8px",p.style.left="4px",p.style.marginRight="4px",p.style.backgroundColor="#488CE9",p.style.maxWidth="100%",p.style.minWidth="0%",r.style.padding="0 4px",u=Math.min(parseFloat(u),l),u=Math.max(parseFloat(u),h),u=100-Math.round((u-h)/c),p.style.right=u+"%",r.setAttribute("aria-valuemin",h),r.setAttribute("aria-valuemax",l),p.appendChild(d),d.addEventListener("mousedown",function(t){s=t.screenX,a=p.offsetWidth}),d.addEventListener("mouseover",function(){d.style.cursor="ew-resize"}),r.addEventListener("mousemove",function(t){s&&(p.style.width=a+t.screenX-s+"px")}),r.addEventListener("mouseup",function(t){s&&(t.stopPropagation(),t.stopImmediatePropagation(),a=s=!1,f())}),r.addEventListener("keydown",function(t){switch(t.keyCode){case 39:p.style.width=p.clientWidth+r.clientWidth/100+"px";break;case 37:p.style.width=p.clientWidth-r.clientWidth/100+"px";break;case 13:f();break;case 27:o()}}),r.addEventListener("blur",function(){o()}),p},tickCross:function(t,e,i,o,n){var s=t.getValue(),a=document.createElement("input"),r=n.tristate,l=void 0===n.indeterminateValue?null:n.indeterminateValue,h=!1;function c(t){return r?t?h?l:a.checked:a.checked&&!h?(a.checked=!1,a.indeterminate=!0,h=!0,l):(h=!1,a.checked):a.checked}return a.setAttribute("type","checkbox"),a.style.marginTop="5px",a.style.boxSizing="border-box",a.value=s,!r||void 0!==s&&s!==l&&""!==s||(h=!0,a.indeterminate=!0),"firefox"!=this.table.browser&&e(function(){a.focus()}),a.checked=!0===s||"true"===s||"True"===s||1===s,a.addEventListener("change",function(t){i(c())}),a.addEventListener("blur",function(t){i(c(!0))}),a.addEventListener("keydown",function(t){13==t.keyCode&&i(c()),27==t.keyCode&&o()}),a}},w.prototype.registerModule("edit",b);var C=function(t){this.table=t,this.filterList=[],this.headerFilters={},this.headerFilterElements=[],this.headerFilterColumns=[],this.changed=!1};C.prototype.initializeColumn=function(n,t){var s,a=this,r=n.getField();n.modules.filter={success:function(o){var t,e="input"==n.modules.filter.tagType&&"text"==n.modules.filter.attrType||"textarea"==n.modules.filter.tagType?"partial":"match",i="";if(void 0===s||s!==o){if(s=o,n.modules.filter.emptyFunc(o))delete a.headerFilters[r];else{switch(n.modules.filter.value=o,_typeof(n.definition.headerFilterFunc)){case"string":a.filters[n.definition.headerFilterFunc]?(i=n.definition.headerFilterFunc,t=function(t){return a.filters[n.definition.headerFilterFunc](o,n.getFieldValue(t))}):console.warn("Header Filter Error - Matching filter function not found: ",n.definition.headerFilterFunc);break;case"function":i=t=function(t){var e=n.definition.headerFilterFuncParams||{},i=n.getFieldValue(t);return e="function"==typeof e?e(o,i,t):e,n.definition.headerFilterFunc(o,i,t,e)}}if(!t)switch(e){case"partial":t=function(t){return-1<String(n.getFieldValue(t)).toLowerCase().indexOf(String(o).toLowerCase())},i="like";break;default:t=function(t){return n.getFieldValue(t)==o},i="="}a.headerFilters[r]={value:o,func:t,type:i}}a.changed=!0,a.table.rowManager.filterRefresh()}},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(n)},C.prototype.generateHeaderFilterElement=function(t,e){var i,o,n,s,a,r,l,h=this,c=t.modules.filter.success,u=t.getField();if(t.modules.filter.headerElement&&t.modules.filter.headerElement.parentNode){var d=t.modules.filter.headerElement.parentNode,p=h.headerFilterElements.indexOf(d);0<=p&&h.headerFilterElements.splice(p,1);var f=h.headerFilterColumns.indexOf(f);0<=f&&h.headerFilterColumns.splice(f,1),t.contentElement.removeChild(d)}if(u){switch(t.modules.filter.emptyFunc=t.definition.headerFilterEmptyCheck||function(t){return!t&&"0"!==t},(i=document.createElement("div")).classList.add("tabulator-header-filter"),_typeof(t.definition.headerFilter)){case"string":h.table.modules.edit.editors[t.definition.headerFilter]?(o=h.table.modules.edit.editors[t.definition.headerFilter],"tick"!==t.definition.headerFilter&&"tickCross"!==t.definition.headerFilter||t.definition.headerFilterEmptyCheck||(t.modules.filter.emptyFunc=function(t){return!0!==t&&!1!==t})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",t.definition.editor);break;case"function":o=t.definition.headerFilter;break;case"boolean":t.modules.edit&&t.modules.edit.editor?o=t.modules.edit.editor:t.definition.formatter&&h.table.modules.edit.editors[t.definition.formatter]?(o=h.table.modules.edit.editors[t.definition.formatter],"tick"!==t.definition.formatter&&"tickCross"!==t.definition.formatter||t.definition.headerFilterEmptyCheck||(t.modules.filter.emptyFunc=function(t){return!0!==t&&!1!==t})):o=h.table.modules.edit.editors.input}if(o){if(s={getValue:function(){return void 0!==e?e:""},getField:function(){return t.definition.field},getElement:function(){return i},getColumn:function(){return t.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},l="function"==typeof(l=t.definition.headerFilterParams||{})?l.call(h.table):l,!(n=o.call(this.table.modules.edit,s,function(){},c,function(){},l)))return void console.warn("Filter Error - Cannot add filter to "+u+" column, editor returned a value of false");if(!(n instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+u+" column, editor should return an instance of Node, the editor returned:",n);u?h.table.modules.localize.bind("headerFilters|columns|"+t.definition.field,function(t){n.setAttribute("placeholder",void 0!==t&&t?t:h.table.modules.localize.getText("headerFilters|default"))}):h.table.modules.localize.bind("headerFilters|default",function(t){n.setAttribute("placeholder",void 0!==h.column.definition.headerFilterPlaceholder&&h.column.definition.headerFilterPlaceholder?h.column.definition.headerFilterPlaceholder:t)}),n.addEventListener("click",function(t){t.stopPropagation(),n.focus()}),a=!1,r=function(t){a&&clearTimeout(a),a=setTimeout(function(){c(n.value)},300)},t.modules.filter.headerElement=n,t.modules.filter.attrType=n.hasAttribute("type")?n.getAttribute("type").toLowerCase():"",t.modules.filter.tagType=n.tagName.toLowerCase(),!1!==t.definition.headerFilterLiveFilter&&("autocomplete"===t.definition.headerFilter||"autocomplete"===t.definition.editor&&!0===t.definition.headerFilter||(n.addEventListener("keyup",r),n.addEventListener("search",r),"number"==t.modules.filter.attrType&&n.addEventListener("change",function(t){c(n.value)}),"text"==t.modules.filter.attrType&&"ie"!==this.table.browser&&n.setAttribute("type","search")),"input"!=t.modules.filter.tagType&&"select"!=t.modules.filter.tagType&&"textarea"!=t.modules.filter.tagType||n.addEventListener("mousedown",function(t){t.stopPropagation()})),i.appendChild(n),t.contentElement.appendChild(i),h.headerFilterElements.push(n),h.headerFilterColumns.push(t)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",t.definition.title)},C.prototype.hideHeaderFilterElements=function(){this.headerFilterElements.forEach(function(t){t.style.display="none"})},C.prototype.showHeaderFilterElements=function(){this.headerFilterElements.forEach(function(t){t.style.display=""})},C.prototype.setHeaderFilterFocus=function(t){t.modules.filter&&t.modules.filter.headerElement?t.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",t.getField())},C.prototype.setHeaderFilterValue=function(t,e){t&&(t.modules.filter&&t.modules.filter.headerElement?(this.generateHeaderFilterElement(t,e),t.modules.filter.success(e)):console.warn("Column Filter Error - No header filter set on column:",t.getField()))},C.prototype.reloadHeaderFilter=function(t){t&&(t.modules.filter&&t.modules.filter.headerElement?this.generateHeaderFilterElement(t,t.modules.filter.value):console.warn("Column Filter Error - No header filter set on column:",t.getField()))},C.prototype.hasChanged=function(){var t=this.changed;return this.changed=!1,t},C.prototype.setFilter=function(t,e,i){this.filterList=[],Array.isArray(t)||(t=[{field:t,type:e,value:i}]),this.addFilter(t)},C.prototype.addFilter=function(t,e,i){var o=this;Array.isArray(t)||(t=[{field:t,type:e,value:i}]),t.forEach(function(t){(t=o.findFilter(t))&&(o.filterList.push(t),o.changed=!0)}),this.table.options.persistentFilter&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.save("filter")},C.prototype.findFilter=function(e){var i,o=this;if(Array.isArray(e))return this.findSubFilters(e);var t=!1;return"function"==typeof e.field?t=function(t){return e.field(t,e.type||{})}:o.filters[e.type]?t=(i=o.table.columnManager.getColumnByField(e.field))?function(t){return o.filters[e.type](e.value,i.getFieldValue(t))}:function(t){return o.filters[e.type](e.value,t[e.field])}:console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=t,!!e.func&&e},C.prototype.findSubFilters=function(t){var e=this,i=[];return t.forEach(function(t){(t=e.findFilter(t))&&i.push(t)}),!!i.length&&i},C.prototype.getFilters=function(t,e){var i=[];return t&&(i=this.getHeaderFilters()),this.filterList.forEach(function(t){i.push({field:t.field,type:t.type,value:t.value})}),e&&i.forEach(function(t){"function"==typeof t.type&&(t.type="function")}),i},C.prototype.getHeaderFilters=function(){var t=[];for(var e in this.headerFilters)t.push({field:e,type:this.headerFilters[e].type,value:this.headerFilters[e].value});return t},C.prototype.removeFilter=function(t,e,i){var o=this;Array.isArray(t)||(t=[{field:t,type:e,value:i}]),t.forEach(function(e){var t=-1;-1<(t="object"==_typeof(e.field)?o.filterList.findIndex(function(t){return e===t}):o.filterList.findIndex(function(t){return e.field===t.field&&e.type===t.type&&e.value===t.value}))?(o.filterList.splice(t,1),o.changed=!0):console.warn("Filter Error - No matching filter type found, ignoring: ",e.type)}),this.table.options.persistentFilter&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.save("filter")},C.prototype.clearFilter=function(t){this.filterList=[],t&&this.clearHeaderFilter(),this.changed=!0,this.table.options.persistentFilter&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.save("filter")},C.prototype.clearHeaderFilter=function(){var e=this;this.headerFilters={},this.headerFilterColumns.forEach(function(t){t.modules.filter.value=null,e.reloadHeaderFilter(t)}),this.changed=!0},C.prototype.search=function(t,e,i,o){var n=this,s=[],a=[];return Array.isArray(e)||(e=[{field:e,type:i,value:o}]),e.forEach(function(t){(t=n.findFilter(t))&&a.push(t)}),this.table.rowManager.rows.forEach(function(e){var i=!0;a.forEach(function(t){n.filterRecurse(t,e.getData())||(i=!1)}),i&&s.push("data"===t?e.getData("data"):e.getComponent())}),s},C.prototype.filter=function(t,e){var i=this,o=[],n=[];return i.table.options.dataFiltering&&i.table.options.dataFiltering.call(i.table,i.getFilters()),i.table.options.ajaxFiltering||!i.filterList.length&&!Object.keys(i.headerFilters).length?o=t.slice(0):t.forEach(function(t){i.filterRow(t)&&o.push(t)}),i.table.options.dataFiltered&&(o.forEach(function(t){n.push(t.getComponent())}),i.table.options.dataFiltered.call(i.table,i.getFilters(),n)),o},C.prototype.filterRow=function(t,e){var i=this,o=!0,n=t.getData();for(var s in i.filterList.forEach(function(t){i.filterRecurse(t,n)||(o=!1)}),i.headerFilters)i.headerFilters[s].func(n)||(o=!1);return o},C.prototype.filterRecurse=function(t,e){var i=this,o=!1;return Array.isArray(t)?t.forEach(function(t){i.filterRecurse(t,e)&&(o=!0)}):o=t.func(e),o},C.prototype.filters={"=":function(t,e){return e==t},"<":function(t,e){return e<t},"<=":function(t,e){return e<=t},">":function(t,e){return t<e},">=":function(t,e){return t<=e},"!=":function(t,e){return e!=t},regex:function(t,e){return"string"==typeof t&&(t=new RegExp(t)),t.test(e)},like:function(t,e){return null==t?e===t:null!=e&&-1<String(e).toLowerCase().indexOf(t.toLowerCase())},in:function(t,e){return Array.isArray(t)?-1<t.indexOf(e):(console.warn("Filter Error - filter value is not an array:",t),!1)}},w.prototype.registerModule("filter",C);var E=function(t){this.table=t};E.prototype.initializeColumn=function(t){var e={params:t.definition.formatterParams||{}};switch(_typeof(t.definition.formatter)){case"string":"tick"===t.definition.formatter&&(t.definition.formatter="tickCross",void 0===e.params.crossElement&&(e.params.crossElement=!1),console.warn("DEPRECATION WANRING - the tick formatter has been depricated, please use the tickCross formatter with the crossElement param set to false")),this.formatters[t.definition.formatter]?e.formatter=this.formatters[t.definition.formatter]:(console.warn("Formatter Error - No such formatter found: ",t.definition.formatter),e.formatter=this.formatters.plaintext);break;case"function":e.formatter=t.definition.formatter;break;default:e.formatter=this.formatters.plaintext}t.modules.format=e},E.prototype.cellRendered=function(t){t.column.modules.format.renderedCallback&&t.column.modules.format.renderedCallback()},E.prototype.formatValue=function(e){var t=e.getComponent(),i="function"==typeof e.column.modules.format.params?e.column.modules.format.params(t):e.column.modules.format.params;return e.column.modules.format.formatter.call(this,t,i,function(t){e.column.modules.format.renderedCallback=t})},E.prototype.sanitizeHTML=function(t){if(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=\/]/g,function(t){return e[t]})}return t},E.prototype.emptyToSpace=function(t){return null==t?"&nbsp":t},E.prototype.getFormatter=function(t){switch(void 0===t?"undefined":_typeof(t)){case"string":t=this.formatters[t]?this.formatters[t]:(console.warn("Formatter Error - No such formatter found: ",t),this.formatters.plaintext);break;case"function":t=t;break;default:t=this.formatters.plaintext}return t},E.prototype.formatters={plaintext:function(t,e,i){return this.emptyToSpace(this.sanitizeHTML(t.getValue()))},html:function(t,e,i){return t.getValue()},textarea:function(t,e,i){return t.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(t.getValue()))},money:function(t,e,i){var o,n,s,a,r=parseFloat(t.getValue()),l=e.decimal||".",h=e.thousand||",",c=e.symbol||"",u=!!e.symbolAfter,d=void 0!==e.precision?e.precision:2;if(isNaN(r))return this.emptyToSpace(this.sanitizeHTML(t.getValue()));for(o=!1!==d?r.toFixed(d):r,n=(o=String(o).split("."))[0],s=1<o.length?l+o[1]:"",a=/(\d+)(\d{3})/;a.test(n);)n=n.replace(a,"$1"+h+"$2");return u?n+s+c:c+n+s},link:function(t,e,i){var o=this.sanitizeHTML(t.getValue()),n=e.urlPrefix||"",s=this.emptyToSpace(o),a=document.createElement("a");if(e.labelField&&(s=t.getData()[e.labelField]),e.label)switch(_typeof(e.label)){case"string":s=e.label;break;case"function":s=e.label(t)}if(e.urlField&&(o=t.getData()[e.urlField]),e.url)switch(_typeof(e.url)){case"string":o=e.url;break;case"function":o=e.url(t)}return a.setAttribute("href",n+o),e.target&&a.setAttribute("target",e.target),a.innerHTML=this.emptyToSpace(s),a},image:function(t,e,i){var o=document.createElement("img");switch(o.setAttribute("src",t.getValue()),_typeof(e.height)){case"number":o.style.height=e.height+"px";break;case"string":o.style.height=e.height}switch(_typeof(e.width)){case"number":o.style.width=e.width+"px";break;case"string":o.style.width=e.width}return o.addEventListener("load",function(){t.getRow().normalizeHeight()}),o},tickCross:function(t,e,i){var o=t.getValue(),n=t.getElement(),s=e.allowEmpty,a=e.allowTruthy,r=void 0!==e.tickElement?e.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',l=void 0!==e.crossElement?e.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return a&&o||!0===o||"true"===o||"True"===o||1===o||"1"===o?(n.setAttribute("aria-checked",!0),r||""):!s||"null"!==o&&""!==o&&null!=o?(n.setAttribute("aria-checked",!1),l||""):(n.setAttribute("aria-checked","mixed"),"")},datetime:function(t,e,i){var o=e.inputFormat||"YYYY-MM-DD hh:mm:ss",n=e.outputFormat||"DD/MM/YYYY hh:mm:ss",s=void 0!==e.invalidPlaceholder?e.invalidPlaceholder:"",a=t.getValue(),r=moment(a,o);return r.isValid()?r.format(n):!0===s?a:"function"==typeof s?s(a):s},datetimediff:function(t,e,i){var o=e.inputFormat||"YYYY-MM-DD hh:mm:ss",n=void 0!==e.invalidPlaceholder?e.invalidPlaceholder:"",s=void 0!==e.suffix&&e.suffix,a=void 0!==e.unit?e.unit:void 0,r=void 0!==e.humanize&&e.humanize,l=void 0!==e.date?e.date:moment(),h=t.getValue(),c=moment(h,o);return c.isValid()?r?moment.duration(c.diff(l)).humanize(s):c.diff(l,a)+(s?" "+s:""):!0===n?h:"function"==typeof n?n(h):n},lookup:function(t,e,i){var o=t.getValue();return void 0===e[o]?(console.warn("Missing display value for "+o),o):e[o]},star:function(t,e,i){var o=t.getValue(),n=t.getElement(),s=e&&e.stars?e.stars:5,a=document.createElement("span"),r=document.createElementNS("http://www.w3.org/2000/svg","svg");a.style.verticalAlign="middle",r.setAttribute("width","14"),r.setAttribute("height","14"),r.setAttribute("viewBox","0 0 512 512"),r.setAttribute("xml:space","preserve"),r.style.padding="0 1px",o=parseInt(o)<s?parseInt(o):s;for(var l=1;l<=s;l++){var h=r.cloneNode(!0);h.innerHTML=l<=o?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',a.appendChild(h)}return n.style.whiteSpace="nowrap",n.style.overflow="hidden",n.style.textOverflow="ellipsis",n.setAttribute("aria-label",o),a},progress:function(t,e,i){var o,n,s,a,r,l=this.sanitizeHTML(t.getValue())||0,h=t.getElement(),c=e&&e.max?e.max:100,u=e&&e.min?e.min:0,d=e&&e.legendAlign?e.legendAlign:"center";switch(n=parseFloat(l)<=c?parseFloat(l):c,n=parseFloat(n)>=u?parseFloat(n):u,o=(c-u)/100,n=Math.round((n-u)/o),_typeof(e.color)){case"string":s=e.color;break;case"function":s=e.color(l);break;case"object":if(Array.isArray(e.color)){var p=100/e.color.length,f=Math.floor(n/p);f=Math.min(f,e.color.length-1),f=Math.max(f,0),s=e.color[f];break}default:s="#2DC214"}switch(_typeof(e.legend)){case"string":a=e.legend;break;case"function":a=e.legend(l);break;case"boolean":a=l;break;default:a=!1}switch(_typeof(e.legendColor)){case"string":r=e.legendColor;break;case"function":r=e.legendColor(l);break;case"object":if(Array.isArray(e.legendColor)){p=100/e.legendColor.length,f=Math.floor(n/p);f=Math.min(f,e.legendColor.length-1),f=Math.max(f,0),r=e.legendColor[f]}break;default:r="#000"}return h.style.minWidth="30px",h.style.position="relative",h.setAttribute("aria-label",n),"<div style='position:absolute; top:8px; bottom:8px; left:4px; right:4px;'  data-max='"+c+"' data-min='"+u+"'><div style='position:relative; height:100%; width:calc("+n+"%); background-color:"+s+"; display:inline-block;'></div></div>"+(a?"<div style='position:absolute; top:4px; left:0; text-align:"+d+"; width:100%; color:"+r+";'>"+a+"</div>":"")},color:function(t,e,i){return t.getElement().style.backgroundColor=this.sanitizeHTML(t.getValue()),""},buttonTick:function(t,e,i){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(t,e,i){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(t,e,i){return this.table.rowManager.activeRows.indexOf(t.getRow()._getSelf())+1},handle:function(t,e,i){return t.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(i,t,e){var o=!1,n=document.createElement("div");function s(t){var e=i.getRow().getElement().getElementsByClassName("tabulator-responsive-collapse")[0];(o=t)?(n.classList.add("open"),e&&(e.style.display="")):(n.classList.remove("open"),e&&(e.style.display="none"))}return n.classList.add("tabulator-responsive-collapse-toggle"),n.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",i.getElement().classList.add("tabulator-row-handle"),this.table.options.responsiveLayoutCollapseStartOpen&&(o=!0),n.addEventListener("click",function(){s(!o)}),s(o),n}},w.prototype.registerModule("format",E);var _=function(t){this.table=t,this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.initializationMode="left",this.active=!1};_.prototype.reset=function(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.active=!1},_.prototype.initializeColumn=function(t){var e={margin:0,edge:!1};t.definition.frozen?t.parent.isGroup?console.warn("Frozen Column Error - Grouped columns cannot be frozen"):t.isGroup?console.warn("Frozen Column Error - Column Groups cannot be frozen"):(e.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(t):this.rightColumns.unshift(t),this.active=!0,t.modules.frozen=e):this.initializationMode="right"},_.prototype.layout=function(){var i=this,o=(this.table.rowManager.element,0);i.active&&(i.leftMargin=i._calcSpace(i.leftColumns,i.leftColumns.length),i.table.columnManager.headersElement.style.marginLeft=i.leftMargin+"px",i.rightMargin=i._calcSpace(i.rightColumns,i.rightColumns.length),i.table.columnManager.element.style.paddingRight=i.rightMargin+"px",i.table.rowManager.activeRows.forEach(function(t){i.layoutRow(t)}),i.table.modExists("columnCalcs")&&(i.table.modules.columnCalcs.topInitialized&&i.table.modules.columnCalcs.topRow&&i.layoutRow(i.table.modules.columnCalcs.topRow),i.table.modules.columnCalcs.botInitialized&&i.table.modules.columnCalcs.botRow&&i.layoutRow(i.table.modules.columnCalcs.botRow)),i.leftColumns.forEach(function(t,e){t.modules.frozen.margin=i._calcSpace(i.leftColumns,e)+i.table.columnManager.scrollLeft,e==i.leftColumns.length-1?t.modules.frozen.edge=!0:t.modules.frozen.edge=!1,i.layoutColumn(t)}),o=i.table.rowManager.element.clientWidth+i.table.columnManager.scrollLeft,i.rightColumns.forEach(function(t,e){t.modules.frozen.margin=o-i._calcSpace(i.rightColumns,e+1),e==i.rightColumns.length-1?t.modules.frozen.edge=!0:t.modules.frozen.edge=!1,i.layoutColumn(t)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin+"px")},_.prototype.layoutColumn=function(e){var i=this;i.layoutElement(e.getElement(),e),e.cells.forEach(function(t){i.layoutElement(t.getElement(),e)})},_.prototype.layoutRow=function(t){t.getElement().style.paddingLeft=this.leftMargin+"px"},_.prototype.layoutElement=function(t,e){e.modules.frozen&&(t.style.position="absolute",t.style.left=e.modules.frozen.margin+"px",t.classList.add("tabulator-frozen"),e.modules.frozen.edge&&t.classList.add("tabulator-frozen-"+e.modules.frozen.position))},_.prototype._calcSpace=function(t,e){for(var i=0,o=0;o<e;o++)t[o].visible&&(i+=t[o].getWidth());return i},w.prototype.registerModule("frozenColumns",_);var x=function(t){this.table=t,this.topElement=document.createElement("div"),this.rows=[],this.displayIndex=0};x.prototype.initialize=function(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling)},x.prototype.setDisplayIndex=function(t){this.displayIndex=t},x.prototype.getDisplayIndex=function(){return this.displayIndex},x.prototype.isFrozen=function(){return!!this.rows.length},x.prototype.getRows=function(t){var i=t.slice(0);return this.rows.forEach(function(t){var e=i.indexOf(t);-1<e&&i.splice(e,1)}),i},x.prototype.freezeRow=function(t){t.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(t.modules.frozen=!0,this.topElement.appendChild(t.getElement()),t.initialize(),t.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(t),this.table.rowManager.refreshActiveData("display"),this.styleRows())},x.prototype.unfreezeRow=function(t){var e=this.rows.indexOf(t);if(t.modules.frozen){t.modules.frozen=!1;var i=t.getElement();i.parentNode.removeChild(i),this.table.rowManager.adjustTableSize(),this.rows.splice(e,1),this.table.rowManager.refreshActiveData("display"),this.rows.length&&this.styleRows()}else console.warn("Freeze Error - Row is already unfrozen")},x.prototype.styleRows=function(t){var i=this;this.rows.forEach(function(t,e){i.table.rowManager.styleRow(t,e)})},w.prototype.registerModule("frozenRows",x);var S=function(t){this._group=t,this.type="GroupComponent"};S.prototype.getKey=function(){return this._group.key},S.prototype.getElement=function(){return this._group.element},S.prototype.getRows=function(){return this._group.getRows(!0)},S.prototype.getSubGroups=function(){return this._group.getSubGroups(!0)},S.prototype.getParentGroup=function(){return!!this._group.parent&&this._group.parent.getComponent()},S.prototype.getVisibility=function(){return this._group.visible},S.prototype.show=function(){this._group.show()},S.prototype.hide=function(){this._group.hide()},S.prototype.toggle=function(){this._group.toggleVisibility()},S.prototype._getSelf=function(){return this._group},S.prototype.getTable=function(){return this._group.groupManager.table};var T=function(t,e,i,o,n,s,a){this.groupManager=t,this.parent=e,this.key=o,this.level=i,this.field=n,this.hasSubGroups=i<t.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=a,this.rows=[],this.groups=[],this.groupList=[],this.generator=s,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.visible=a?a.visible:void 0!==t.startOpen[i]?t.startOpen[i]:t.startOpen[0],this.createElements(),this.addBindings(),this.createValueGroups()};T.prototype.createElements=function(){this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-arrow")},T.prototype.createValueGroups=function(){var e=this,i=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[i]&&this.groupManager.allowedValues[i].forEach(function(t){e._createGroup(t,i)})},T.prototype.addBindings=function(){var e,i,o,n=this;n.groupManager.table.options.groupClick&&n.element.addEventListener("click",function(t){n.groupManager.table.options.groupClick(t,n.getComponent())}),n.groupManager.table.options.groupDblClick&&n.element.addEventListener("dblclick",function(t){n.groupManager.table.options.groupDblClick(t,n.getComponent())}),n.groupManager.table.options.groupContext&&n.element.addEventListener("contextmenu",function(t){n.groupManager.table.options.groupContext(t,n.getComponent())}),n.groupManager.table.options.groupTap&&(o=!1,n.element.addEventListener("touchstart",function(t){o=!0}),n.element.addEventListener("touchend",function(t){o&&n.groupManager.table.options.groupTap(t,n.getComponent()),o=!1})),n.groupManager.table.options.groupDblTap&&(e=null,n.element.addEventListener("touchend",function(t){e?(clearTimeout(e),e=null,n.groupManager.table.options.groupDblTap(t,n.getComponent())):e=setTimeout(function(){clearTimeout(e),e=null},300)})),n.groupManager.table.options.groupTapHold&&(i=null,n.element.addEventListener("touchstart",function(t){clearTimeout(i),i=setTimeout(function(){clearTimeout(i),i=null,o=!1,n.groupManager.table.options.groupTapHold(t,n.getComponent())},1e3)}),n.element.addEventListener("touchend",function(t){clearTimeout(i),i=null})),n.groupManager.table.options.groupToggleElement&&("arrow"==n.groupManager.table.options.groupToggleElement?n.arrowElement:n.element).addEventListener("click",function(t){t.stopPropagation(),t.stopImmediatePropagation(),n.toggleVisibility()})},T.prototype._createGroup=function(t,e){var i=e+"_"+t,o=new T(this.groupManager,this,e,t,this.groupManager.groupIDLookups[e].field,this.groupManager.headerGenerator[e]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[i]);this.groups[i]=o,this.groupList.push(o)},T.prototype._addRowToGroup=function(t){var e=this.level+1;if(this.hasSubGroups){var i=this.groupManager.groupIDLookups[e].func(t.getData()),o=e+"_"+i;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]?this.groups[o]&&this.groups[o].addRow(t):(this.groups[o]||this._createGroup(i,e),this.groups[o].addRow(t))}},T.prototype._addRow=function(t){this.rows.push(t),t.modules.group=this},T.prototype.insertRow=function(t,e,i){var o=this.conformRowData({});t.updateData(o);var n=this.rows.indexOf(e);-1<n?i?this.rows.splice(n+1,0,t):this.rows.splice(n,0,t):i?this.rows.push(t):this.rows.unshift(t),(t.modules.group=this).generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)},T.prototype.getRowIndex=function(t){},T.prototype.conformRowData=function(t){return this.field?t[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(t=this.parent.conformRowData(t)),t},T.prototype.removeRow=function(t){var e=this.rows.indexOf(t);-1<e&&this.rows.splice(e,1),this.rows.length?(this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))},T.prototype.removeGroup=function(t){var e,i=t.level+"_"+t.key;this.groups[i]&&(delete this.groups[i],-1<(e=this.groupList.indexOf(t))&&this.groupList.splice(e,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))},T.prototype.getHeadersAndRows=function(e){var i=[];return i.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(t){i=i.concat(t.getHeadersAndRows(e))}):(!e&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&this.calcs.top.detachElement(),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),i.push(this.calcs.top)),i=i.concat(this.rows),!e&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&this.calcs.bottom.detachElement(),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),i.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.options.groupClosedShowCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!e&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&this.calcs.top.detachElement(),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),i.push(this.calcs.top)),!e&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&this.calcs.bottom.detachElement(),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),i.push(this.calcs.bottom))),i},T.prototype.getData=function(t,e){var i=[];return this._visSet(),(!t||t&&this.visible)&&this.rows.forEach(function(t){i.push(t.getData(e||"data"))}),i},T.prototype.getRowCount=function(){var e=0;return this.groupList.length?this.groupList.forEach(function(t){e+=t.getRowCount()}):e=this.rows.length,e},T.prototype.toggleVisibility=function(){this.visible?this.hide():this.show()},T.prototype.hide=function(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(function(t){t.getHeadersAndRows().forEach(function(t){t.detachElement()})}):this.rows.forEach(function(t){var e=t.getElement();e.parentNode.removeChild(e)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!1)},T.prototype.show=function(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var i=this.getElement();this.groupList.length?this.groupList.forEach(function(t){t.getHeadersAndRows().forEach(function(t){var e=t.getElement();i.parentNode.insertBefore(e,i.nextSibling),t.initialize(),i=e})}):this.rows.forEach(function(t){var e=t.getElement();i.parentNode.insertBefore(e,i.nextSibling),t.initialize(),i=e}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!0)},T.prototype._visSet=function(){var e=[];"function"==typeof this.visible&&(this.rows.forEach(function(t){e.push(t.getData())}),this.visible=this.visible(this.key,this.getRowCount(),e,this.getComponent()))},T.prototype.getRowGroup=function(i){var o=!1;return this.groupList.length?this.groupList.forEach(function(t){var e=t.getRowGroup(i);e&&(o=e)}):this.rows.find(function(t){return t===i})&&(o=this),o},T.prototype.getSubGroups=function(e){var i=[];return this.groupList.forEach(function(t){i.push(e?t.getComponent():t)}),i},T.prototype.getRows=function(e){var i=[];return this.rows.forEach(function(t){i.push(e?t.getComponent():t)}),i},T.prototype.generateGroupHeaderContents=function(){var e=[];for(this.rows.forEach(function(t){e.push(t.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),e,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)},T.prototype.getElement=function(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var t=0;t<this.element.childNodes.length;++t)this.element.childNodes[t].parentNode.removeChild(this.element.childNodes[t]);return this.generateGroupHeaderContents(),this.element},T.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},T.prototype.normalizeHeight=function(){this.setHeight(this.element.clientHeight)},T.prototype.initialize=function(t){this.initialized&&!t||(this.normalizeHeight(),this.initialized=!0)},T.prototype.reinitialize=function(){this.initialized=!1,this.height=0,w.prototype.helpers.elVisible(this.element)&&this.initialize(!0)},T.prototype.setHeight=function(t){this.height!=t&&(this.height=t,this.outerHeight=this.element.offsetHeight)},T.prototype.getHeight=function(){return this.outerHeight},T.prototype.getGroup=function(){return this},T.prototype.reinitializeHeight=function(){},T.prototype.calcHeight=function(){},T.prototype.setCellHeight=function(){},T.prototype.clearCellHeight=function(){},T.prototype.getComponent=function(){return new S(this)};var R=function(t){this.table=t,this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0};R.prototype.initialize=function(){var s=this,t=s.table.options.groupBy,e=s.table.options.groupStartOpen,i=s.table.options.groupHeader;(this.allowedValues=s.table.options.groupValues,s.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],s.table.modules.localize.bind("groups|item",function(o,n){s.headerGenerator[0]=function(t,e,i){return(void 0===t?"":t)+"<span>("+e+" "+(1===e?o:n.groups.items)+")</span>"}}),this.groupIDLookups=[],Array.isArray(t)||t)?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(function(t){t.definition.topCalc&&s.table.modules.columnCalcs.initializeTopRow(),t.definition.bottomCalc&&s.table.modules.columnCalcs.initializeBottomRow()});Array.isArray(t)||(t=[t]),t.forEach(function(e,t){var i,o;i="function"==typeof e?e:(o=s.table.columnManager.getColumnByField(e))?function(t){return o.getFieldValue(t)}:function(t){return t[e]},s.groupIDLookups.push({field:"function"!=typeof e&&e,func:i,values:!!s.allowedValues&&s.allowedValues[t]})}),e&&(Array.isArray(e)||(e=[e]),e.forEach(function(t){t="function"==typeof t?t:function(){return!0}}),s.startOpen=e),i&&(s.headerGenerator=Array.isArray(i)?i:[i]),this.initialized=!0},R.prototype.setDisplayIndex=function(t){this.displayIndex=t},R.prototype.getDisplayIndex=function(){return this.displayIndex},R.prototype.getRows=function(t){return this.groupIDLookups.length?(this.table.options.dataGrouping.call(this.table),this.generateGroups(t),this.table.options.dataGrouped&&this.table.options.dataGrouped.call(this.table,this.getGroups(!0)),this.updateGroupRows()):t.slice(0)},R.prototype.getGroups=function(e){var i=[];return this.groupList.forEach(function(t){i.push(e?t.getComponent():t)}),i},R.prototype.pullGroupListData=function(t){var o=this,n=[];return t.forEach(function(t){var e={level:0,rowCount:0,headerContent:""},i=[];t.hasSubGroups?(i=o.pullGroupListData(t.groupList),e.level=t.level,e.rowCount=i.length-t.groupList.length,e.headerContent=t.generator(t.key,e.rowCount,t.rows,t),n.push(e),n=n.concat(i)):(e.level=t.level,e.headerContent=t.generator(t.key,t.rows.length,t.rows,t),e.rowCount=t.getRows().length,n.push(e),t.getRows().forEach(function(t){n.push(t.getData("data"))}))}),n},R.prototype.getGroupedData=function(){return this.pullGroupListData(this.groupList)},R.prototype.getRowGroup=function(i){var o=!1;return this.groupList.forEach(function(t){var e=t.getRowGroup(i);e&&(o=e)}),o},R.prototype.countGroups=function(){return this.groupList.length},R.prototype.generateGroups=function(t){var e=this,i=e.groups;e.groups={},e.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(function(t){e.createGroup(t,0,i)}),t.forEach(function(t){e.assignRowToExistingGroup(t,i)})):t.forEach(function(t){e.assignRowToGroup(t,i)})},R.prototype.createGroup=function(t,e,i){var o,n=e+"_"+t;i=i||[],o=new T(this,!1,e,t,this.groupIDLookups[0].field,this.headerGenerator[0],i[n]),this.groups[n]=o,this.groupList.push(o)},R.prototype.assignRowToGroup=function(t,e){var i=this.groupIDLookups[0].func(t.getData()),o="0_"+i;this.groups[o]||this.createGroup(i,0,e),this.groups[o].addRow(t)},R.prototype.assignRowToExistingGroup=function(t,e){var i="0_"+this.groupIDLookups[0].func(t.getData());this.groups[i]&&this.groups[i].addRow(t)},R.prototype.assignRowToGroup=function(t,e){var i=this.groupIDLookups[0].func(t.getData()),o=!this.groups["0_"+i];return o&&this.createGroup(i,0,e),this.groups["0_"+i].addRow(t),!o},R.prototype.updateGroupRows=function(t){var e=[];if(this.groupList.forEach(function(t){e=e.concat(t.getHeadersAndRows())}),t){var i=this.table.rowManager.setDisplayRows(e,this.getDisplayIndex());!0!==i&&this.setDisplayIndex(i),this.table.rowManager.refreshActiveData("group",!0,!0)}return e},R.prototype.scrollHeaders=function(e){this.groupList.forEach(function(t){t.arrowElement.style.marginLeft=e+"px"})},R.prototype.removeGroup=function(t){var e,i=t.level+"_"+t.key;this.groups[i]&&(delete this.groups[i],-1<(e=this.groupList.indexOf(t))&&this.groupList.splice(e,1))},w.prototype.registerModule("groupRows",R);var k=function(t){this.table=t,this.history=[],this.index=-1};k.prototype.clear=function(){this.history=[],this.index=-1},k.prototype.action=function(t,e,i){this.history=this.history.slice(0,this.index+1),this.history.push({type:t,component:e,data:i}),this.index++},k.prototype.getHistoryUndoSize=function(){return this.index+1},k.prototype.getHistoryRedoSize=function(){return this.history.length-(this.index+1)},k.prototype.undo=function(){if(-1<this.index){var t=this.history[this.index];return this.undoers[t.type].call(this,t),this.index--,this.table.options.historyUndo.call(this.table,t.type,t.component.getComponent(),t.data),!0}return console.warn("History Undo Error - No more history to undo"),!1},k.prototype.redo=function(){if(this.history.length-1>this.index){this.index++;var t=this.history[this.index];return this.redoers[t.type].call(this,t),this.table.options.historyRedo.call(this.table,t.type,t.component.getComponent(),t.data),!0}return console.warn("History Redo Error - No more history to redo"),!1},k.prototype.undoers={cellEdit:function(t){t.component.setValueProcessData(t.data.oldValue)},rowAdd:function(t){t.component.deleteActual()},rowDelete:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this._rebindRow(t.component,e)},rowMove:function(t){this.table.rowManager.moveRowActual(t.component,this.table.rowManager.rows[t.data.pos],!1),this.table.rowManager.redraw()}},k.prototype.redoers={cellEdit:function(t){t.component.setValueProcessData(t.data.newValue)},rowAdd:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this._rebindRow(t.component,e)},rowDelete:function(t){t.component.deleteActual()},rowMove:function(t){this.table.rowManager.moveRowActual(t.component,this.table.rowManager.rows[t.data.pos],!1),this.table.rowManager.redraw()}},k.prototype._rebindRow=function(i,o){this.history.forEach(function(t){if(t.component instanceof c)t.component===i&&(t.component=o);else if(t.component instanceof a&&t.component.row===i){var e=t.component.column.getField();e&&(t.component=o.getCell(e))}})},w.prototype.registerModule("history",k);var D=function(t){this.table=t,this.fieldIndex=[],this.hasIndex=!1};D.prototype.parseTable=function(){var t=this.table.element,e=this.table.options,i=(e.columns,t.getElementsByTagName("th")),o=t.getElementsByTagName("tbody")[0],n=[];this.hasIndex=!1,this.table.options.htmlImporting.call(this.table),o=o?o.getElementsByTagName("tr"):[],this._extractOptions(t,e),i.length?this._extractHeaders(i,o):this._generateBlankHeaders(i,o);for(var s=0;s<o.length;s++){var a=o[s].getElementsByTagName("td"),r={};this.hasIndex||(r[e.index]=s);for(var l=0;l<a.length;l++){var h=a[l];void 0!==this.fieldIndex[l]&&(r[this.fieldIndex[l]]=h.innerHTML)}n.push(r)}var c=document.createElement("div"),u=t.attributes;for(var l in u)"object"==_typeof(u[l])&&c.setAttribute(u[l].name,u[l].value);t.parentNode.replaceChild(c,t),e.data=n,this.table.options.htmlImported.call(this.table),this.table.element=c},D.prototype._extractOptions=function(t,e){var i=t.attributes;for(var o in i){var n,s=i[o];if(s&&"object"==(void 0===s?"undefined":_typeof(s))&&s.name&&0===s.name.indexOf("tabulator-"))for(var a in n=s.name.replace("tabulator-",""),e)a.toLowerCase()==n&&(e[a]=this._attribValue(s.value))}},D.prototype._attribValue=function(t){return"true"===t||"false"!==t&&t},D.prototype._findCol=function(e){return this.table.options.columns.find(function(t){return t.title===e})||!1},D.prototype._extractHeaders=function(t,e){for(var i=0;i<t.length;i++){var o,n,s=t[i],a=!1,r=this._findCol(s.textContent);for(var l in r?a=!0:r={title:s.textContent.trim()},r.field||(r.field=s.textContent.trim().toLowerCase().replace(" ","_")),(o=s.getAttribute("width"))&&!r.width&&(r.width=o),n=s.attributes,this._extractOptions(s,r),n){var h=n[l];h&&"object"==(void 0===h?"undefined":_typeof(h))&&h.name&&0===h.name.indexOf("tabulator-")&&(r[h.name.replace("tabulator-","")]=this._attribValue(h.value))}this.fieldIndex[i]=r.field,r.field==this.table.options.index&&(this.hasIndex=!0),a||this.table.options.columns.push(r)}},D.prototype._generateBlankHeaders=function(t,e){for(var i=0;i<t.length;i++){var o=t[i],n={title:"",field:"col"+i};this.fieldIndex[i]=n.field;var s=o.getAttribute("width");s&&(n.width=s),this.table.options.columns.push(n)}},w.prototype.registerModule("htmlTableImport",D);var M=function(t){this.table=t,this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1};M.prototype.initialize=function(){var t=this.table.options.keybindings,e={};if(this.watchKeys={},!(this.pressedKeys=[])!==t){for(var i in this.bindings)e[i]=this.bindings[i];if(Object.keys(t).length)for(var o in t)e[o]=t[o];this.mapBindings(e),this.bindEvents()}},M.prototype.mapBindings=function(t){var i=this,o=this,e=function(e){i.actions[e]?t[e]&&("object"!==_typeof(t[e])&&(t[e]=[t[e]]),t[e].forEach(function(t){o.mapBinding(e,t)})):console.warn("Key Binding Error - no such action:",e)};for(var n in t)e(n)},M.prototype.mapBinding=function(t,e){var i=this,o={action:this.actions[t],keys:[],ctrl:!1,shift:!1};e.toString().toLowerCase().split(" ").join("").split("+").forEach(function(t){switch(t){case"ctrl":o.ctrl=!0;break;case"shift":o.shift=!0;break;default:t=parseInt(t),o.keys.push(t),i.watchKeys[t]||(i.watchKeys[t]=[]),i.watchKeys[t].push(o)}})},M.prototype.bindEvents=function(){var o=this;this.keyupBinding=function(e){var t=e.keyCode,i=o.watchKeys[t];i&&(o.pressedKeys.push(t),i.forEach(function(t){o.checkBinding(e,t)}))},this.keydownBinding=function(t){var e=t.keyCode;if(o.watchKeys[e]){var i=o.pressedKeys.indexOf(e);-1<i&&o.pressedKeys.splice(i,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)},M.prototype.clearBindings=function(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)},M.prototype.checkBinding=function(t,e){var i=this,o=!0;return t.ctrlKey==e.ctrl&&t.shiftKey==e.shift&&(e.keys.forEach(function(t){-1==i.pressedKeys.indexOf(t)&&(o=!1)}),o&&e.action.call(i,t),!0)},M.prototype.bindings={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},M.prototype.actions={keyBlock:function(t){t.stopPropagation(),t.preventDefault()},scrollPageUp:function(t){var e=this.table.rowManager,i=e.scrollTop-e.height;e.element.scrollHeight;t.preventDefault(),e.displayRowsCount&&(0<=i?e.element.scrollTop=i:e.scrollToRow(e.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(t){var e=this.table.rowManager,i=e.scrollTop+e.height,o=e.element.scrollHeight;t.preventDefault(),e.displayRowsCount&&(i<=o?e.element.scrollTop=i:e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(t){var e=this.table.rowManager;t.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(t){var e=this.table.rowManager;t.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1]),this.table.element.focus()},navPrev:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().prev())},navNext:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().next())},navLeft:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().left())},navRight:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().right())},navUp:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().up())},navDown:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().down())},undo:function(t){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(t.preventDefault(),this.table.modules.history.undo()))},redo:function(t){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(t.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(t){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(this.table.options.selectable&&"highlight"!=this.table.options.selectable?"selected":"active",null,null,null,!0)}},w.prototype.registerModule("keybindings",M);var L=function(t){this.table=t,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this)};L.prototype.createPlaceholderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-col"),t.classList.add("tabulator-col-placeholder"),t},L.prototype.initializeColumn=function(e){var i,o=this,t={};e.modules.frozen||(i=e.getElement(),t.mousemove=function(t){e.parent===o.moving.parent&&(t.pageX-w.prototype.helpers.elOffset(i).left+o.table.columnManager.element.scrollLeft>e.getWidth()/2?o.toCol===e&&o.toColAfter||(i.parentNode.insertBefore(o.placeholderElement,i.nextSibling),o.moveColumn(e,!0)):(o.toCol!==e||o.toColAfter)&&(i.parentNode.insertBefore(o.placeholderElement,i),o.moveColumn(e,!1)))}.bind(o),i.addEventListener("mousedown",function(t){1===t.which&&(o.checkTimeout=setTimeout(function(){o.startMove(t,e)},o.checkPeriod))}),i.addEventListener("mouseup",function(t){1===t.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)})),e.modules.moveColumn=t},L.prototype.startMove=function(t,e){var i=e.getElement();this.moving=e,this.startX=t.pageX-w.prototype.helpers.elOffset(i).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",i.parentNode.insertBefore(this.placeholderElement,i),i.parentNode.removeChild(i),this.hoverElement=i.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom="0",this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(t)},L.prototype._bindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(t){t.modules.moveColumn.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveColumn.mousemove)})},L.prototype._unbindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(t){t.modules.moveColumn.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveColumn.mousemove)})},L.prototype.moveColumn=function(t,e){var o=this.moving.getCells();this.toCol=t,(this.toColAfter=e)?t.getCells().forEach(function(t,e){var i=t.getElement();i.parentNode.insertBefore(o[e].getElement(),i.nextSibling)}):t.getCells().forEach(function(t,e){var i=t.getElement();i.parentNode.insertBefore(o[e].getElement(),i)})},L.prototype.endMove=function(t){1===t.which&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumn(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove))},L.prototype.moveHover=function(t){var e,i=this,o=i.table.columnManager.getElement(),n=o.scrollLeft,s=t.pageX-w.prototype.helpers.elOffset(o).left+n;i.hoverElement.style.left=s-i.startX+"px",s-n<i.autoScrollMargin&&(i.autoScrollTimeout||(i.autoScrollTimeout=setTimeout(function(){e=Math.max(0,n-5),i.table.rowManager.getElement().scrollLeft=e,i.autoScrollTimeout=!1},1))),n+o.clientWidth-s<i.autoScrollMargin&&(i.autoScrollTimeout||(i.autoScrollTimeout=setTimeout(function(){e=Math.min(o.clientWidth,n+5),i.table.rowManager.getElement().scrollLeft=e,i.autoScrollTimeout=!1},1)))},w.prototype.registerModule("moveColumn",L);var P=function(t){this.table=t,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.connection=!1,this.connections=[],this.connectedTable=!1,this.connectedRow=!1};P.prototype.createPlaceholderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.classList.add("tabulator-row-placeholder"),t},P.prototype.initialize=function(t){this.connection=this.table.options.movableRowsConnectedTables},P.prototype.setHandle=function(t){this.hasHandle=t},P.prototype.initializeRow=function(i){var t,o=this,e={};e.mouseup=function(t){o.tableRowDrop(t,i)}.bind(o),e.mousemove=function(t){var e;t.pageY-w.prototype.helpers.elOffset(i.element).top+o.table.rowManager.element.scrollTop>i.getHeight()/2?o.toRow===i&&o.toRowAfter||((e=i.getElement()).parentNode.insertBefore(o.placeholderElement,e.nextSibling),o.moveRow(i,!0)):(o.toRow!==i||o.toRowAfter)&&((e=i.getElement()).parentNode.insertBefore(o.placeholderElement,e),o.moveRow(i,!1))}.bind(o),this.hasHandle||((t=i.getElement()).addEventListener("mousedown",function(t){1===t.which&&(o.checkTimeout=setTimeout(function(){o.startMove(t,i)},o.checkPeriod))}),t.addEventListener("mouseup",function(t){1===t.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)})),i.modules.moveRow=e},P.prototype.initializeCell=function(e){var i=this,t=e.getElement();t.addEventListener("mousedown",function(t){1===t.which&&(i.checkTimeout=setTimeout(function(){i.startMove(t,e.row)},i.checkPeriod))}),t.addEventListener("mouseup",function(t){1===t.which&&i.checkTimeout&&clearTimeout(i.checkTimeout)})},P.prototype._bindMouseMove=function(){this.table.rowManager.getDisplayRows().forEach(function(t){"row"===t.type&&t.modules.moveRow.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveRow.mousemove)})},P.prototype._unbindMouseMove=function(){this.table.rowManager.getDisplayRows().forEach(function(t){"row"===t.type&&t.modules.moveRow.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveRow.mousemove)})},P.prototype.startMove=function(t,e){var i=e.getElement();this.setStartPosition(t,e),this.moving=e,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(e)):(i.parentNode.insertBefore(this.placeholderElement,i),i.parentNode.removeChild(i)),this.hoverElement=i.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(t)},P.prototype.setStartPosition=function(t,e){var i,o;i=e.getElement(),this.connection?(o=i.getBoundingClientRect(),this.startX=o.left-t.pageX+window.scrollX,this.startY=o.top-t.pageY+window.scrollY):this.startY=t.pageY-i.getBoundingClientRect().top},P.prototype.endMove=function(t){t&&1!==t.which||(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))},P.prototype.moveRow=function(t,e){this.toRow=t,this.toRowAfter=e},P.prototype.moveHover=function(t){this.connection?this.moveHoverConnections.call(this,t):this.moveHoverTable.call(this,t)},P.prototype.moveHoverTable=function(t){var e=this.table.rowManager.getElement(),i=e.scrollTop,o=t.pageY-e.getBoundingClientRect().top+i;this.hoverElement.style.top=o-this.startY+"px"},P.prototype.moveHoverConnections=function(t){this.hoverElement.style.left=this.startX+t.pageX+"px",this.hoverElement.style.top=this.startY+t.pageY+"px"},P.prototype.connectToTables=function(t){var e=this.table.modules.comms.getConnections(this.connection);this.table.options.movableRowsSendingStart.call(this.table,e),this.table.modules.comms.send(this.connection,"moveRow","connect",{row:t})},P.prototype.disconnectFromTables=function(){var t=this.table.modules.comms.getConnections(this.connection);this.table.options.movableRowsSendingStop.call(this.table,t),this.table.modules.comms.send(this.connection,"moveRow","disconnect")},P.prototype.connect=function(t,e){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=t,this.connectedRow=e,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(function(t){"row"===t.type&&t.modules.moveRow&&t.modules.moveRow.mouseup&&t.getElement().addEventListener("mouseup",t.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.table.options.movableRowsReceivingStart.call(this.table,e,t),!0)},P.prototype.disconnect=function(t){t===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(function(t){"row"===t.type&&t.modules.moveRow&&t.modules.moveRow.mouseup&&t.getElement().removeEventListener("mouseup",t.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.table.options.movableRowsReceivingStop.call(this.table,t)):console.warn("Move Row Error - trying to disconnect from non connected table")},P.prototype.dropComplete=function(t,e,i){var o=!1;if(i){switch(_typeof(this.table.options.movableRowsSender)){case"string":o=this.senders[this.table.options.movableRowsSender];break;case"function":o=this.table.options.movableRowsSender}o?o.call(this,this.moving.getComponent(),e?e.getComponent():void 0,t):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.table.options.movableRowsSent.call(this.table,this.moving.getComponent(),e?e.getComponent():void 0,t)}else this.table.options.movableRowsSentFailed.call(this.table,this.moving.getComponent(),e?e.getComponent():void 0,t);this.endMove()},P.prototype.tableRowDrop=function(t,e){var i=!1,o=!1;switch(t.stopImmediatePropagation(),_typeof(this.table.options.movableRowsReceiver)){case"string":i=this.receivers[this.table.options.movableRowsReceiver];break;case"function":i=this.table.options.movableRowsReceiver}i?o=i.call(this,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),o?this.table.options.movableRowsReceived.call(this.table,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):this.table.options.movableRowsReceivedFailed.call(this.table,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable),this.table.modules.comms.send(this.connectedTable,"moveRow","dropcomplete",{row:e,success:o})},P.prototype.receivers={insert:function(t,e,i){return this.table.addRow(t.getData(),void 0,e),!0},add:function(t,e,i){return this.table.addRow(t.getData()),!0},update:function(t,e,i){return!!e&&(e.update(t.getData()),!0)},replace:function(t,e,i){return!!e&&(this.table.addRow(t.getData(),void 0,e),e.delete(),!0)}},P.prototype.senders={delete:function(t,e,i){t.delete()}},P.prototype.commsReceived=function(t,e,i){switch(e){case"connect":return this.connect(t,i.row);case"disconnect":return this.disconnect(t);case"dropcomplete":return this.dropComplete(t,i.row,i.success)}},w.prototype.registerModule("moveRow",P);var A=function(t){this.table=t,this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0};A.prototype.initializeColumn=function(o){var n=this,s=!1,a={};this.allowedTypes.forEach(function(t){var e,i="mutator"+(t.charAt(0).toUpperCase()+t.slice(1));o.definition[i]&&(e=n.lookupMutator(o.definition[i]))&&(s=!0,a[i]={mutator:e,params:o.definition[i+"Params"]||{}})}),s&&(o.modules.mutate=a)},A.prototype.lookupMutator=function(t){var e=!1;switch(void 0===t?"undefined":_typeof(t)){case"string":this.mutators[t]?e=this.mutators[t]:console.warn("Mutator Error - No such mutator found, ignoring: ",t);break;case"function":e=t}return e},A.prototype.transformRow=function(n,s,a){var r,l="mutator"+(s.charAt(0).toUpperCase()+s.slice(1));return this.enabled&&this.table.columnManager.traverse(function(t){var e,i,o;t.modules.mutate&&(e=t.modules.mutate[l]||t.modules.mutate.mutator||!1)&&(r=t.getFieldValue(n),(!a||a&&void 0!==r)&&(o=t.getComponent(),i="function"==typeof e.params?e.params(r,n,s,o):e.params,t.setFieldValue(n,e.mutator(r,n,s,i,o))))}),n},A.prototype.transformCell=function(t,e){var i=t.column.modules.mutate.mutatorEdit||t.column.modules.mutate.mutator||!1;return i?i.mutator(e,t.row.getData(),"edit",i.params,t.getComponent()):e},A.prototype.enable=function(){this.enabled=!0},A.prototype.disable=function(){this.enabled=!1},A.prototype.mutators={},w.prototype.registerModule("mutator",A);var I=function(t){this.table=t,this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.createElements()};I.prototype.createElements=function(){var t;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(t=document.createElement("button")).classList.add("tabulator-page"),t.setAttribute("type","button"),t.setAttribute("role","button"),t.setAttribute("aria-label",""),t.setAttribute("title",""),this.firstBut=t.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=t.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=t.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=t.cloneNode(!0),this.lastBut.setAttribute("data-page","last")},I.prototype.initialize=function(t){var e=this;for(var i in e.table.options.paginationDataSent)e.paginationDataSentNames[i]=e.table.options.paginationDataSent[i];for(var o in e.table.options.paginationDataReceived)e.paginationDataReceivedNames[o]=e.table.options.paginationDataReceived[o];e.table.modules.localize.bind("pagination|first",function(t){e.firstBut.innerHTML=t}),e.table.modules.localize.bind("pagination|first_title",function(t){e.firstBut.setAttribute("aria-label",t),e.firstBut.setAttribute("title",t)}),e.table.modules.localize.bind("pagination|prev",function(t){e.prevBut.innerHTML=t}),e.table.modules.localize.bind("pagination|prev_title",function(t){e.prevBut.setAttribute("aria-label",t),e.prevBut.setAttribute("title",t)}),e.table.modules.localize.bind("pagination|next",function(t){e.nextBut.innerHTML=t}),e.table.modules.localize.bind("pagination|next_title",function(t){e.nextBut.setAttribute("aria-label",t),e.nextBut.setAttribute("title",t)}),e.table.modules.localize.bind("pagination|last",function(t){e.lastBut.innerHTML=t}),e.table.modules.localize.bind("pagination|last_title",function(t){e.lastBut.setAttribute("aria-label",t),e.lastBut.setAttribute("title",t)}),e.firstBut.addEventListener("click",function(){e.setPage(1)}),e.prevBut.addEventListener("click",function(){e.previousPage()}),e.nextBut.addEventListener("click",function(){e.nextPage().then(function(){}).catch(function(){})}),e.lastBut.addEventListener("click",function(){e.setPage(e.max)}),e.table.options.paginationElement&&(e.element=e.table.options.paginationElement),e.element.appendChild(e.firstBut),e.element.appendChild(e.prevBut),e.element.appendChild(e.pagesElement),e.element.appendChild(e.nextBut),e.element.appendChild(e.lastBut),e.table.options.paginationElement||t||e.table.footerManager.append(e.element,e),e.mode=e.table.options.pagination,e.size=e.table.options.paginationSize||Math.floor(e.table.rowManager.getElement().clientHeight/24),e.count=e.table.options.paginationButtonCount},I.prototype.initializeProgressive=function(t){this.initialize(!0),this.mode="progressive_"+t,this.progressiveLoad=!0},I.prototype.setDisplayIndex=function(t){this.displayIndex=t},I.prototype.getDisplayIndex=function(){return this.displayIndex},I.prototype.setMaxRows=function(t){this.max=t?Math.ceil(t/this.size):1,this.page>this.max&&(this.page=this.max)},I.prototype.reset=function(t){return("local"==this.mode||t)&&(this.page=1),!0},I.prototype.setMaxPage=function(t){this.max=t||1,this.page>this.max&&(this.page=this.max,this.trigger())},I.prototype.setPage=function(i){var o=this;return new Promise(function(t,e){0<i&&i<=o.max?(o.page=i,o.trigger().then(function(){t()}).catch(function(){e()})):(console.warn("Pagination Error - Requested page is out of range of 1 - "+o.max+":",i),e())})},I.prototype.setPageSize=function(t){0<t&&(this.size=t)},I.prototype._setPageButtons=function(){for(var t=this,e=Math.floor((this.count-1)/2),i=Math.ceil((this.count-1)/2),o=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),n=this.page<=i?Math.min(this.count,this.max):Math.min(this.page+i,this.max);t.pagesElement.firstChild;)t.pagesElement.removeChild(t.pagesElement.firstChild);1==t.page?(t.firstBut.disabled=!0,t.prevBut.disabled=!0):(t.firstBut.disabled=!1,t.prevBut.disabled=!1),t.page==t.max?(t.lastBut.disabled=!0,t.nextBut.disabled=!0):(t.lastBut.disabled=!1,t.nextBut.disabled=!1);for(var s=o;s<=n;s++)0<s&&s<=t.max&&t.pagesElement.appendChild(t._generatePageButton(s));this.footerRedraw()},I.prototype._generatePageButton=function(e){var i=this,t=document.createElement("button");return t.classList.add("tabulator-page"),e==i.page&&t.classList.add("active"),t.setAttribute("type","button"),t.setAttribute("role","button"),t.setAttribute("aria-label","Show Page "+e),t.setAttribute("title","Show Page "+e),t.setAttribute("data-page",e),t.textContent=e,t.addEventListener("click",function(t){i.setPage(e)}),t},I.prototype.previousPage=function(){var i=this;return new Promise(function(t,e){1<i.page?(i.page--,i.trigger().then(function(){t()}).catch(function(){e()})):(console.warn("Pagination Error - Previous page would be less than page 1:",0),e())})},I.prototype.nextPage=function(){var i=this;return new Promise(function(t,e){i.page<i.max?(i.page++,i.trigger().then(function(){t()}).catch(function(){e()})):(i.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+i.max+":",i.max+1),e())})},I.prototype.getPage=function(){return this.page},I.prototype.getPageMax=function(){return this.max},I.prototype.getPageSize=function(t){return this.size},I.prototype.getMode=function(){return this.mode},I.prototype.getRows=function(t){var e,i,o;if("local"!=this.mode)return this._setPageButtons(),t.slice(0);e=[],o=(i=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(var n=i;n<o;n++)t[n]&&e.push(t[n]);return e},I.prototype.trigger=function(){var i,o=this;return new Promise(function(t,e){switch(o.mode){case"local":i=o.table.rowManager.scrollLeft,o.table.rowManager.refreshActiveData("page"),o.table.rowManager.scrollHorizontal(i),o.table.options.pageLoaded.call(o.table,o.getPage()),t();break;case"remote":case"progressive_load":case"progressive_scroll":o.table.modules.ajax.blockActiveRequest(),o._getRemotePage().then(function(){t()}).catch(function(){e()});break;default:console.warn("Pagination Error - no such pagination mode:",o.mode),e()}})},I.prototype._getRemotePage=function(){var n,s,a=this,r=this;return new Promise(function(e,i){if(r.table.modExists("ajax",!0)||i(),n=w.prototype.helpers.deepClone(r.table.modules.ajax.getParams()||{}),(s=r.table.modules.ajax.getParams())[a.paginationDataSentNames.page]=r.page,a.size&&(s[a.paginationDataSentNames.size]=a.size),a.table.options.ajaxSorting&&a.table.modExists("sort")){var t=r.table.modules.sort.getSort();t.forEach(function(t){delete t.column}),s[a.paginationDataSentNames.sorters]=t}if(a.table.options.ajaxFiltering&&a.table.modExists("filter")){var o=r.table.modules.filter.getFilters(!0,!0);s[a.paginationDataSentNames.filters]=o}r.table.modules.ajax.setParams(s),r.table.modules.ajax.sendRequest(a.progressiveLoad).then(function(t){r._parseRemoteData(t),e()}).catch(function(t){i()}),r.table.modules.ajax.setParams(n)})},I.prototype._parseRemoteData=function(t){var e,i,o=this;if(void 0===t[this.paginationDataReceivedNames.last_page]&&console.warn("Remote Pagination Error - Server response missing '"+this.paginationDataReceivedNames.last_page+"' property"),t[this.paginationDataReceivedNames.data])if(this.max=parseInt(t[this.paginationDataReceivedNames.last_page])||1,this.progressiveLoad)switch(this.mode){case"progressive_load":this.table.rowManager.addRows(t[this.paginationDataReceivedNames.data]),this.page<this.max&&setTimeout(function(){o.nextPage().then(function(){}).catch(function(){})},o.table.options.ajaxProgressiveLoadDelay);break;case"progressive_scroll":t=this.table.rowManager.getData().concat(t[this.paginationDataReceivedNames.data]),this.table.rowManager.setData(t,!0),i=this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight,o.table.rowManager.element.scrollHeight<=o.table.rowManager.element.clientHeight+i&&o.nextPage().then(function(){}).catch(function(){})}else e=this.table.rowManager.scrollLeft,this.table.rowManager.setData(t[this.paginationDataReceivedNames.data]),this.table.rowManager.scrollHorizontal(e),this.table.columnManager.scrollHorizontal(e),this.table.options.pageLoaded.call(this.table,this.getPage());else console.warn("Remote Pagination Error - Server response missing '"+this.paginationDataReceivedNames.data+"' property")},I.prototype.footerRedraw=function(){var t=this.table.footerManager.element;Math.ceil(t.clientWidth)-t.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(t.clientWidth)-t.scrollWidth<0&&(this.pagesElement.style.display="none"))},I.prototype.paginationDataSentNames={page:"page",size:"size",sorters:"sorters",filters:"filters"},I.prototype.paginationDataReceivedNames={current_page:"current_page",last_page:"last_page",data:"data"},w.prototype.registerModule("page",I);var O=function(t){this.table=t,this.mode="",this.id="",this.persistProps=["field","width","visible"]};O.prototype.initialize=function(t,e){this.mode=!0!==t?t:void 0!==window.localStorage?"local":"cookie",this.id="tabulator-"+(e||this.table.element.getAttribute("id")||"")},O.prototype.load=function(t,e){var i=this.retreiveData(t);return e&&(i=i?this.mergeDefinition(e,i):e),i},O.prototype.retreiveData=function(t){var e="",i=this.id+("columns"===t?"":"-"+t);switch(this.mode){case"local":e=localStorage.getItem(i);break;case"cookie":var o=document.cookie,n=o.indexOf(i+"="),s=void 0;-1<n&&(-1<(s=(o=o.substr(n)).indexOf(";"))&&(o=o.substr(0,s)),e=o.replace(i+"=",""));break;default:console.warn("Persistance Load Error - invalid mode selected",this.mode)}return!!e&&JSON.parse(e)},O.prototype.mergeDefinition=function(o,i){var n=this,s=[];return(i=i||[]).forEach(function(t,e){var i=n._findColumn(o,t);i&&(i.width=t.width,i.visible=t.visible,i.columns&&(i.columns=n.mergeDefinition(i.columns,t.columns)),s.push(i))}),o.forEach(function(t,e){n._findColumn(i,t)||(s.length>e?s.splice(e,0,t):s.push(t))}),s},O.prototype._findColumn=function(t,e){var i=e.columns?"group":e.field?"field":"object";return t.find(function(t){switch(i){case"group":return t.title===e.title&&t.columns.length===e.columns.length;case"field":return t.field===e.field;case"object":return t===e}})},O.prototype.save=function(t){var e={};switch(t){case"columns":e=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":e=this.table.modules.filter.getFilters();break;case"sort":e=this.validateSorters(this.table.modules.sort.getSort())}var i=this.id+("columns"===t?"":"-"+t);this.saveData(i,e)},O.prototype.validateSorters=function(t){return t.forEach(function(t){t.column=t.field,delete t.field}),t},O.prototype.saveData=function(t,e){switch(e=JSON.stringify(e),this.mode){case"local":localStorage.setItem(t,e);break;case"cookie":var i=new Date;i.setDate(i.getDate()+1e4),document.cookie=t+"="+e+"; expires="+i.toUTCString();break;default:console.warn("Persistance Save Error - invalid mode selected",this.mode)}},O.prototype.parseColumns=function(t){var i=this,o=[];return t.forEach(function(t){var e={};t.isGroup?(e.title=t.getDefinition().title,e.columns=i.parseColumns(t.getColumns())):(e.title=t.getDefinition().title,e.field=t.getField(),e.width=t.getWidth(),e.visible=t.visible),o.push(e)}),o},w.prototype.registerModule("persistence",O);var F=function(t){this.table=t,this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null};F.prototype.initializeColumn=function(t,n,e){var s=this,i=!1,o=this.table.options.resizableColumns;if("header"===t&&(i="textarea"==n.definition.formatter||n.definition.variableHeight,n.modules.resize={variableHeight:i}),!0===o||o==t){var a=document.createElement("div");a.className="tabulator-col-resize-handle";var r=document.createElement("div");r.className="tabulator-col-resize-handle prev",a.addEventListener("click",function(t){t.stopPropagation()}),a.addEventListener("mousedown",function(t){var e=n.getLastColumn();e&&s._checkResizability(e)&&(s.startColumn=n,s._mouseDown(t,e))}),a.addEventListener("dblclick",function(t){s._checkResizability(n)&&n.reinitializeWidth(!0)}),r.addEventListener("click",function(t){t.stopPropagation()}),r.addEventListener("mousedown",function(t){var e,i,o;(e=n.getFirstColumn())&&(o=0<(i=s.table.columnManager.findColumnIndex(e))&&s.table.columnManager.getColumnByIndex(i-1))&&s._checkResizability(o)&&(s.startColumn=n,s._mouseDown(t,o))}),r.addEventListener("dblclick",function(t){var e,i,o;(e=n.getFirstColumn())&&(o=0<(i=s.table.columnManager.findColumnIndex(e))&&s.table.columnManager.getColumnByIndex(i-1))&&s._checkResizability(o)&&o.reinitializeWidth(!0)}),e.appendChild(a),e.appendChild(r)}},F.prototype._checkResizability=function(t){return void 0!==t.definition.resizable?t.definition.resizable:this.table.options.resizableColumns},F.prototype._mouseDown=function(t,i){var o=this;function n(t){i.setWidth(o.startWidth+(t.screenX-o.startX)),!o.table.browserSlow&&i.modules.resize&&i.modules.resize.variableHeight&&i.checkCellHeights()}o.table.element.classList.add("tabulator-block-select"),t.stopPropagation(),o.startColumn.modules.edit&&(o.startColumn.modules.edit.blocked=!0),o.startX=t.screenX,o.startWidth=i.getWidth(),document.body.addEventListener("mousemove",n),document.body.addEventListener("mouseup",function t(e){o.startColumn.modules.edit&&(o.startColumn.modules.edit.blocked=!1),o.table.browserSlow&&i.modules.resize&&i.modules.resize.variableHeight&&i.checkCellHeights(),document.body.removeEventListener("mouseup",t),document.body.removeEventListener("mousemove",n),o.table.element.classList.remove("tabulator-block-select"),o.table.options.persistentLayout&&o.table.modExists("persistence",!0)&&o.table.modules.persistence.save("columns"),o.table.options.columnResized.call(o.table,i.getComponent())})},w.prototype.registerModule("resizeColumns",F);var H=function(t){this.table=t,this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null};H.prototype.initializeRow=function(i){var o=this,t=i.getElement(),e=document.createElement("div");e.className="tabulator-row-resize-handle";var n=document.createElement("div");n.className="tabulator-row-resize-handle prev",e.addEventListener("click",function(t){t.stopPropagation()}),e.addEventListener("mousedown",function(t){o.startRow=i,o._mouseDown(t,i)}),n.addEventListener("click",function(t){t.stopPropagation()}),n.addEventListener("mousedown",function(t){var e=o.table.rowManager.prevDisplayRow(i);e&&(o.startRow=e,o._mouseDown(t,e))}),t.appendChild(e),t.appendChild(n)},H.prototype._mouseDown=function(t,e){var i=this;function o(t){e.setHeight(i.startHeight+(t.screenY-i.startY))}i.table.element.classList.add("tabulator-block-select"),t.stopPropagation(),i.startY=t.screenY,i.startHeight=e.getHeight(),document.body.addEventListener("mousemove",o),document.body.addEventListener("mouseup",function(t){document.body.removeEventListener("mouseup",o),document.body.removeEventListener("mousemove",o),i.table.element.classList.remove("tabulator-block-select"),i.table.options.rowResized.call(this.table,e.getComponent())})},w.prototype.registerModule("resizeRows",H);var z=function(t){this.table=t,this.binding=!1,this.observer=!1};z.prototype.initialize=function(t){var e=this.table;"undefined"!=typeof ResizeObserver&&"virtual"===e.rowManager.getRenderMode()?(this.observer=new ResizeObserver(function(t){e.redraw()}),this.observer.observe(e.element)):(this.binding=function(){e.redraw()},window.addEventListener("resize",this.binding))},z.prototype.clearBindings=function(t){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element)},w.prototype.registerModule("resizeTable",z);var N=function(t){this.table=t,this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0};N.prototype.initialize=function(){var i=this,o=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(t,e){t.modules.responsive&&t.modules.responsive.order&&t.modules.responsive.visible&&(t.modules.responsive.index=e,o.push(t),t.visible||"collapse"!==i.mode||i.hiddenColumns.push(t))}),o=(o=o.reverse()).sort(function(t,e){return e.modules.responsive.order-t.modules.responsive.order||e.modules.responsive.index-t.modules.responsive.index}),this.columns=o,"collapse"===this.mode&&this.generateCollapsedContent()},N.prototype.initializeColumn=function(t){var e=t.getDefinition();t.modules.responsive={order:void 0===e.responsive?1:e.responsive,visible:!1!==e.visible}},N.prototype.layoutRow=function(t){var e=t.getElement(),i=document.createElement("div");i.classList.add("tabulator-responsive-collapse"),e.classList.contains("tabulator-calcs")||(t.modules.responsiveLayout={element:i},this.collapseStartOpen||(i.style.display="none"),e.appendChild(i),this.generateCollapsedRowContent(t))},N.prototype.updateColumnVisibility=function(t,e){t.modules.responsive&&(t.modules.responsive.visible=e,this.initialize())},N.prototype.hideColumn=function(t){t.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(t),this.generateCollapsedContent())},N.prototype.showColumn=function(t){var e;t.show(!1,!0),t.setWidth(t.getWidth()),"collapse"===this.mode&&(-1<(e=this.hiddenColumns.indexOf(t))&&this.hiddenColumns.splice(e,1),this.generateCollapsedContent())},N.prototype.update=function(){for(var t=this,e=!0;e;){var i="fitColumns"==t.table.modules.layout.getMode()?t.table.columnManager.getFlexBaseWidth():t.table.columnManager.getWidth(),o=t.table.columnManager.element.clientWidth-i;if(o<0){var n=t.columns[t.index];n?(t.hideColumn(n),t.index++):e=!1}else{var s=t.columns[t.index-1];s&&0<o&&o>=s.getWidth()?(t.showColumn(s),t.index--):e=!1}t.table.rowManager.activeRowsCount||t.table.rowManager.renderEmptyScroll()}},N.prototype.generateCollapsedContent=function(){var e=this;this.table.rowManager.getDisplayRows().forEach(function(t){e.generateCollapsedRowContent(t)})},N.prototype.generateCollapsedRowContent=function(t){var e,i;if(t.modules.responsiveLayout){for(e=t.modules.responsiveLayout.element;e.firstChild;)e.removeChild(e.firstChild);(i=this.collapseFormatter(this.generateCollapsedRowData(t)))&&e.appendChild(i)}},N.prototype.generateCollapsedRowData=function(i){var o,n=this,s=i.getData(),a={};return this.hiddenColumns.forEach(function(t){var e=t.getFieldValue(s);t.definition.title&&t.field&&(t.modules.format&&n.table.options.responsiveLayoutCollapseUseFormatters?(o={value:!1,data:{},getValue:function(){return e},getData:function(){return s},getElement:function(){return document.createElement("div")},getRow:function(){return i.getComponent()},getColumn:function(){return t.getComponent()}},a[t.definition.title]=t.modules.format.formatter.call(n.table.modules.format,o,t.modules.format.params)):a[t.definition.title]=e)}),a},N.prototype.formatCollapsedData=function(t){var e=document.createElement("table"),i="";for(var o in t)i+="<tr><td><strong>"+o+"</strong></td><td>"+t[o]+"</td></tr>";return e.innerHTML=i,Object.keys(t).length?e:""},w.prototype.registerModule("responsiveLayout",N);var B=function(t){this.table=t,this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[]};B.prototype.clearSelectionData=function(t){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],t||this._rowSelectionChanged()},B.prototype.initializeRow=function(a){var r=this,t=a.getElement(),e=function t(){setTimeout(function(){r.selecting=!1},50),document.body.removeEventListener("mouseup",t)};a.modules.select={selected:!1},r.table.options.selectableCheck.call(this.table,a.getComponent())?(t.classList.add("tabulator-selectable"),t.classList.remove("tabulator-unselectable"),r.table.options.selectable&&"highlight"!=r.table.options.selectable&&(r.table.options.selectableRangeMode&&"click"===r.table.options.selectableRangeMode?t.addEventListener("click",function(t){if(t.shiftKey){r.lastClickedRow=r.lastClickedRow||a;var e=r.table.rowManager.getDisplayRowIndex(r.lastClickedRow),i=r.table.rowManager.getDisplayRowIndex(a),o=e<=i?e:i,n=i<=e?e:i,s=r.table.rowManager.getDisplayRows().slice(0).splice(o,n-o+1);t.ctrlKey?(s.forEach(function(t){t!==r.lastClickedRow&&r.toggleRow(t)}),r.lastClickedRow=a):(r.deselectRows(),r.selectRows(s))}else t.ctrlKey?r.toggleRow(a):(r.deselectRows(),r.selectRows(a)),r.lastClickedRow=a}):(t.addEventListener("click",function(t){r.selecting||r.toggleRow(a)}),t.addEventListener("mousedown",function(t){if(t.shiftKey)return r.selecting=!0,r.selectPrev=[],document.body.addEventListener("mouseup",e),document.body.addEventListener("keyup",e),r.toggleRow(a),!1}),t.addEventListener("mouseenter",function(t){r.selecting&&(r.toggleRow(a),r.selectPrev[1]==a&&r.toggleRow(r.selectPrev[0]))}),t.addEventListener("mouseout",function(t){r.selecting&&r.selectPrev.unshift(a)})))):(t.classList.add("tabulator-unselectable"),t.classList.remove("tabulator-selectable"))},B.prototype.toggleRow=function(t){this.table.options.selectableCheck.call(this.table,t.getComponent())&&(t.modules.select.selected?this._deselectRow(t):this._selectRow(t))},B.prototype.selectRows=function(t){var e=this;switch(void 0===t?"undefined":_typeof(t)){case"undefined":e.table.rowManager.rows.forEach(function(t){e._selectRow(t,!0,!0)}),e._rowSelectionChanged();break;case"boolean":!0===t&&(e.table.rowManager.activeRows.forEach(function(t){e._selectRow(t,!0,!0)}),e._rowSelectionChanged());break;default:Array.isArray(t)?(t.forEach(function(t){e._selectRow(t,!0,!0)}),e._rowSelectionChanged()):e._selectRow(t,!1,!0)}},B.prototype._selectRow=function(t,e,i){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!i&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var o=this.table.rowManager.findRow(t);o?-1==this.selectedRows.indexOf(o)&&(o.modules.select.selected=!0,o.getElement().classList.add("tabulator-selected"),this.selectedRows.push(o),e||(this.table.options.rowSelected.call(this.table,o.getComponent()),this._rowSelectionChanged())):e||console.warn("Selection Error - No such row found, ignoring selection:"+t)},B.prototype.isRowSelected=function(t){return-1!==this.selectedRows.indexOf(t)},B.prototype.deselectRows=function(t){var e,i=this;if(void 0===t){e=i.selectedRows.length;for(var o=0;o<e;o++)i._deselectRow(i.selectedRows[0],!0);i._rowSelectionChanged()}else Array.isArray(t)?(t.forEach(function(t){i._deselectRow(t,!0)}),i._rowSelectionChanged()):i._deselectRow(t)},B.prototype._deselectRow=function(t,e){var i,o=this.table.rowManager.findRow(t);o?-1<(i=this.selectedRows.findIndex(function(t){return t==o}))&&(o.modules.select.selected=!1,o.getElement().classList.remove("tabulator-selected"),this.selectedRows.splice(i,1),e||(this.table.options.rowDeselected.call(this.table,o.getComponent()),this._rowSelectionChanged())):e||console.warn("Deselection Error - No such row found, ignoring selection:"+t)},B.prototype.getSelectedData=function(){var e=[];return this.selectedRows.forEach(function(t){e.push(t.getData())}),e},B.prototype.getSelectedRows=function(){var e=[];return this.selectedRows.forEach(function(t){e.push(t.getComponent())}),e},B.prototype._rowSelectionChanged=function(){this.table.options.rowSelectionChanged.call(this.table,this.getSelectedData(),this.getSelectedRows())},w.prototype.registerModule("selectRow",B);var W=function(t){this.table=t,this.sortList=[],this.changed=!1};W.prototype.initializeColumn=function(n,t){var e,i,s=this,o=!1;switch(_typeof(n.definition.sorter)){case"string":s.sorters[n.definition.sorter]?o=s.sorters[n.definition.sorter]:console.warn("Sort Error - No such sorter found: ",n.definition.sorter);break;case"function":o=n.definition.sorter}!(n.modules.sort={sorter:o,dir:"none",params:n.definition.sorterParams||{},startingDir:n.definition.headerSortStartingDir||"asc"})!==n.definition.headerSort&&((e=n.getElement()).classList.add("tabulator-sortable"),(i=document.createElement("div")).classList.add("tabulator-arrow"),t.appendChild(i),e.addEventListener("click",function(t){var e="",i=[],o=!1;n.modules.sort&&(e="asc"==n.modules.sort.dir?"desc":"desc"==n.modules.sort.dir?"asc":n.modules.sort.startingDir,s.table.options.columnHeaderSortMulti&&(t.shiftKey||t.ctrlKey)?(-1<(o=(i=s.getSort()).findIndex(function(t){return t.field===n.getField()}))?(i[o].dir="asc"==i[o].dir?"desc":"asc",o!=i.length-1&&i.push(i.splice(o,1)[0])):i.push({column:n,dir:e}),s.setSort(i)):s.setSort(n,e),s.table.rowManager.sorterRefresh())}))},W.prototype.hasChanged=function(){var t=this.changed;return this.changed=!1,t},W.prototype.getSort=function(){var e=[];return this.sortList.forEach(function(t){t.column&&e.push({column:t.column.getComponent(),field:t.column.getField(),dir:t.dir})}),e},W.prototype.setSort=function(t,e){var i=this,o=[];Array.isArray(t)||(t=[{column:t,dir:e}]),t.forEach(function(t){var e;(e=i.table.columnManager.findColumn(t.column))?(t.column=e,o.push(t),i.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",t.column)}),i.sortList=o,this.table.options.persistentSort&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.save("sort")},W.prototype.clear=function(){this.setSort([])},W.prototype.findSorter=function(t){var e,i=this.table.rowManager.activeRows[0],o="string";if(i&&(i=i.getData(),t.getField()))switch(void 0===(e=t.getFieldValue(i))?"undefined":_typeof(e)){case"undefined":o="string";break;case"boolean":o="boolean";break;default:isNaN(e)||""===e?e.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(o="alphanum"):o="number"}return this.sorters[o]},W.prototype.sort=function(){var i,o=this;i=this.table.options.sortOrderReverse?o.sortList.slice().reverse():o.sortList,o.table.options.dataSorting&&o.table.options.dataSorting.call(o.table,o.getSort()),o.clearColumnHeaders(),o.table.options.ajaxSorting?i.forEach(function(t,e){o.setColumnHeader(t.column,t.dir)}):i.forEach(function(t,e){t.column&&t.column.modules.sort&&(t.column.modules.sort.sorter||(t.column.modules.sort.sorter=o.findSorter(t.column)),o._sortItem(t.column,t.dir,i,e)),o.setColumnHeader(t.column,t.dir)}),o.table.options.dataSorted&&o.table.options.dataSorted.call(o.table,o.getSort(),o.table.rowManager.getComponents(!0))},W.prototype.clearColumnHeaders=function(){this.table.columnManager.getRealColumns().forEach(function(t){t.modules.sort&&(t.modules.sort.dir="none",t.getElement().setAttribute("aria-sort","none"))})},W.prototype.setColumnHeader=function(t,e){t.modules.sort.dir=e,t.getElement().setAttribute("aria-sort",e)},W.prototype._sortItem=function(n,s,a,r){var l=this,t=l.table.rowManager.activeRows,h="function"==typeof n.modules.sort.params?n.modules.sort.params(n.getComponent(),s):n.modules.sort.params;t.sort(function(t,e){var i=l._sortRow(t,e,n,s,h);if(0===i&&r)for(var o=r-1;0<=o&&0===(i=l._sortRow(t,e,a[o].column,a[o].dir,h));o--);return i})},W.prototype._sortRow=function(t,e,i,o,n){var s,a,r="asc"==o?t:e,l="asc"==o?e:t;return t=void 0!==(t=i.getFieldValue(r.getData()))?t:"",e=void 0!==(e=i.getFieldValue(l.getData()))?e:"",s=r.getComponent(),a=l.getComponent(),i.modules.sort.sorter.call(this,t,e,s,a,i.getComponent(),o,n)},W.prototype.sorters={number:function(t,e,i,o,n,s,a){var r=a.alignEmptyValues,l=0;if(t=parseFloat(String(t).replace(",","")),e=parseFloat(String(e).replace(",","")),isNaN(t))l=isNaN(e)?0:-1;else{if(!isNaN(e))return t-e;l=1}return("top"===r&&"desc"===s||"bottom"===r&&"asc"===s)&&(l*=-1),l},string:function(t,e,i,o,n,s,a){var r,l=a.alignEmptyValues,h=0;if(t){if(e){switch(_typeof(a.locale)){case"boolean":a.locale&&(r=this.table.modules.localize.getLocale());break;case"string":r=a.locale}return String(t).toLowerCase().localeCompare(String(e).toLowerCase(),r)}h=1}else h=e?-1:0;return("top"===l&&"desc"===s||"bottom"===l&&"asc"===s)&&(h*=-1),h},date:function(t,e,i,o,n,s,a){return a.format||(a.format="DD/MM/YYYY"),this.sorters.datetime.call(this,t,e,i,o,n,s,a)},time:function(t,e,i,o,n,s,a){return a.format||(a.format="hh:mm"),this.sorters.datetime.call(this,t,e,i,o,n,s,a)},datetime:function(t,e,i,o,n,s,a){var r=a.format||"DD/MM/YYYY hh:mm:ss",l=a.alignEmptyValues,h=0;if("undefined"!=typeof moment){if(t=moment(t,r),e=moment(e,r),t.isValid()){if(e.isValid())return t-e;h=1}else h=e.isValid()?-1:0;return("top"===l&&"desc"===s||"bottom"===l&&"asc"===s)&&(h*=-1),h}console.error("Sort Error - 'datetime' sorter is dependant on moment.js")},boolean:function(t,e,i,o,n,s,a){return(!0===t||"true"===t||"True"===t||1===t?1:0)-(!0===e||"true"===e||"True"===e||1===e?1:0)},array:function(t,e,i,o,n,s,a){var r=a.type||"length",l=a.alignEmptyValues,h=0;function c(t){switch(r){case"length":return t.length;case"sum":return t.reduce(function(t,e){return t+e});case"max":return Math.max.apply(null,t);case"min":return Math.min.apply(null,t);case"avg":return t.reduce(function(t,e){return t+e})/t.length}}if(Array.isArray(t)){if(Array.isArray(e))return(t?c(t):0)-(e?c(e):0);l=1}else l=Array.isArray(e)?-1:0;return("top"===l&&"desc"===s||"bottom"===l&&"asc"===s)&&(h*=-1),h},exists:function(t,e,i,o,n,s,a){return(void 0===t?0:1)-(void 0===e?0:1)},alphanum:function(t,e,i,o,n,s,a){var r,l,h,c,u,d=0,p=/(\d+)|(\D+)/g,f=/\d/,m=a.alignEmptyValues,g=0;if(t||0===t){if(e||0===e){if(isFinite(t)&&isFinite(e))return t-e;if((r=String(t).toLowerCase())===(l=String(e).toLowerCase()))return 0;if(!f.test(r)||!f.test(l))return l<r?1:-1;for(r=r.match(p),l=l.match(p),u=r.length>l.length?l.length:r.length;d<u;)if((h=r[d])!==(c=l[d++]))return isFinite(h)&&isFinite(c)?("0"===h.charAt(0)&&(h="."+h),"0"===c.charAt(0)&&(c="."+c),h-c):c<h?1:-1;return r.length>l.length}g=1}else g=e||0===e?-1:0;return("top"===m&&"desc"===s||"bottom"===m&&"asc"===s)&&(g*=-1),g}},w.prototype.registerModule("sort",W);var j=function(t){this.table=t};return j.prototype.initializeColumn=function(t){var e,i=this,o=[];t.definition.validator&&(Array.isArray(t.definition.validator)?t.definition.validator.forEach(function(t){(e=i._extractValidator(t))&&o.push(e)}):(e=this._extractValidator(t.definition.validator))&&o.push(e),t.modules.validate=!!o.length&&o)},j.prototype._extractValidator=function(t){var e,i,o;switch(void 0===t?"undefined":_typeof(t)){case"string":return i=(e=t.split(":",2)).shift(),o=e[0],this._buildValidator(i,o);case"function":return this._buildValidator(t);case"object":return this._buildValidator(t.type,t.parameters)}},j.prototype._buildValidator=function(t,e){var i="function"==typeof t?t:this.validators[t];return i?{type:"function"==typeof t?"function":t,func:i,params:e}:(console.warn("Validator Setup Error - No matching validator found:",t),!1)},j.prototype.validate=function(t,e,i){var o=this,n=[];return t&&t.forEach(function(t){t.func.call(o,e,i,t.params)||n.push({type:t.type,parameters:t.params})}),!n.length||n},j.prototype.validators={integer:function(t,e,i){return""===e||null==e||"number"==typeof(e=Number(e))&&isFinite(e)&&Math.floor(e)===e},float:function(t,e,i){return""===e||null==e||"number"==typeof(e=Number(e))&&isFinite(e)&&e%1!=0},numeric:function(t,e,i){return""===e||null==e||!isNaN(e)},string:function(t,e,i){return""===e||null==e||isNaN(e)},max:function(t,e,i){return""===e||null==e||parseFloat(e)<=i},min:function(t,e,i){return""===e||null==e||parseFloat(e)>=i},minLength:function(t,e,i){return""===e||null==e||String(e).length>=i},maxLength:function(t,e,i){return""===e||null==e||String(e).length<=i},in:function(t,e,i){return""===e||null==e||("string"==typeof i&&(i=i.split("|")),""===e||-1<i.indexOf(e))},regex:function(t,e,i){return""===e||null==e||new RegExp(i).test(e)},unique:function(t,i,e){if(""===i||null==i)return!0;var o=!0,n=t.getData(),s=t.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(t){var e=t.getData();e!==n&&i==s.getFieldValue(e)&&(o=!1)}),o},required:function(t,e,i){return""!==e&null!==e&&void 0!==e}},w.prototype.registerModule("validate",j),w}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.hopscotch=e()}(this,function(){"use strict";var g,v,e,y,b,w,T,C,R,k,D,M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L="bubble_default",i=window.Sizzle||null,P="undefined",A=!1,I=("undefined"==typeof jQuery?"undefined":M(jQuery))!==P,a=!1,s=!1,O=/^[a-zA-Z]+[a-zA-Z0-9_-]*$/,n={left:"right",right:"left"};try{M(window.sessionStorage)!==P&&(a=!0,sessionStorage.setItem("hopscotch.test.storage","ok"),sessionStorage.removeItem("hopscotch.test.storage"),s=!0)}catch(t){}return k={smoothScroll:!0,scrollDuration:1e3,scrollTopMargin:200,showCloseButton:!0,showPrevButton:!1,showNextButton:!0,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:!0,isRtl:!1,cookieName:"hopscotch.tour.state"},Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),(T={addClass:function(t,e){var i,o,n,s;if(t.className){for(o=e.split(/\s+/),i=" "+t.className+" ",n=0,s=o.length;n<s;++n)i.indexOf(" "+o[n]+" ")<0&&(i+=o[n]+" ");t.className=i.replace(/^\s+|\s+$/g,"")}else t.className=e},removeClass:function(t,e){var i,o,n,s;for(o=e.split(/\s+/),i=" "+t.className+" ",n=0,s=o.length;n<s;++n)i=i.replace(" "+o[n]+" "," ");t.className=i.replace(/^\s+|\s+$/g,"")},hasClass:function(t,e){return!!t.className&&-1!==(" "+t.className+" ").indexOf(" "+e+" ")},getPixelValue:function(t){var e=void 0===t?"undefined":M(t);return"number"===e?t:"string"===e?parseInt(t,10):0},valOrDefault:function(t,e){return(void 0===t?"undefined":M(t))!==P?t:e},invokeCallbackArrayHelper:function(t){var e;if(Array.isArray(t)&&"function"==typeof(e=R[t[0]]))return e.apply(this,t.slice(1))},invokeCallbackArray:function(t){var e,i;if(Array.isArray(t)){if("string"==typeof t[0])return T.invokeCallbackArrayHelper(t);for(e=0,i=t.length;e<i;++e)T.invokeCallback(t[e])}},invokeCallback:function(t){return"function"==typeof t?t():"string"==typeof t&&R[t]?R[t]():T.invokeCallbackArray(t)},invokeEventCallbacks:function(t,e){var i,o,n=C[t];if(e)return this.invokeCallback(e);for(i=0,o=n.length;i<o;++i)this.invokeCallback(n[i].cb)},getScrollTop:function(){return M(window.pageYOffset)!==P?window.pageYOffset:document.documentElement.scrollTop},getScrollLeft:function(){return M(window.pageXOffset)!==P?window.pageXOffset:document.documentElement.scrollLeft},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight},addEvtListener:function(t,e,i){if(t)return t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)},removeEvtListener:function(t,e,i){if(t)return t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent("on"+e,i)},documentIsReady:function(){return"complete"===document.readyState},evtPreventDefault:function(t){t.preventDefault?t.preventDefault():event&&(event.returnValue=!1)},extend:function(t,e){var i;for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},getStepTargetHelper:function(t){var e=document.getElementById(t);if(e)return e;if(I)return(e=jQuery(t)).length?e[0]:null;if(i)return(e=new i(t)).length?e[0]:null;if(document.querySelector)try{return document.querySelector(t)}catch(t){}return/^#[a-zA-Z][\w-_:.]*$/.test(t)?document.getElementById(t.substring(1)):null},getStepTarget:function(t){var e;if(!t||!t.target)return null;if("string"==typeof t.target)return T.getStepTargetHelper(t.target);if(Array.isArray(t.target)){var i,o;for(i=0,o=t.target.length;i<o;i++)if("string"==typeof t.target[i]&&(e=T.getStepTargetHelper(t.target[i])))return e;return null}return t.target},getI18NString:function(t){return y[t]||e[t]},setState:function(e,i,o){var t,n="";if(a&&s)try{sessionStorage.setItem(e,i)}catch(t){s=!1,this.setState(e,i,o)}else a&&sessionStorage.removeItem(e),o&&((t=new Date).setTime(t.getTime()+24*o*60*60*1e3),n="; expires="+t.toGMTString()),document.cookie=e+"="+i+n+"; path=/"},getState:function(t){var e,i,o,n=t+"=",s=document.cookie.split(";");if(a&&(o=sessionStorage.getItem(t)))return o;for(e=0;e<s.length;e++){for(i=s[e];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n)){o=i.substring(n.length,i.length);break}}return o},clearState:function(t){a?sessionStorage.removeItem(t):this.setState(t,"",-1)},normalizePlacement:function(t){!t.placement&&t.orientation&&(t.placement=t.orientation)},flipPlacement:function(t){if(t.isRtl&&!t._isFlipped){var e,i,o=["orientation","placement"];for(i in t.xOffset&&(t.xOffset=-1*this.getPixelValue(t.xOffset)),o)e=o[i],t.hasOwnProperty(e)&&n.hasOwnProperty(t[e])&&(t[e]=n[t[e]]);t._isFlipped=!0}}}).addEvtListener(window,"load",function(){A&&D.startTour()}),C={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]},R={},e={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"},(g=function(t){this.init(t)}).prototype={isShowing:!(y={}),currStep:void 0,setPosition:function(t){var e,i,o,n,s,a,r,l=T.getStepTarget(t),h=this.element,c=this.arrowEl,u=t.isRtl?"right":"left";if(T.flipPlacement(t),T.normalizePlacement(t),i=h.offsetWidth,e=h.offsetHeight,T.removeClass(h,"fade-in-down fade-in-up fade-in-left fade-in-right"),o=l.getBoundingClientRect(),r=t.isRtl?o.right-i:o.left,"top"===t.placement)n=o.top-e-this.opt.arrowWidth,s=r;else if("bottom"===t.placement)n=o.bottom+this.opt.arrowWidth,s=r;else if("left"===t.placement)n=o.top,s=o.left-i-this.opt.arrowWidth;else{if("right"!==t.placement)throw new Error("Bubble placement failed because step.placement is invalid or undefined!");n=o.top,s=o.right+this.opt.arrowWidth}(a="center"!==t.arrowOffset?T.getPixelValue(t.arrowOffset):t.arrowOffset)?"top"===t.placement||"bottom"===t.placement?(c.style.top="",c.style[u]="center"===a?Math.floor(i/2-c.offsetWidth/2)+"px":a+"px"):"left"!==t.placement&&"right"!==t.placement||(c.style[u]="",c.style.top="center"===a?Math.floor(e/2-c.offsetHeight/2)+"px":a+"px"):(c.style.top="",c.style[u]=""),"center"===t.xOffset?s=o.left+l.offsetWidth/2-i/2:s+=T.getPixelValue(t.xOffset),"center"===t.yOffset?n=o.top+l.offsetHeight/2-e/2:n+=T.getPixelValue(t.yOffset),t.fixedElement||(n+=T.getScrollTop(),s+=T.getScrollLeft()),h.style.position=t.fixedElement?"fixed":"absolute",h.style.top=n+"px",h.style.left=s+"px"},render:function(t,e,i){var o,n,s,a,r,l,h,c,u,d,p=this.element;if(t?this.currStep=t:this.currStep&&(t=this.currStep),this.opt.isTourBubble?(a=D.getCurrTour())&&(n=a.customData,o=a.customRenderer,t.isRtl=t.hasOwnProperty("isRtl")?t.isRtl:a.hasOwnProperty("isRtl")?a.isRtl:this.opt.isRtl,s=a.unsafe,Array.isArray(a.steps)&&(r=a.steps.length,l=this._getStepI18nNum(this._getStepNum(r-1)),c=this._getStepNum(e)===this._getStepNum(r-1))):(n=t.customData,o=t.customRenderer,s=t.unsafe,t.isRtl=t.hasOwnProperty("isRtl")?t.isRtl:this.opt.isRtl),h=c?T.getI18NString("doneBtn"):t.showSkip?T.getI18NString("skipBtn"):T.getI18NString("nextBtn"),T.flipPlacement(t),T.normalizePlacement(t),this.placement=t.placement,d={i18n:{prevBtn:T.getI18NString("prevBtn"),nextBtn:h,closeTooltip:T.getI18NString("closeTooltip"),stepNum:this._getStepI18nNum(this._getStepNum(e)),numSteps:l},buttons:{showPrev:T.valOrDefault(t.showPrevButton,this.opt.showPrevButton)&&0<this._getStepNum(e),showNext:T.valOrDefault(t.showNextButton,this.opt.showNextButton),showCTA:T.valOrDefault(t.showCTAButton&&t.ctaLabel,!1),ctaLabel:t.ctaLabel,showClose:T.valOrDefault(this.opt.showCloseButton,!0)},step:{num:e,isLast:T.valOrDefault(c,!1),title:t.title||"",content:t.content||"",isRtl:t.isRtl,placement:t.placement,padding:T.valOrDefault(t.padding,this.opt.bubblePadding),width:T.getPixelValue(t.width)||this.opt.bubbleWidth,customData:t.customData||{}},tour:{isTour:this.opt.isTourBubble,numSteps:r,unsafe:T.valOrDefault(s,!1),customData:n||{}}},"function"==typeof o)p.innerHTML=o(d);else if("string"==typeof o){if(!D.templates||"function"!=typeof D.templates[o])throw new Error('Bubble rendering failed - template "'+o+'" is not a function.');p.innerHTML=D.templates[o](d)}else if(b)p.innerHTML=b(d);else{if(!D.templates||"function"!=typeof D.templates[L])throw new Error('Bubble rendering failed - template "'+L+'" is not a function.');p.innerHTML=D.templates[L](d)}var f,m=p.children,g=m.length;for(u=0;u<g;u++)f=m[u],T.hasClass(f,"hopscotch-arrow")&&(this.arrowEl=f);return p.style.zIndex="number"==typeof t.zindex?t.zindex:"",this._setArrow(t.placement),this.hide(!1),this.setPosition(t),i&&i(!t.fixedElement),this},_getStepNum:function(t){var e,i=0,o=D.getSkippedStepsIndexes(),n=o.length;for(e=0;e<n;e++)o[e]<t&&i++;return t-i},_getStepI18nNum:function(t){var e=T.getI18NString("stepNums");return e&&t<e.length?t=e[t]:t+=1,t},_setArrow:function(t){T.removeClass(this.arrowEl,"down up right left"),"top"===t?T.addClass(this.arrowEl,"down"):"bottom"===t?T.addClass(this.arrowEl,"up"):"left"===t?T.addClass(this.arrowEl,"right"):"right"===t&&T.addClass(this.arrowEl,"left")},_getArrowDirection:function(){return"top"===this.placement?"down":"bottom"===this.placement?"up":"left"===this.placement?"right":"right"===this.placement?"left":void 0},show:function(){var t=this,e="fade-in-"+this._getArrowDirection();return T.removeClass(this.element,"hide"),T.addClass(this.element,e),setTimeout(function(){T.removeClass(t.element,"invisible")},50),setTimeout(function(){T.removeClass(t.element,e)},1e3),this.isShowing=!0,this},hide:function(t){var e=this.element;return t=T.valOrDefault(t,!0),e.style.top="",e.style.left="",t?(T.addClass(e,"hide"),T.removeClass(e,"invisible")):(T.removeClass(e,"hide"),T.addClass(e,"invisible")),T.removeClass(e,"animate fade-in-up fade-in-down fade-in-right fade-in-left"),this.isShowing=!1,this},destroy:function(){var t=this.element;t&&t.parentNode.removeChild(t),T.removeEvtListener(t,"click",this.clickCb)},_handleBubbleClick:function(i){var t;if("cta"===(t=function t(e){return e===i.currentTarget?null:T.hasClass(e,"hopscotch-cta")?"cta":T.hasClass(e,"hopscotch-next")?"next":T.hasClass(e,"hopscotch-prev")?"prev":T.hasClass(e,"hopscotch-close")?"close":t(e.parentElement)}((i=i||window.event).target||i.srcElement)))this.opt.isTourBubble||D.getCalloutManager().removeCallout(this.currStep.id),this.currStep.onCTA&&T.invokeCallback(this.currStep.onCTA);else if("next"===t)D.nextStep(!0);else if("prev"===t)D.prevStep(!0);else if("close"===t){if(this.opt.isTourBubble){var e=D.getCurrStepNum()===D.getCurrTour().steps.length-1;T.invokeEventCallbacks("close"),D.endTour(!0,e)}else this.opt.onClose&&T.invokeCallback(this.opt.onClose),this.opt.id&&!this.opt.isTourBubble?D.getCalloutManager().removeCallout(this.opt.id):this.destroy();T.evtPreventDefault(i)}},init:function(t){var e,i,o,n,s=document.createElement("div"),a=this,r=!1;this.element=s,n={showPrevButton:k.showPrevButton,showNextButton:k.showNextButton,bubbleWidth:k.bubbleWidth,bubblePadding:k.bubblePadding,arrowWidth:k.arrowWidth,isRtl:k.isRtl,showNumber:!0,isTourBubble:!0},t=(void 0===t?"undefined":M(t))===P?{}:t,T.extend(n,t),this.opt=n,s.className="hopscotch-bubble animated",n.isTourBubble?(o=D.getCurrTour())&&T.addClass(s,"tour-"+o.id):T.addClass(s,"hopscotch-callout no-number"),e=function(){!r&&a.isShowing&&(r=!0,setTimeout(function(){a.setPosition(a.currStep),r=!1},100))},T.addEvtListener(window,"resize",e),this.clickCb=function(t){a._handleBubbleClick(t)},T.addEvtListener(s,"click",this.clickCb),this.hide(),T.documentIsReady()?document.body.appendChild(s):(document.addEventListener?(i=function(){document.removeEventListener("DOMContentLoaded",i),window.removeEventListener("load",i),document.body.appendChild(s)},document.addEventListener("DOMContentLoaded",i,!1)):(i=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",i),window.detachEvent("onload",i),document.body.appendChild(s))},document.attachEvent("onreadystatechange",i)),T.addEvtListener(window,"load",i))}},v=function(){var o={},n={};this.createCallout=function(t){var e;if(!t.id)throw new Error("Must specify a callout id.");if(!O.test(t.id))throw new Error("Callout ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.");if(o[t.id])throw new Error("Callout by that id already exists. Please choose a unique id.");if(!T.getStepTarget(t))throw new Error("Must specify existing target element via 'target' option.");return t.showNextButton=t.showPrevButton=!1,t.isTourBubble=!1,e=new g(t),o[t.id]=e,n[t.id]=t,e.render(t,null,function(){e.show(),t.onShow&&T.invokeCallback(t.onShow)}),e},this.getCallout=function(t){return o[t]},this.removeAllCallouts=function(){var t;for(t in o)o.hasOwnProperty(t)&&this.removeCallout(t)},this.removeCallout=function(t){var e=o[t];o[t]=null,n[t]=null,e&&e.destroy()},this.refreshCalloutPositions=function(){var t,e,i;for(t in o)o.hasOwnProperty(t)&&n.hasOwnProperty(t)&&(e=o[t],i=n[t],e&&i&&e.setPosition(i))}},D=new function(t){var n,e,a,l,h,r,c,u,i=this,d={},p=[],E=function(t){return n&&n.element&&n.element.parentNode||(n=new g(a)),t&&T.extend(n.opt,{bubblePadding:_("bubblePadding"),bubbleWidth:_("bubbleWidth"),showNextButton:_("showNextButton"),showPrevButton:_("showPrevButton"),showCloseButton:_("showCloseButton"),arrowWidth:_("arrowWidth"),isRtl:_("isRtl")}),n},_=function(t){return void 0===a?k[t]:T.valOrDefault(a[t],k[t])},x=function(){return!l||h<0||h>=l.steps.length?null:l.steps[h]},S=function(){i.nextStep()},f=function t(e,i){var o,n;0<=h+e&&h+e<l.steps.length?(h+=e,n=function(){T.getStepTarget(o)?(d[h]&&delete d[h],i(h)):(d[h]=!0,T.invokeEventCallbacks("error"),t(e,i))},(o=x()).delay?setTimeout(n,o.delay):n()):i(-1)},o=function(i,o){var t,n,s,e,a=E(),r=this;if(a.hide(),i=T.valOrDefault(i,!0),(t=x()).nextOnTargetClick&&T.removeEvtListener(T.getStepTarget(t),"click",S),n=t,s=0<o?n.multipage:0<h&&l.steps[h-1].multipage,e=function(t){var e;if(-1===t)return this.endTour(!0);i&&(e=0<o?T.invokeEventCallbacks("next",n.onNext):T.invokeEventCallbacks("prev",n.onPrev)),t===h&&(s?m():(e=T.valOrDefault(e,!0))?this.showStep(t):this.endTour(!1))},!s&&_("skipIfNoElement"))f(o,function(t){e.call(r,t)});else if(0<=h+o&&h+o<l.steps.length){if(h+=o,t=x(),!T.getStepTarget(t)&&!s)return T.invokeEventCallbacks("error"),this.endTour(!0,!1);e.call(this,h)}else if(h+o===l.steps.length)return this.endTour();return this},s=function(t){var b=l.steps[t],e=E(),w=T.getStepTarget(b);function C(){e.show(),T.invokeEventCallbacks("show",b.onShow)}h!==t&&x().nextOnTargetClick&&T.removeEvtListener(T.getStepTarget(x()),"click",S),h=t,e.hide(!1),e.render(b,t,function(t){var i,e,o,n,s,a,r,l,h,c,u,d,p,f,m,g,v,y;t?(i=C,l=E().element,h=T.getPixelValue(l.style.top),c=h+T.getPixelValue(l.offsetHeight),u=T.getStepTarget(x()).getBoundingClientRect(),d=u.top+T.getScrollTop(),p=u.bottom+T.getScrollTop(),f=h<d?h:d,m=p<c?c:p,g=T.getScrollTop(),v=g+T.getWindowHeight(),y=f-_("scrollTopMargin"),g<=f&&(f<=g+_("scrollTopMargin")||m<=v)?i&&i():_("smoothScroll")?("undefined"==typeof YAHOO?"undefined":M(YAHOO))!==P&&M(YAHOO.env)!==P&&M(YAHOO.env.ua)!==P&&M(YAHOO.util)!==P&&M(YAHOO.util.Scroll)!==P?(e=YAHOO.env.ua.webkit?document.body:document.documentElement,n=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:void 0,(o=new YAHOO.util.Scroll(e,{scroll:{to:[0,y]}},_("scrollDuration")/1e3,n)).onComplete.subscribe(i),o.animate()):I?jQuery("body, html").animate({scrollTop:y},_("scrollDuration"),i):(y<0&&(y=0),s=f<g?-1:1,a=Math.abs(g-y)/(_("scrollDuration")/10),(r=function(){var t=T.getScrollTop(),e=t+s*a;if(0<s&&y<=e||s<0&&e<=y)return e=y,i&&i(),void window.scrollTo(0,e);window.scrollTo(0,e),T.getScrollTop()!==t?setTimeout(r,10):i&&i()})()):(window.scrollTo(0,y),i&&i())):C(),b.nextOnTargetClick&&T.addEvtListener(w,"click",S)}),m()},m=function(){var t=l.id+":"+h,e=D.getSkippedStepsIndexes();e&&0<e.length&&(t+=":"+e.join(",")),T.setState(_("cookieName"),t,1)};this.getCalloutManager=function(){return(void 0===e?"undefined":M(e))===P&&(e=new v),e},this.startTour=function(t,e){var i,o={},n=this;if(!l){if(!t)throw new Error("Tour data is required for startTour.");if(!t.id||!O.test(t.id))throw new Error("Tour ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.");(function(t){var e,i,o,n={};for(e in t)t.hasOwnProperty(e)&&"id"!==e&&"steps"!==e&&(n[e]=t[e]);return u.call(this,n,!0),(i=T.getState(_("cookieName")))&&(o=i.split(":"),r=o[0],c=o[1],2<o.length&&(p=o[2].split(",")),c=parseInt(c,10)),this}).call(this,l=t)}if((void 0===e?"undefined":M(e))!==P){if(e>=l.steps.length)throw new Error("Specified step number out of bounds.");i=e}if(!T.documentIsReady())return A=!0,this;if(void 0===i&&l.id===r&&(void 0===c?"undefined":M(c))!==P){if(i=c,0<p.length)for(var s=0,a=p.length;s<a;s++)o[p[s]]=!0}else i||(i=0);return function(t,e,i){var o,n;if(h=t||0,d=e||{},o=x(),n=T.getStepTarget(o))i(h);else if(!n){if(T.invokeEventCallbacks("error"),d[h]=!0,_("skipIfNoElement"))return f(1,i);i(h=-1)}}(i,o,function(t){-1!==t&&T.getStepTarget(l.steps[t])?(T.invokeEventCallbacks("start"),E().hide(!1),n.isActive=!0,T.getStepTarget(x())?n.showStep(t):(T.invokeEventCallbacks("error"),_("skipIfNoElement")&&n.nextStep(!1))):n.endTour(!1,!1)}),this},this.showStep=function(t){var e=l.steps[t],i=h;return T.getStepTarget(e)?(e.delay?setTimeout(function(){s(t)},e.delay):s(t),this):(h=t,T.invokeEventCallbacks("error"),void(h=i))},this.prevStep=function(t){return o.call(this,t,-1),this},this.nextStep=function(t){return o.call(this,t,1),this},this.endTour=function(t,e){var i,o=E();return t=T.valOrDefault(t,!0),e=T.valOrDefault(e,!0),l&&(i=x())&&i.nextOnTargetClick&&T.removeEvtListener(T.getStepTarget(i),"click",S),c=void(h=0),o.hide(),t&&T.clearState(_("cookieName")),this.isActive&&(this.isActive=!1,l&&e&&T.invokeEventCallbacks("end")),this.removeCallbacks(null,!0),this.resetDefaultOptions(),n&&(n.destroy(),n=null),l=null,this},this.getCurrTour=function(){return l},this.getCurrTarget=function(){return T.getStepTarget(x())},this.getCurrStepNum=function(){return h},this.getSkippedStepsIndexes=function(){var t,e=[];for(t in d)e.push(t);return e},this.refreshBubblePosition=function(){var t=x();return t&&E().setPosition(t),this.getCalloutManager().refreshCalloutPositions(),this},this.listen=function(t,e,i){return t&&C[t].push({cb:e,fromTour:i}),this},this.unlisten=function(t,e){var i,o,n=C[t];for(i=0,o=n.length;i<o;++i)n[i].cb===e&&n.splice(i,1);return this},this.removeCallbacks=function(t,e){var i,o,n,s;for(s in C)if(!t||t===s)if(e)for(o=0,n=(i=C[s]).length;o<n;++o)i[o].fromTour&&(i.splice(o--,1),--n);else C[s]=[];return this},this.registerHelper=function(t,e){"string"==typeof t&&"function"==typeof e&&(R[t]=e)},this.unregisterHelper=function(t){R[t]=null},this.invokeHelper=function(t){var e,i,o=[];for(e=1,i=arguments.length;e<i;++e)o.push(arguments[e]);R[t]&&R[t].call(null,o)},this.setCookieName=function(t){return a.cookieName=t,this},this.resetDefaultOptions=function(){return a={},this},this.resetDefaultI18N=function(){return y={},this},this.getState=function(){return T.getState(_("cookieName"))},u=function(t,e){var i,o,n,s=["next","prev","start","end","show","error","close"];for(a||this.resetDefaultOptions(),T.extend(a,t),t&&T.extend(y,t.i18n),o=0,n=s.length;o<n;++o)t[i="on"+s[o].charAt(0).toUpperCase()+s[o].substring(1)]&&this.listen(s[o],t[i],e);return E(!0),this},this.configure=function(t){return u.call(this,t,!1)},this.setRenderer=function(t){var e=void 0===t?"undefined":M(t);return"string"===e?(L=t,b=void 0):"function"===e&&(b=t),this},this.setEscaper=function(t){return"function"==typeof t&&(w=t),this},function(t){t&&this.configure(t)}.call(this,t)},function(){var l={escape:function(t){return w?w(t):null==t?"":(""+t).replace(new RegExp("[&<>\"']","g"),function(t){return"&"==t?"&amp;":"<"==t?"&lt;":">"==t?"&gt;":'"'==t?"&quot;":"'"==t?"&#x27;":void 0})}};this.templates=this.templates||{},this.templates.bubble_default=function(t){var e,i="";l.escape,Array.prototype.join;function o(t,e){return e?l.escape(t):t}i+="\n";var n=t.i18n,s=t.buttons,a=t.step,r=t.tour;return i+='\n<div class="hopscotch-bubble-container" style="width: '+(null==(e=a.width)?"":e)+"px; padding: "+(null==(e=a.padding)?"":e)+'px;">\n  ',r.isTour&&(i+='<span class="hopscotch-bubble-number">'+(null==(e=n.stepNum)?"":e)+"</span>"),i+='\n  <div class="hopscotch-bubble-content">\n    ',""!==a.title&&(i+='<h3 class="hopscotch-title">'+(null==(e=o(a.title,r.unsafe))?"":e)+"</h3>"),i+="\n    ",""!==a.content&&(i+='<div class="hopscotch-content">'+(null==(e=o(a.content,r.unsafe))?"":e)+"</div>"),i+='\n  </div>\n  <div class="hopscotch-actions">\n    ',s.showPrev&&(i+='<button class="hopscotch-nav-button prev hopscotch-prev">'+(null==(e=n.prevBtn)?"":e)+"</button>"),i+="\n    ",s.showCTA&&(i+='<button class="hopscotch-nav-button next hopscotch-cta">'+(null==(e=s.ctaLabel)?"":e)+"</button>"),i+="\n    ",s.showNext&&(i+='<button class="hopscotch-nav-button next hopscotch-next">'+(null==(e=n.nextBtn)?"":e)+"</button>"),i+="\n  </div>\n  ",s.showClose&&(i+='<button class="hopscotch-bubble-close hopscotch-close">'+(null==(e=n.closeTooltip)?"":e)+"</button>"),i+='\n</div>\n<div class="hopscotch-bubble-arrow-container hopscotch-arrow">\n  <div class="hopscotch-bubble-arrow-border"></div>\n  <div class="hopscotch-bubble-arrow"></div>\n</div>\n'}}.call(D),D});